/*! For license information please see toolbar-chunk0ffc363a7380d6b0b270.js.LICENSE.txt */
(this.webpackChunkCoCreate_attributes=this.webpackChunkCoCreate_attributes||[]).push([["toolbar-chunk"],{"../../CoCreateJS/node_modules/@cocreate/toolbar/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _cocreate_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @cocreate/utils */ "../../CoCreateJS/node_modules/@cocreate/utils/src/index.js");\n     /**\n      * returns the absolute position of an element regardless of position/float issues\n      * @param {HTMLElement} el - element to return position for \n      * @returns {object} { x: num, y: num }\n      */\n/*global ResizeObserver*/\n     \n\n     function getPosition(el) {\n         let { x, y } = el.getBoundingClientRect()\n         return { left: x, top: y };\n         // var x = 0,\n         //     y = 0;\n\n         // while (el != null && (el.tagName || \'\').toLowerCase() != \'html\') {\n         //     x += el.offsetLeft || 0; \n         //     y += el.offsetTop || 0;\n         //     el = el.offsetParent;\n         // }\n\n         // return { left: parseInt(x, 10), top: parseInt(y, 10) };\n     }\n\n     let toolbars = {};\n\n     function CoCreateToolbar({ selector, eventType, document: sDoc, config, configKey }) {\n\n\n         let Window, Document, frameElement, frame = sDoc.defaultView ? sDoc.defaultView.frameElement : sDoc.ccdefaultView.frameElement;\n\n         if (!frame) {\n             frameElement = frame.contentWindow.document.body;\n             Document = document;\n             Window = window;\n         }\n         else {\n             frameElement = frame;\n             Window = frame.contentWindow;\n             Document = Window.document || Window.contentDocument;\n         }\n         let box = document.querySelector(selector);\n         if (box) {\n\n             toolbars[selector] = box;\n\n\n\n             let toolbar = box.querySelector(":scope .toolbar");\n             let tagName = box.querySelector(":scope [tagName]");\n             if (!toolbar) toolbar = { offsetHeight: 0 };\n             let initiated = false;\n             let continer = {};\n             let watch;\n             Document.addEventListener(eventType, (e) => {\n                 continer.lastElement = continer.element;\n                 continer.element = e.target;\n                 update();\n\n             });\n\n             Window.addEventListener("scroll",\n                 () =>\n                 continer.element && update(continer.element)\n             );\n\n             function update(dontWatch) {\n                 //  if (!initiated) {\n                 //      initiated = true;\n                 //      Window.addEventListener("scroll",\n                 //          () =>\n                 //          continer.element && update(continer.element)\n                 //      );\n\n                 //  }\n                 if (!dontWatch) {\n                     if (watch)\n                         watch.unobserve(continer.lastElement)\n                     watch = new ResizeObserver(() => continer.element && update( true));\n                     watch.observe(continer.element);\n                 }\n\n                \n                 (0,_cocreate_utils__WEBPACK_IMPORTED_MODULE_0__.configExecuter)(\n                     continer.element,\n                     configKey,\n                     (element, config, isSelector) => {\n\n                         if (isSelector) {\n                             let selector = config[configKey];\n                             if (!toolbars[selector]) {\n                                 box = document.querySelector(selector)\n                                 toolbars[selector] = box;\n                                 toolbar = box.querySelector(":scope .toolbar");\n                                 tagName = box.querySelector(":scope [tagName]");\n                             }\n\n                         }\n\n\n                         let elPosition = getPosition(element)\n                         box.style.display = "block";\n                         box.style.top =\n                             frameElement.offsetTop +\n                             elPosition.top -\n                             Window.scrollY -\n                             toolbar.offsetHeight +\n                             "px";\n                         box.style.left =\n                             frameElement.offsetLeft +\n                             elPosition.left +\n                             Window.scrollX +\n                             "px";\n                         box.style.width = element.offsetWidth + "px";\n                         box.style.height = element.offsetHeight + "px";\n\n                         if (element.offsetTop - toolbar.offsetHeight < 0)\n                             box.setAttribute("toolbar-overflow", "");\n                         else box.removeAttribute("toolbar-overflow");\n\n                         if (tagName && tagName.innerHTML !== element.tagName) {\n                             tagName.innerHTML = element.tagName;\n\n                             // for (let config of elementConfig) {\n                             //   if (config.tagName && element.matches(config.selector)) {\n                             //     if (tagName.innerHTML !== config.tagName)\n                             //       tagName.innerHTML = config.tagName;\n                             //     break;\n                             //   }\n                             // }\n\n\n                             if (config.tagName && config.tagName !== tagName.innerHTML) {\n                                 tagName.innerHTML = config.tagName;\n                             }\n                         }\n                     },\n                     config\n                 );\n\n             }\n         }\n     }\n\n\n     /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({ init: CoCreateToolbar });\n     //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5hdHRyaWJ1dGVzLy4uLy4uL0NvQ3JlYXRlSlMvbm9kZV9tb2R1bGVzL0Bjb2NyZWF0ZS90b29sYmFyL3NyYy9pbmRleC5qcz8zZmU2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBLGdCQUFnQixZQUFZO0FBQzVCLGtCQUFrQixPQUFPLEVBQUU7QUFDM0I7QUFDQTtBQUNBLEtBQXFEOztBQUVyRDtBQUNBLGNBQWMsT0FBTztBQUNyQixpQkFBaUI7QUFDakI7QUFDQTs7QUFFQTtBQUNBLHdDO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9CQUFvQjtBQUNwQjs7QUFFQTs7QUFFQSwrQkFBK0IseURBQXlEOzs7QUFHeEY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7O0FBSUE7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxjQUFjOztBQUVkO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQSxpQkFBaUIsK0RBQWM7QUFDL0I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBLEtBQUssaUVBQWUsQ0FBQyx3QkFBd0IsRUFBQyIsImZpbGUiOiIuLi8uLi9Db0NyZWF0ZUpTL25vZGVfbW9kdWxlcy9AY29jcmVhdGUvdG9vbGJhci9zcmMvaW5kZXguanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgICAgIC8qKlxuICAgICAgKiByZXR1cm5zIHRoZSBhYnNvbHV0ZSBwb3NpdGlvbiBvZiBhbiBlbGVtZW50IHJlZ2FyZGxlc3Mgb2YgcG9zaXRpb24vZmxvYXQgaXNzdWVzXG4gICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsIC0gZWxlbWVudCB0byByZXR1cm4gcG9zaXRpb24gZm9yIFxuICAgICAgKiBAcmV0dXJucyB7b2JqZWN0fSB7IHg6IG51bSwgeTogbnVtIH1cbiAgICAgICovXG4vKmdsb2JhbCBSZXNpemVPYnNlcnZlciovXG4gICAgIGltcG9ydCB7IGNvbmZpZ0V4ZWN1dGVyIH0gZnJvbSAnQGNvY3JlYXRlL3V0aWxzJ1xuXG4gICAgIGZ1bmN0aW9uIGdldFBvc2l0aW9uKGVsKSB7XG4gICAgICAgICBsZXQgeyB4LCB5IH0gPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICAgcmV0dXJuIHsgbGVmdDogeCwgdG9wOiB5IH07XG4gICAgICAgICAvLyB2YXIgeCA9IDAsXG4gICAgICAgICAvLyAgICAgeSA9IDA7XG5cbiAgICAgICAgIC8vIHdoaWxlIChlbCAhPSBudWxsICYmIChlbC50YWdOYW1lIHx8ICcnKS50b0xvd2VyQ2FzZSgpICE9ICdodG1sJykge1xuICAgICAgICAgLy8gICAgIHggKz0gZWwub2Zmc2V0TGVmdCB8fCAwOyBcbiAgICAgICAgIC8vICAgICB5ICs9IGVsLm9mZnNldFRvcCB8fCAwO1xuICAgICAgICAgLy8gICAgIGVsID0gZWwub2Zmc2V0UGFyZW50O1xuICAgICAgICAgLy8gfVxuXG4gICAgICAgICAvLyByZXR1cm4geyBsZWZ0OiBwYXJzZUludCh4LCAxMCksIHRvcDogcGFyc2VJbnQoeSwgMTApIH07XG4gICAgIH1cblxuICAgICBsZXQgdG9vbGJhcnMgPSB7fTtcblxuICAgICBmdW5jdGlvbiBDb0NyZWF0ZVRvb2xiYXIoeyBzZWxlY3RvciwgZXZlbnRUeXBlLCBkb2N1bWVudDogc0RvYywgY29uZmlnLCBjb25maWdLZXkgfSkge1xuXG5cbiAgICAgICAgIGxldCBXaW5kb3csIERvY3VtZW50LCBmcmFtZUVsZW1lbnQsIGZyYW1lID0gc0RvYy5kZWZhdWx0VmlldyA/IHNEb2MuZGVmYXVsdFZpZXcuZnJhbWVFbGVtZW50IDogc0RvYy5jY2RlZmF1bHRWaWV3LmZyYW1lRWxlbWVudDtcblxuICAgICAgICAgaWYgKCFmcmFtZSkge1xuICAgICAgICAgICAgIGZyYW1lRWxlbWVudCA9IGZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuYm9keTtcbiAgICAgICAgICAgICBEb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICAgICAgIFdpbmRvdyA9IHdpbmRvdztcbiAgICAgICAgIH1cbiAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgIGZyYW1lRWxlbWVudCA9IGZyYW1lO1xuICAgICAgICAgICAgIFdpbmRvdyA9IGZyYW1lLmNvbnRlbnRXaW5kb3c7XG4gICAgICAgICAgICAgRG9jdW1lbnQgPSBXaW5kb3cuZG9jdW1lbnQgfHwgV2luZG93LmNvbnRlbnREb2N1bWVudDtcbiAgICAgICAgIH1cbiAgICAgICAgIGxldCBib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgIGlmIChib3gpIHtcblxuICAgICAgICAgICAgIHRvb2xiYXJzW3NlbGVjdG9yXSA9IGJveDtcblxuXG5cbiAgICAgICAgICAgICBsZXQgdG9vbGJhciA9IGJveC5xdWVyeVNlbGVjdG9yKFwiOnNjb3BlIC50b29sYmFyXCIpO1xuICAgICAgICAgICAgIGxldCB0YWdOYW1lID0gYm94LnF1ZXJ5U2VsZWN0b3IoXCI6c2NvcGUgW3RhZ05hbWVdXCIpO1xuICAgICAgICAgICAgIGlmICghdG9vbGJhcikgdG9vbGJhciA9IHsgb2Zmc2V0SGVpZ2h0OiAwIH07XG4gICAgICAgICAgICAgbGV0IGluaXRpYXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgIGxldCBjb250aW5lciA9IHt9O1xuICAgICAgICAgICAgIGxldCB3YXRjaDtcbiAgICAgICAgICAgICBEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgY29udGluZXIubGFzdEVsZW1lbnQgPSBjb250aW5lci5lbGVtZW50O1xuICAgICAgICAgICAgICAgICBjb250aW5lci5lbGVtZW50ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgIHVwZGF0ZSgpO1xuXG4gICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICBXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLFxuICAgICAgICAgICAgICAgICAoKSA9PlxuICAgICAgICAgICAgICAgICBjb250aW5lci5lbGVtZW50ICYmIHVwZGF0ZShjb250aW5lci5lbGVtZW50KVxuICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGUoZG9udFdhdGNoKSB7XG4gICAgICAgICAgICAgICAgIC8vICBpZiAoIWluaXRpYXRlZCkge1xuICAgICAgICAgICAgICAgICAvLyAgICAgIGluaXRpYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgIC8vICAgICAgV2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIixcbiAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgKCkgPT5cbiAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgY29udGluZXIuZWxlbWVudCAmJiB1cGRhdGUoY29udGluZXIuZWxlbWVudClcbiAgICAgICAgICAgICAgICAgLy8gICAgICApO1xuXG4gICAgICAgICAgICAgICAgIC8vICB9XG4gICAgICAgICAgICAgICAgIGlmICghZG9udFdhdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICBpZiAod2F0Y2gpXG4gICAgICAgICAgICAgICAgICAgICAgICAgd2F0Y2gudW5vYnNlcnZlKGNvbnRpbmVyLmxhc3RFbGVtZW50KVxuICAgICAgICAgICAgICAgICAgICAgd2F0Y2ggPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKCkgPT4gY29udGluZXIuZWxlbWVudCAmJiB1cGRhdGUoIHRydWUpKTtcbiAgICAgICAgICAgICAgICAgICAgIHdhdGNoLm9ic2VydmUoY29udGluZXIuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICBjb25maWdFeGVjdXRlcihcbiAgICAgICAgICAgICAgICAgICAgIGNvbnRpbmVyLmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICBjb25maWdLZXksXG4gICAgICAgICAgICAgICAgICAgICAoZWxlbWVudCwgY29uZmlnLCBpc1NlbGVjdG9yKSA9PiB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2VsZWN0b3IgPSBjb25maWdbY29uZmlnS2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0b29sYmFyc1tzZWxlY3Rvcl0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFyc1tzZWxlY3Rvcl0gPSBib3g7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFyID0gYm94LnF1ZXJ5U2VsZWN0b3IoXCI6c2NvcGUgLnRvb2xiYXJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdOYW1lID0gYm94LnF1ZXJ5U2VsZWN0b3IoXCI6c2NvcGUgW3RhZ05hbWVdXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbFBvc2l0aW9uID0gZ2V0UG9zaXRpb24oZWxlbWVudClcbiAgICAgICAgICAgICAgICAgICAgICAgICBib3guc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICBib3guc3R5bGUudG9wID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWVFbGVtZW50Lm9mZnNldFRvcCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsUG9zaXRpb24udG9wIC1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV2luZG93LnNjcm9sbFkgLVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFyLm9mZnNldEhlaWdodCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICBib3guc3R5bGUubGVmdCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lRWxlbWVudC5vZmZzZXRMZWZ0ICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxQb3NpdGlvbi5sZWZ0ICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV2luZG93LnNjcm9sbFggK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgYm94LnN0eWxlLndpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICBib3guc3R5bGUuaGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQgKyBcInB4XCI7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5vZmZzZXRUb3AgLSB0b29sYmFyLm9mZnNldEhlaWdodCA8IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveC5zZXRBdHRyaWJ1dGUoXCJ0b29sYmFyLW92ZXJmbG93XCIsIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgYm94LnJlbW92ZUF0dHJpYnV0ZShcInRvb2xiYXItb3ZlcmZsb3dcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFnTmFtZSAmJiB0YWdOYW1lLmlubmVySFRNTCAhPT0gZWxlbWVudC50YWdOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ05hbWUuaW5uZXJIVE1MID0gZWxlbWVudC50YWdOYW1lO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciAobGV0IGNvbmZpZyBvZiBlbGVtZW50Q29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgaWYgKGNvbmZpZy50YWdOYW1lICYmIGVsZW1lbnQubWF0Y2hlcyhjb25maWcuc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBpZiAodGFnTmFtZS5pbm5lckhUTUwgIT09IGNvbmZpZy50YWdOYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICB0YWdOYW1lLmlubmVySFRNTCA9IGNvbmZpZy50YWdOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnLnRhZ05hbWUgJiYgY29uZmlnLnRhZ05hbWUgIT09IHRhZ05hbWUuaW5uZXJIVE1MKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdOYW1lLmlubmVySFRNTCA9IGNvbmZpZy50YWdOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ1xuICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgfVxuICAgICAgICAgfVxuICAgICB9XG5cblxuICAgICBleHBvcnQgZGVmYXVsdCB7IGluaXQ6IENvQ3JlYXRlVG9vbGJhciB9O1xuICAgICAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../CoCreateJS/node_modules/@cocreate/toolbar/src/index.js\n')}}]);
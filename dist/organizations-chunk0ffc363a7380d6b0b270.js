/*! For license information please see organizations-chunk0ffc363a7380d6b0b270.js.LICENSE.txt */
(this.webpackChunkCoCreate_attributes=this.webpackChunkCoCreate_attributes||[]).push([["organizations-chunk"],{"../../CoCreateJS/node_modules/@cocreate/organizations/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _cocreate_observer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @cocreate/observer */ \"../../CoCreateJS/node_modules/@cocreate/observer/src/index.js\");\n/* harmony import */ var _cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @cocreate/cocreatejs */ \"../../CoCreateJS/node_modules/@cocreate/cocreatejs/src/index.js\");\n/* harmony import */ var _cocreate_input__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @cocreate/input */ \"../../CoCreateJS/node_modules/@cocreate/input/src/index.js\");\n/* harmony import */ var _cocreate_action__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @cocreate/action */ \"../CoCreate-action/src/index.js\");\n\n\n\n\n\nconst CoCreateOrganization = {\n\tmasterDB: '5ae0cfac6fb8c4e656fdaf92', // '5ae0cfac6fb8c4e656fdaf92' /** masterDB **/,\n\tinit: function() {\n\t\t\n\t\tif (config.organization_Id) {\n\t\t\tthis.masterDB = config.organization_Id;\n\t\t}\n\t\tconst self = this;\n\t\t_cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_1__.socket.listen('createOrg', function(data) {\n\t\t\tself.setDocumentId('organizations', data.document_id);\n\t\t\tdocument.dispatchEvent(new CustomEvent('createdOrg', {\n\t\t\t\tdetail: data\n\t\t\t}))\n\t\t})\n\t\t\n\t\t_cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_1__.socket.listen('createUser', function(data) {\n\t\t\tself.setDocumentId('users', data.document_id);\n\t\t\tdocument.dispatchEvent(new CustomEvent('createdUser', {\n\t\t\t\tdetail: data\n\t\t\t}))\n\t\t})\n\t},\n\t\n\tcreateOrg: function(btn) {\n\t\tlet form = btn.closest(\"form\");\n\t\tif (!form) return;\n\t\t\n\t\tlet elements = form.querySelectorAll(\"[data-collection='organizations'][name]\");\n\t\t\n\t\tlet data = {};\n\t\t//. get form data\n\t\telements.forEach(el => {\n\t\t\tlet name = el.getAttribute('name')\n\t\t\tlet value = _cocreate_input__WEBPACK_IMPORTED_MODULE_2__.default.getValue(el) || el.getAttribute('value')\n\t\t\tif (!name || !value) return;\n\t\t\tif (el.getAttribute('data-type') == 'array') {\n\t\t\t\tvalue = [value];\n\t\t\t}\n\t\t\tdata[name] = value;\n\t\t})\n\t\tconst room = config.organization_Id;\n\t\t\n\t\t_cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_1__.socket.send('createOrg', {\n\t\t\tapiKey: config.apiKey,\n\t\t\tsecurityKey: config.securityKey,\n\t\t\torganization_id: config.organization_Id,\n\t\t\tdb: this.masterDB,\n\t\t\tcollection: 'organizations',\n\t\t\tdata: data\n\t\t}, room);\n\t},\n\t\n\tsetDocumentId: function(collection, id) {\n\t\tlet orgIdElements = document.querySelectorAll(`[data-collection='${collection}']`);\n\t\tif (orgIdElements && orgIdElements.length > 0) {\n\t\t\torgIdElements.forEach((el) => {\n\t\t\t\tif (!el.getAttribute('data-document_id')) {\n\t\t\t\t\tel.setAttribute('data-document_id', id);\n\t\t\t\t}\n\t\t\t\tif (el.getAttribute('name') == \"_id\") {\n\t\t\t\t\tel.value = id;\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t},\n\n\tcreateUser: function(btn, reqData) {\n\t\tlet form = btn.closest(\"form\");\n\t\tif (!form) return;\n\t\tlet org_id = \"\";\n\t\tlet elements = form.querySelectorAll(\"[data-collection='users'][name]\");\n\t\tlet orgIdElement = form.querySelector(\"input[data-collection='organizations'][name='_id']\");\n\t\t\n\t\tif (orgIdElement) {\n\t\t\torg_id = orgIdElement.value;\n\t\t}\n\t\tlet data = {};\n\t\t//. get form data\n\t\telements.forEach(el => {\n\t\t\tlet name = el.getAttribute('name')\n\t\t\tlet value = _cocreate_input__WEBPACK_IMPORTED_MODULE_2__.default.getValue(el) || el.getAttribute('value')\n\t\t\tif (!name || !value) return;\n\t\t\t\n\t\t\tif (el.getAttribute('data-type') == 'array') {\n\t\t\t\tvalue = [value];\n\t\t\t}\n\t\t\tdata[name] = value;\n\t\t})\n\t\tdata['current_org'] = org_id;\n\t\tdata['connected_orgs'] = [org_id];\n\t\tdata['organization_id'] = org_id || config.organization_Id;\n\t\t\n\t\tconst room = config.organization_Id;\n\n\t\t_cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_1__.socket.send('createUser', {\n\t\t\tapiKey: config.apiKey,\n\t\t\tsecurityKey: config.securityKey,\n\t\t\torganization_id: config.organization_Id,\n\t\t\tdb: this.masterDB,\n\t\t\tcollection: 'users',\n\t\t\tdata: data,\n\t\t\tcopyDB: org_id\n\t\t}, room);\n\t},\n\t\n}\n\nCoCreateOrganization.init();\n\n_cocreate_action__WEBPACK_IMPORTED_MODULE_3__.default.init({\n\taction: \"createOrg\",\n\tendEvent: \"createdOrg\",\n\tcallback: (btn, data) => {\n\t\tCoCreateOrganization.createOrg(btn)\n\t},\n})\n\n_cocreate_action__WEBPACK_IMPORTED_MODULE_3__.default.init({\n\taction: \"createUser\",\n\tendEvent: \"createdUser\",\n\tcallback: (btn, data) => {\n\t\tCoCreateOrganization.createUser(btn)\n\t},\n})\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CoCreateOrganization);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5hdHRyaWJ1dGVzLy4uLy4uL0NvQ3JlYXRlSlMvbm9kZV9tb2R1bGVzL0Bjb2NyZWF0ZS9vcmdhbml6YXRpb25zL3NyYy9pbmRleC5qcz81ZmEzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlDO0FBQ0c7QUFDVDtBQUNFOztBQUVyQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLCtEQUFhO0FBQ2Y7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUgsRUFBRSwrREFBYTtBQUNmO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDZEQUFjO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUEsRUFBRSw2REFBVztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0EscUVBQXFFLFdBQVc7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw2REFBYztBQUM3Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsRUFBRSw2REFBVztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7O0FBRUE7O0FBRUEsMERBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDOztBQUVELDBEQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQzs7QUFFRCxpRUFBZSxvQkFBb0IiLCJmaWxlIjoiLi4vLi4vQ29DcmVhdGVKUy9ub2RlX21vZHVsZXMvQGNvY3JlYXRlL29yZ2FuaXphdGlvbnMvc3JjL2luZGV4LmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG9ic2VydmVyIGZyb20gJ0Bjb2NyZWF0ZS9vYnNlcnZlcidcbmltcG9ydCB7c29ja2V0fSBmcm9tICdAY29jcmVhdGUvY29jcmVhdGVqcyc7XG5pbXBvcnQgaW5wdXQgZnJvbSAnQGNvY3JlYXRlL2lucHV0J1xuaW1wb3J0IGFjdGlvbiBmcm9tICdAY29jcmVhdGUvYWN0aW9uJ1xuXG5jb25zdCBDb0NyZWF0ZU9yZ2FuaXphdGlvbiA9IHtcblx0bWFzdGVyREI6ICc1YWUwY2ZhYzZmYjhjNGU2NTZmZGFmOTInLCAvLyAnNWFlMGNmYWM2ZmI4YzRlNjU2ZmRhZjkyJyAvKiogbWFzdGVyREIgKiovLFxuXHRpbml0OiBmdW5jdGlvbigpIHtcblx0XHRcblx0XHRpZiAoY29uZmlnLm9yZ2FuaXphdGlvbl9JZCkge1xuXHRcdFx0dGhpcy5tYXN0ZXJEQiA9IGNvbmZpZy5vcmdhbml6YXRpb25fSWQ7XG5cdFx0fVxuXHRcdGNvbnN0IHNlbGYgPSB0aGlzO1xuXHRcdHNvY2tldC5saXN0ZW4oJ2NyZWF0ZU9yZycsIGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdHNlbGYuc2V0RG9jdW1lbnRJZCgnb3JnYW5pemF0aW9ucycsIGRhdGEuZG9jdW1lbnRfaWQpO1xuXHRcdFx0ZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2NyZWF0ZWRPcmcnLCB7XG5cdFx0XHRcdGRldGFpbDogZGF0YVxuXHRcdFx0fSkpXG5cdFx0fSlcblx0XHRcblx0XHRzb2NrZXQubGlzdGVuKCdjcmVhdGVVc2VyJywgZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0c2VsZi5zZXREb2N1bWVudElkKCd1c2VycycsIGRhdGEuZG9jdW1lbnRfaWQpO1xuXHRcdFx0ZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2NyZWF0ZWRVc2VyJywge1xuXHRcdFx0XHRkZXRhaWw6IGRhdGFcblx0XHRcdH0pKVxuXHRcdH0pXG5cdH0sXG5cdFxuXHRjcmVhdGVPcmc6IGZ1bmN0aW9uKGJ0bikge1xuXHRcdGxldCBmb3JtID0gYnRuLmNsb3Nlc3QoXCJmb3JtXCIpO1xuXHRcdGlmICghZm9ybSkgcmV0dXJuO1xuXHRcdFxuXHRcdGxldCBlbGVtZW50cyA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWNvbGxlY3Rpb249J29yZ2FuaXphdGlvbnMnXVtuYW1lXVwiKTtcblx0XHRcblx0XHRsZXQgZGF0YSA9IHt9O1xuXHRcdC8vLiBnZXQgZm9ybSBkYXRhXG5cdFx0ZWxlbWVudHMuZm9yRWFjaChlbCA9PiB7XG5cdFx0XHRsZXQgbmFtZSA9IGVsLmdldEF0dHJpYnV0ZSgnbmFtZScpXG5cdFx0XHRsZXQgdmFsdWUgPSBpbnB1dC5nZXRWYWx1ZShlbCkgfHwgZWwuZ2V0QXR0cmlidXRlKCd2YWx1ZScpXG5cdFx0XHRpZiAoIW5hbWUgfHwgIXZhbHVlKSByZXR1cm47XG5cdFx0XHRpZiAoZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKSA9PSAnYXJyYXknKSB7XG5cdFx0XHRcdHZhbHVlID0gW3ZhbHVlXTtcblx0XHRcdH1cblx0XHRcdGRhdGFbbmFtZV0gPSB2YWx1ZTtcblx0XHR9KVxuXHRcdGNvbnN0IHJvb20gPSBjb25maWcub3JnYW5pemF0aW9uX0lkO1xuXHRcdFxuXHRcdHNvY2tldC5zZW5kKCdjcmVhdGVPcmcnLCB7XG5cdFx0XHRhcGlLZXk6IGNvbmZpZy5hcGlLZXksXG5cdFx0XHRzZWN1cml0eUtleTogY29uZmlnLnNlY3VyaXR5S2V5LFxuXHRcdFx0b3JnYW5pemF0aW9uX2lkOiBjb25maWcub3JnYW5pemF0aW9uX0lkLFxuXHRcdFx0ZGI6IHRoaXMubWFzdGVyREIsXG5cdFx0XHRjb2xsZWN0aW9uOiAnb3JnYW5pemF0aW9ucycsXG5cdFx0XHRkYXRhOiBkYXRhXG5cdFx0fSwgcm9vbSk7XG5cdH0sXG5cdFxuXHRzZXREb2N1bWVudElkOiBmdW5jdGlvbihjb2xsZWN0aW9uLCBpZCkge1xuXHRcdGxldCBvcmdJZEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgW2RhdGEtY29sbGVjdGlvbj0nJHtjb2xsZWN0aW9ufSddYCk7XG5cdFx0aWYgKG9yZ0lkRWxlbWVudHMgJiYgb3JnSWRFbGVtZW50cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRvcmdJZEVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiB7XG5cdFx0XHRcdGlmICghZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWRvY3VtZW50X2lkJykpIHtcblx0XHRcdFx0XHRlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZG9jdW1lbnRfaWQnLCBpZCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGVsLmdldEF0dHJpYnV0ZSgnbmFtZScpID09IFwiX2lkXCIpIHtcblx0XHRcdFx0XHRlbC52YWx1ZSA9IGlkO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdH1cblx0fSxcblxuXHRjcmVhdGVVc2VyOiBmdW5jdGlvbihidG4sIHJlcURhdGEpIHtcblx0XHRsZXQgZm9ybSA9IGJ0bi5jbG9zZXN0KFwiZm9ybVwiKTtcblx0XHRpZiAoIWZvcm0pIHJldHVybjtcblx0XHRsZXQgb3JnX2lkID0gXCJcIjtcblx0XHRsZXQgZWxlbWVudHMgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1jb2xsZWN0aW9uPSd1c2VycyddW25hbWVdXCIpO1xuXHRcdGxldCBvcmdJZEVsZW1lbnQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFtkYXRhLWNvbGxlY3Rpb249J29yZ2FuaXphdGlvbnMnXVtuYW1lPSdfaWQnXVwiKTtcblx0XHRcblx0XHRpZiAob3JnSWRFbGVtZW50KSB7XG5cdFx0XHRvcmdfaWQgPSBvcmdJZEVsZW1lbnQudmFsdWU7XG5cdFx0fVxuXHRcdGxldCBkYXRhID0ge307XG5cdFx0Ly8uIGdldCBmb3JtIGRhdGFcblx0XHRlbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcblx0XHRcdGxldCBuYW1lID0gZWwuZ2V0QXR0cmlidXRlKCduYW1lJylcblx0XHRcdGxldCB2YWx1ZSA9IGlucHV0LmdldFZhbHVlKGVsKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJylcblx0XHRcdGlmICghbmFtZSB8fCAhdmFsdWUpIHJldHVybjtcblx0XHRcdFxuXHRcdFx0aWYgKGVsLmdldEF0dHJpYnV0ZSgnZGF0YS10eXBlJykgPT0gJ2FycmF5Jykge1xuXHRcdFx0XHR2YWx1ZSA9IFt2YWx1ZV07XG5cdFx0XHR9XG5cdFx0XHRkYXRhW25hbWVdID0gdmFsdWU7XG5cdFx0fSlcblx0XHRkYXRhWydjdXJyZW50X29yZyddID0gb3JnX2lkO1xuXHRcdGRhdGFbJ2Nvbm5lY3RlZF9vcmdzJ10gPSBbb3JnX2lkXTtcblx0XHRkYXRhWydvcmdhbml6YXRpb25faWQnXSA9IG9yZ19pZCB8fCBjb25maWcub3JnYW5pemF0aW9uX0lkO1xuXHRcdFxuXHRcdGNvbnN0IHJvb20gPSBjb25maWcub3JnYW5pemF0aW9uX0lkO1xuXG5cdFx0c29ja2V0LnNlbmQoJ2NyZWF0ZVVzZXInLCB7XG5cdFx0XHRhcGlLZXk6IGNvbmZpZy5hcGlLZXksXG5cdFx0XHRzZWN1cml0eUtleTogY29uZmlnLnNlY3VyaXR5S2V5LFxuXHRcdFx0b3JnYW5pemF0aW9uX2lkOiBjb25maWcub3JnYW5pemF0aW9uX0lkLFxuXHRcdFx0ZGI6IHRoaXMubWFzdGVyREIsXG5cdFx0XHRjb2xsZWN0aW9uOiAndXNlcnMnLFxuXHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdGNvcHlEQjogb3JnX2lkXG5cdFx0fSwgcm9vbSk7XG5cdH0sXG5cdFxufVxuXG5Db0NyZWF0ZU9yZ2FuaXphdGlvbi5pbml0KCk7XG5cbmFjdGlvbi5pbml0KHtcblx0YWN0aW9uOiBcImNyZWF0ZU9yZ1wiLFxuXHRlbmRFdmVudDogXCJjcmVhdGVkT3JnXCIsXG5cdGNhbGxiYWNrOiAoYnRuLCBkYXRhKSA9PiB7XG5cdFx0Q29DcmVhdGVPcmdhbml6YXRpb24uY3JlYXRlT3JnKGJ0bilcblx0fSxcbn0pXG5cbmFjdGlvbi5pbml0KHtcblx0YWN0aW9uOiBcImNyZWF0ZVVzZXJcIixcblx0ZW5kRXZlbnQ6IFwiY3JlYXRlZFVzZXJcIixcblx0Y2FsbGJhY2s6IChidG4sIGRhdGEpID0+IHtcblx0XHRDb0NyZWF0ZU9yZ2FuaXphdGlvbi5jcmVhdGVVc2VyKGJ0bilcblx0fSxcbn0pXG5cbmV4cG9ydCBkZWZhdWx0IENvQ3JlYXRlT3JnYW5pemF0aW9uOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../CoCreateJS/node_modules/@cocreate/organizations/src/index.js\n")}}]);
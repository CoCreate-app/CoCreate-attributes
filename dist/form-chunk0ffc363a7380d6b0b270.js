/*! For license information please see form-chunk0ffc363a7380d6b0b270.js.LICENSE.txt */
(this.webpackChunkCoCreate_attributes=this.webpackChunkCoCreate_attributes||[]).push([["form-chunk"],{"../../CoCreateJS/node_modules/@cocreate/form/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _cocreate_observer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @cocreate/observer */ \"../../CoCreateJS/node_modules/@cocreate/observer/src/index.js\");\n/* harmony import */ var _cocreate_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @cocreate/utils */ \"../../CoCreateJS/node_modules/@cocreate/utils/src/index.js\");\n/* harmony import */ var _cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @cocreate/cocreatejs */ \"../../CoCreateJS/node_modules/@cocreate/cocreatejs/src/index.js\");\n/* harmony import */ var _cocreate_action__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @cocreate/action */ \"../CoCreate-action/src/index.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils */ \"../../CoCreateJS/node_modules/@cocreate/form/src/utils.js\");\n\n\n\n\n \n\n\n\n// import crdt from '@cocreate/crdt'\n// import text from '@cocreate/text'\n\n\n\nconst CoCreateForm = {\n\t\n\trequestAttr: \"data-document_request\",\n\tselectors: [],\n\tmodules: [],\n\n\tinit: function({name, selector, callback}) {\n\t\t\n\t\tthis.modules.push({\n\t\t\tname,\n\t\t\tselector,\n\t\t\tcallback\n\t\t});\n\t\t\n\t\tif (selector) {\n\t\t\tthis.selectors.push(selector);\n\t\t}\n\t},\n\t\n\tget: function() {\n\t\treturn {\n\t\t\tselectors: this.selectors\n\t\t}\n\t},\n\t\n\tcheckID: function(element, attr = \"data-document_id\") {\n\t\tlet document_id = element.getAttribute(attr) || \"\";\n\t\tif (document_id === \"\" || document_id === \"pending\" || !_cocreate_utils__WEBPACK_IMPORTED_MODULE_1__.default.checkValue(document_id)) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\t\n\trequest: function({form, element, nameAttr, value}) {\n\t\t\n\t\tif (!form && element) {\n\t\t\tform = element.closest('form');\n\t\t}\n\t\t\n\t\tif (form) {\n\t\t\tthis.__requestDocumentIdOfForm(form)\n\t\t} else if (element) {\n\t\t\tnameAttr = nameAttr || \"name\"\n\t\t\tthis.__requestDocumentId(element, nameAttr, value);\n\t\t}\n\t\t\n\t},\n\t\n\tinitElement: function(container) {\n\t\tconst __container = container || document\n\t\t\n\t\tif (!__container.querySelectorAll) {\n\t\t\treturn;\n\t\t}\n\t\tlet  forms = __container.querySelectorAll('form');\n\n\t\tif (forms.length === 0 && __container != document && __container.tagName === \"FORM\") {\n\t\t\tforms = [__container];\n\t\t}\n\t\t\n\t\tforms.forEach((form) => {\n\t\t\t_utils__WEBPACK_IMPORTED_MODULE_4__.default.setAttribute(form)\n\t\t\t_utils__WEBPACK_IMPORTED_MODULE_4__.default.disableAutoFill(form);\n\t\t})\n\t},\n\t\n\t__init: function() {\n\t\tconst forms = document.querySelectorAll('form');\n\t\tthis.__initEvent();\n\n\t\tforms.forEach((form) => {\n\t\t\t_utils__WEBPACK_IMPORTED_MODULE_4__.default.setAttribute(form)\n\t\t})\n\t\t\n\t},\n\t\n\t__initEvent: function() {\n\t\tconst self = this;\n\t\t_cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_2__.socket.listen('createDocument', function(data) {\n\t\t\tconst {metadata} = data;\n\t\t\tself.__receivedDocumentId(data);\n\t\t\tif (metadata == \"createDocument-action\") {\n\t\t\t\t//. dispatch EndAction\n\t\t\t}\n\t\t})\n\t\t\n\t\t_cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_2__.socket.listen('deleteDocument', function(data) {\n\t\t\tconst {metadata} = data\n\t\t\tif (metadata === \"deleteDocument-action\") {\n\t\t\t\t//.dispatch End Action\n\t\t\t}\n\t\t})\t\n\t\tdocument.addEventListener('clicked-submitBtn', function(event) {\n\t\t\tconst {element} = event.detail;\n\n\t\t\tself.modules.forEach(({selector, callback}) => {\n\t\t\t\tif (callback && element.matches(selector)) {\n\t\t\t\t\tcallback.call(null, element);\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t},\n\n\t__deleteDocumentAction: function(btn) {\n\t\tconst collection = btn.getAttribute('data-collection');\n\t\tconst document_id = btn.getAttribute('data-document_id')\n\t\tif (_cocreate_utils__WEBPACK_IMPORTED_MODULE_1__.default.checkValue(collection) && _cocreate_utils__WEBPACK_IMPORTED_MODULE_1__.default.checkValue(document_id)) {\n\t\t\t_cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_2__.crud.deleteDocument({\n\t\t\t\t'collection': collection, \n\t\t\t\t'document_id': document_id,\n\t\t\t\t'metadata': 'deleteDocument-action' \n\t\t\t});\n\t\t\t\n\t\t\tdocument.dispatchEvent(new CustomEvent('deletedDocument', {\n\t\t\t\tdetail: {}\n\t\t\t}))\n\t\t}\n\t},\n\t\n\t__deleteDocumentsAction: function(btn) {\n\t\tconst collection = btn.getAttribute('data-collection');\n\t\tconst selector = btn.getAttribute('data-document_target');\n\t\tif (!selector) return;\n\t\t\n\t\tconst selectedEls = document.querySelectorAll(selector)\n\t\t\n\t\tif (_utils__WEBPACK_IMPORTED_MODULE_4__.default.checkValue(collection)) {\n\t\t\tselectedEls.forEach((el) => {\n\t\t\t\tconst document_id = el.getAttribute('data-document_id');\n\t\t\t\tif (_cocreate_utils__WEBPACK_IMPORTED_MODULE_1__.default.checkValue(document_id)) {\n\t\t\t\t\t_cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_2__.crud.deleteDocument({\n\t\t\t\t\t\t'collection': collection,\n\t\t\t\t\t\t'document_id': document_id,\n\t\t\t\t\t\t'metadata': ''\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\t\t\tdocument.dispatchEvent(new CustomEvent('deletedDocuments', {\n\t\t\t\tdetail: {}\n\t\t\t}))\n\t\t}\n\t},\n\t\n\t__createDocumentAction: function(btn) {\n\t\tconst form = btn.closest(\"form\")\n\t\tconst self = this;\n\t\tlet collections = _utils__WEBPACK_IMPORTED_MODULE_4__.default.getCOllections(form)\n\t\t\n\t\tcollections.forEach((collection) => {\n\t\t\tlet data = _utils__WEBPACK_IMPORTED_MODULE_4__.default.getFormData(form, \"\", collection);\n\t\t\t\n\t\t\tif (Object.keys(data).length == 0 && data.constructor === Object) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (_cocreate_utils__WEBPACK_IMPORTED_MODULE_1__.default.checkValue(collection)) {\n\t\t\t\t_cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_2__.crud.createDocument({\n\t\t\t\t\t'collection': collection,\n\t\t\t\t\t'data': data,\n\t\t\t\t\t'metadata': 'createDocument-action' ,\n\t\t\t\t\t'element':'empty'\n\t\t\t\t});\n\t\t\t\tdocument.dispatchEvent(new CustomEvent('createdDocument', {\n\t\t\t\t\tdetail: {}\n\t\t\t\t}))\n\t\t\t}\n\t\t})\n\t},\n\t\n\t__saveDocumentAction: function(btn) {\n\t\tconst form = btn.closest(\"form\")\n\n\t\tif (!_utils__WEBPACK_IMPORTED_MODULE_4__.default.checkFormValidate(form)) {\n\t\t\talert('Values are not unique');\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tconst selectors = this.selectors || [];\n\t\tconst elements = form.querySelectorAll(selectors.join(','));\n\t\t\n\t\tlet request_document_id = false;\n\t\tfor (var i = 0; i < elements.length; i++) {\n\t\t\tlet el = elements[i];\n\t\t\tconst data_document_id = el.getAttribute('data-document_id');\n\n\t\t\tif (el.getAttribute('data-save_value') == 'false') {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (!data_document_id) {\n\t\t\t\tif (el.getAttribute('name')) {\n\t\t\t\t\trequest_document_id = true;\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\tif (input.isUsageY(el)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (_utils__WEBPACK_IMPORTED_MODULE_4__.default.isTemplateInput(el)) return;\n\n\t\t\tvar new_event = new CustomEvent(\"clicked-submitBtn\", {\n\t\t\t\tbubbles: true,\n\t\t\t\tdetail: { \n\t\t\t\t\ttype: \"submitBtn\", \n\t\t\t\t\telement: el \n\t\t\t\t}});\n\t\t\tel.dispatchEvent(new_event);  \n\t\t}\n\t\tif (request_document_id) {\n\t\t\tthis.requestDocumentIdOfForm(form)\n\t\t}\n\t\t\n\t\tdocument.dispatchEvent(new CustomEvent('savedDocument', {\n\t\t\tdetail: {}\n\t\t}))\n\t},\n\t\n\t__requestDocumentId: function(element, nameAttr = \"name\", value = null) {\n\t\tconst collection = element.getAttribute('data-collection')\n\t\tconst name = element.getAttribute(nameAttr)\n\t\t\n\t\tif (!collection || !name) return \n\n\t\tconst request_id = _cocreate_utils__WEBPACK_IMPORTED_MODULE_1__.default.generateUUID();\n\n\t\telement.setAttribute(this.requestAttr, request_id);\n\t\t\n\t\t_cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_2__.crud.createDocument({\n\t\t\t\"collection\": collection,\n\t\t\t\"element\": request_id,\n\t\t\t\"metadata\": \"\",\n\t\t})\n\t},\n\t\t\n\t__requestDocumentIdOfForm: function (form) {\n\t\t\n\t\tlet self = this;\n\t\tlet elemens = form.querySelectorAll('[name], [data-pass_to]')\n\t\t\n\t\tlet collections = [];\n\n\t\tfor (var  i = 0; i < elemens.length; i++) {\n\t\t\tlet el = elemens[i];\n\t\t\tif (el.parentNode.classList.contains('template')) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst collection = el.getAttribute(\"data-collection\") || el.getAttribute(\"data-pass_collection\") || \"\";\t\n\t\t\t\n\t\t\tif (\n\t\t\t\tcollection !== \"\" && \n\t\t\t\t!collections.includes(collection) && \n\t\t\t\t(!self.checkID(el, 'data-document_id') && !self.checkID(el, 'data-pass_document_id'))\n\t\t\t) {\n\t\t\t\tconst request_id = _cocreate_utils__WEBPACK_IMPORTED_MODULE_1__.default.generateUUID();\n\t\t\t\tcollections.push(collection);\n\n\t\t\t\tel.setAttribute(this.requestAttr, request_id);\n\t\t\t\t//. get Data\n\t\t\t\t\n\t\t\t\tlet data = _utils__WEBPACK_IMPORTED_MODULE_4__.default.getFormData(form, \"\", collection);\n\t\t\t\t\n\t\t\t\t/* FixME Create Document request */\t\n\t\t\t\t_cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_2__.crud.createDocument({\n\t\t\t\t\t\"collection\": collection,\n\t\t\t\t\t\"element\": request_id,\n\t\t\t\t\t'data': data,\n\t\t\t\t\t\"metadata\": \"\",\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t},\n\n\t__setNewIdProcess: function(element, document_id, pass) {\n\t\tif (!element) return;\n\t\t\n  \t\telement.removeAttribute(this.requestAttr);\n\t\tconst event_data = {\n\t\t\tdocument_id: document_id,\n\t\t}\n\n\t\tif (!pass && !this.checkID(element) && element.hasAttribute('name')) {\n\t\t\telement.setAttribute('data-document_id', document_id);\n\t  \t}\n\n\t  \tif (pass && !this.checkID(element, 'data-pass_document_id') && element.hasAttribute('data-pass_to')) {\n\t\t\telement.setAttribute('data-pass_document_id', document_id);\n\t\t\t// CoCreateLogic.storePassData(element)\n\t\t\t\n\t\t\tif (element.parentNode.classList.contains('submitBtn')) {\n\t\t\t\telement.click();\n\t\t\t}\n\t  \t}\n  \t\n\t\tvar event = new CustomEvent('set-document_id', {detail: event_data})\n\t\telement.dispatchEvent(event);\n\n\t},\n\t\n\t__receivedDocumentId: function(data) {\n\t\tif (!data['document_id']) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet element = document.querySelector(`[${this.requestAttr}=\"${data['element']}\"]`);\n\t\tif (!element) return;\n\t\tlet self = this;\n\t\tconst form = (element.tagName === \"FORM\") ? element : _utils__WEBPACK_IMPORTED_MODULE_4__.default.getParents(element, 'form');\n\t\tconst collection = data['collection'];\n\t\tconst id = data['document_id']\n\t\tif (form && id) {\n\t\t\tform.setAttribute('data-form_id', data['element']);\n\t\t\tconst elements = form.querySelectorAll(`[data-collection=${collection}], [data-pass_collection=${collection}]`)\n\t\t\telements.forEach(function(el) {\n\t\t\t\tel.removeAttribute(self.requestAttr);\n\t\t\t\tif (el.hasAttribute('name')) self.__setNewIdProcess(el, id);\n\t\t\t\tif (el.hasAttribute('data-pass_to')) self.__setNewIdProcess(el, id, true);\n\t\t\t})\n\t  \t\n\t\t} else if (element) {\n\t\t\tthis.__setNewIdProcess(element, id);\n\t\t}\n\t},\n}\n\nCoCreateForm.__init();\n_cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_2__.core.registerInit(CoCreateForm.initElement, CoCreateForm);\n\n_cocreate_observer__WEBPACK_IMPORTED_MODULE_0__.default.init({ \n\tname: 'CoCreateForm', \n\tobserve: ['subtree', 'childList'],\n\tinclude: 'form', \n\tcallback: function(mutation) {\n\t\tCoCreateForm.initElement(mutation.target)\n\t}\n})\n\n_cocreate_action__WEBPACK_IMPORTED_MODULE_3__.default.init({\n\taction: \"createDocument\",\n\tendEvent: \"createdDocument\",\n\tcallback: (btn, data) => {\n\t\tCoCreateForm.__createDocumentAction(btn)\n\t},\n})\n\n_cocreate_action__WEBPACK_IMPORTED_MODULE_3__.default.init({\n\taction: \"deleteDocument\",\n\tendEvent: \"deletedDocument\",\n\tcallback: (btn, data) => {\n\t\tCoCreateForm.__deleteDocumentAction(btn)\n\t},\n})\n\n_cocreate_action__WEBPACK_IMPORTED_MODULE_3__.default.init({\n\taction: \"deleteDocuments\",\n\tendEvent: \"deletedDocuments\",\n\tcallback: (btn, data) => {\n\t\tCoCreateDocument.__deleteDocumentsAction(btn)\n\t},\n})\n\n_cocreate_action__WEBPACK_IMPORTED_MODULE_3__.default.init({\n\taction: \"saveDocument\",\n\tendEvent: \"savedDocument\",\n\tcallback: (btn, data) => {\n\t\tCoCreateForm.__saveDocumentAction(btn)\n\t},\n})\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CoCreateForm);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5hdHRyaWJ1dGVzLy4uLy4uL0NvQ3JlYXRlSlMvbm9kZV9tb2R1bGVzL0Bjb2NyZWF0ZS9mb3JtL3NyYy9pbmRleC5qcz85ZTNiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF5QztBQUNIO0FBQ2lCO0FBQ2xCO0FBQ1Y7Ozs7QUFJM0I7QUFDQTs7OztBQUlBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUIseUJBQXlCOztBQUUxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLDBEQUEwRCwrREFBa0I7QUFDNUU7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRixvQkFBb0IsK0JBQStCOztBQUVuRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUEsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUcsd0RBQWtCO0FBQ3JCLEdBQUcsMkRBQXFCO0FBQ3hCLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUcsd0RBQWtCO0FBQ3JCLEdBQUc7O0FBRUgsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRSwrREFBYTtBQUNmLFVBQVUsU0FBUztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUgsRUFBRSwrREFBYTtBQUNmLFVBQVUsU0FBUztBQUNuQjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxVQUFVLFFBQVE7O0FBRWxCLDBCQUEwQixtQkFBbUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLE1BQU0sK0RBQWtCLGdCQUFnQiwrREFBa0I7QUFDMUQsR0FBRyxxRUFBbUI7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxNQUFNLHNEQUFnQjtBQUN0QjtBQUNBO0FBQ0EsUUFBUSwrREFBa0I7QUFDMUIsS0FBSyxxRUFBbUI7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMERBQW9COztBQUV4QztBQUNBLGNBQWMsdURBQWlCOztBQUUvQjtBQUNBO0FBQ0E7QUFDQSxPQUFPLCtEQUFrQjtBQUN6QixJQUFJLHFFQUFtQjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTs7QUFFQSxPQUFPLDZEQUF1QjtBQUM5QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQixxQkFBcUI7QUFDdEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPLDJEQUFxQjs7QUFFNUI7QUFDQTtBQUNBLGE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLCtCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxxQkFBcUIsaUVBQW9COztBQUV6Qzs7QUFFQSxFQUFFLHFFQUFtQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjs7QUFFQTtBQUNBOztBQUVBOztBQUVBLGtCQUFrQixvQkFBb0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwRzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGlFQUFvQjtBQUMzQzs7QUFFQTtBQUNBOztBQUVBLGVBQWUsdURBQWlCOztBQUVoQztBQUNBLElBQUkscUVBQW1CO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrREFBa0QsbUJBQW1CO0FBQ3JFOztBQUVBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsMkNBQTJDLGlCQUFpQixJQUFJLGdCQUFnQjtBQUNoRjtBQUNBO0FBQ0Esd0RBQXdELHNEQUFnQjtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCxXQUFXLDJCQUEyQixXQUFXO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSixHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBLG1FQUFpQjs7QUFFakIsNERBQWEsRTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsMERBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDOztBQUVELDBEQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQzs7QUFFRCwwREFBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLENBQUM7O0FBRUQsMERBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDOztBQUVELGlFQUFlLFlBQVkiLCJmaWxlIjoiLi4vLi4vQ29DcmVhdGVKUy9ub2RlX21vZHVsZXMvQGNvY3JlYXRlL2Zvcm0vc3JjL2luZGV4LmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG9ic2VydmVyIGZyb20gJ0Bjb2NyZWF0ZS9vYnNlcnZlcidcbmltcG9ydCBjY3V0aWxzIGZyb20gJ0Bjb2NyZWF0ZS91dGlscyc7XG5pbXBvcnQge3NvY2tldCwgY3J1ZCwgY29yZX0gZnJvbSAnQGNvY3JlYXRlL2NvY3JlYXRlanMnXG5pbXBvcnQgYWN0aW9uIGZyb20gJ0Bjb2NyZWF0ZS9hY3Rpb24nXG5pbXBvcnQgdXRpbHMgZnJvbSBcIi4vdXRpbHNcIiBcblxuXG5cbi8vIGltcG9ydCBjcmR0IGZyb20gJ0Bjb2NyZWF0ZS9jcmR0J1xuLy8gaW1wb3J0IHRleHQgZnJvbSAnQGNvY3JlYXRlL3RleHQnXG5cblxuXG5jb25zdCBDb0NyZWF0ZUZvcm0gPSB7XG5cdFxuXHRyZXF1ZXN0QXR0cjogXCJkYXRhLWRvY3VtZW50X3JlcXVlc3RcIixcblx0c2VsZWN0b3JzOiBbXSxcblx0bW9kdWxlczogW10sXG5cblx0aW5pdDogZnVuY3Rpb24oe25hbWUsIHNlbGVjdG9yLCBjYWxsYmFja30pIHtcblx0XHRcblx0XHR0aGlzLm1vZHVsZXMucHVzaCh7XG5cdFx0XHRuYW1lLFxuXHRcdFx0c2VsZWN0b3IsXG5cdFx0XHRjYWxsYmFja1xuXHRcdH0pO1xuXHRcdFxuXHRcdGlmIChzZWxlY3Rvcikge1xuXHRcdFx0dGhpcy5zZWxlY3RvcnMucHVzaChzZWxlY3Rvcik7XG5cdFx0fVxuXHR9LFxuXHRcblx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0c2VsZWN0b3JzOiB0aGlzLnNlbGVjdG9yc1xuXHRcdH1cblx0fSxcblx0XG5cdGNoZWNrSUQ6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHIgPSBcImRhdGEtZG9jdW1lbnRfaWRcIikge1xuXHRcdGxldCBkb2N1bWVudF9pZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHIpIHx8IFwiXCI7XG5cdFx0aWYgKGRvY3VtZW50X2lkID09PSBcIlwiIHx8IGRvY3VtZW50X2lkID09PSBcInBlbmRpbmdcIiB8fCAhY2N1dGlscy5jaGVja1ZhbHVlKGRvY3VtZW50X2lkKSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblx0XG5cdHJlcXVlc3Q6IGZ1bmN0aW9uKHtmb3JtLCBlbGVtZW50LCBuYW1lQXR0ciwgdmFsdWV9KSB7XG5cdFx0XG5cdFx0aWYgKCFmb3JtICYmIGVsZW1lbnQpIHtcblx0XHRcdGZvcm0gPSBlbGVtZW50LmNsb3Nlc3QoJ2Zvcm0nKTtcblx0XHR9XG5cdFx0XG5cdFx0aWYgKGZvcm0pIHtcblx0XHRcdHRoaXMuX19yZXF1ZXN0RG9jdW1lbnRJZE9mRm9ybShmb3JtKVxuXHRcdH0gZWxzZSBpZiAoZWxlbWVudCkge1xuXHRcdFx0bmFtZUF0dHIgPSBuYW1lQXR0ciB8fCBcIm5hbWVcIlxuXHRcdFx0dGhpcy5fX3JlcXVlc3REb2N1bWVudElkKGVsZW1lbnQsIG5hbWVBdHRyLCB2YWx1ZSk7XG5cdFx0fVxuXHRcdFxuXHR9LFxuXHRcblx0aW5pdEVsZW1lbnQ6IGZ1bmN0aW9uKGNvbnRhaW5lcikge1xuXHRcdGNvbnN0IF9fY29udGFpbmVyID0gY29udGFpbmVyIHx8IGRvY3VtZW50XG5cdFx0XG5cdFx0aWYgKCFfX2NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGxldCAgZm9ybXMgPSBfX2NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdmb3JtJyk7XG5cblx0XHRpZiAoZm9ybXMubGVuZ3RoID09PSAwICYmIF9fY29udGFpbmVyICE9IGRvY3VtZW50ICYmIF9fY29udGFpbmVyLnRhZ05hbWUgPT09IFwiRk9STVwiKSB7XG5cdFx0XHRmb3JtcyA9IFtfX2NvbnRhaW5lcl07XG5cdFx0fVxuXHRcdFxuXHRcdGZvcm1zLmZvckVhY2goKGZvcm0pID0+IHtcblx0XHRcdHV0aWxzLnNldEF0dHJpYnV0ZShmb3JtKVxuXHRcdFx0dXRpbHMuZGlzYWJsZUF1dG9GaWxsKGZvcm0pO1xuXHRcdH0pXG5cdH0sXG5cdFxuXHRfX2luaXQ6IGZ1bmN0aW9uKCkge1xuXHRcdGNvbnN0IGZvcm1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZm9ybScpO1xuXHRcdHRoaXMuX19pbml0RXZlbnQoKTtcblxuXHRcdGZvcm1zLmZvckVhY2goKGZvcm0pID0+IHtcblx0XHRcdHV0aWxzLnNldEF0dHJpYnV0ZShmb3JtKVxuXHRcdH0pXG5cdFx0XG5cdH0sXG5cdFxuXHRfX2luaXRFdmVudDogZnVuY3Rpb24oKSB7XG5cdFx0Y29uc3Qgc2VsZiA9IHRoaXM7XG5cdFx0c29ja2V0Lmxpc3RlbignY3JlYXRlRG9jdW1lbnQnLCBmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRjb25zdCB7bWV0YWRhdGF9ID0gZGF0YTtcblx0XHRcdHNlbGYuX19yZWNlaXZlZERvY3VtZW50SWQoZGF0YSk7XG5cdFx0XHRpZiAobWV0YWRhdGEgPT0gXCJjcmVhdGVEb2N1bWVudC1hY3Rpb25cIikge1xuXHRcdFx0XHQvLy4gZGlzcGF0Y2ggRW5kQWN0aW9uXG5cdFx0XHR9XG5cdFx0fSlcblx0XHRcblx0XHRzb2NrZXQubGlzdGVuKCdkZWxldGVEb2N1bWVudCcsIGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdGNvbnN0IHttZXRhZGF0YX0gPSBkYXRhXG5cdFx0XHRpZiAobWV0YWRhdGEgPT09IFwiZGVsZXRlRG9jdW1lbnQtYWN0aW9uXCIpIHtcblx0XHRcdFx0Ly8uZGlzcGF0Y2ggRW5kIEFjdGlvblxuXHRcdFx0fVxuXHRcdH0pXHRcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGlja2VkLXN1Ym1pdEJ0bicsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRjb25zdCB7ZWxlbWVudH0gPSBldmVudC5kZXRhaWw7XG5cblx0XHRcdHNlbGYubW9kdWxlcy5mb3JFYWNoKCh7c2VsZWN0b3IsIGNhbGxiYWNrfSkgPT4ge1xuXHRcdFx0XHRpZiAoY2FsbGJhY2sgJiYgZWxlbWVudC5tYXRjaGVzKHNlbGVjdG9yKSkge1xuXHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwobnVsbCwgZWxlbWVudCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0fSlcblx0fSxcblxuXHRfX2RlbGV0ZURvY3VtZW50QWN0aW9uOiBmdW5jdGlvbihidG4pIHtcblx0XHRjb25zdCBjb2xsZWN0aW9uID0gYnRuLmdldEF0dHJpYnV0ZSgnZGF0YS1jb2xsZWN0aW9uJyk7XG5cdFx0Y29uc3QgZG9jdW1lbnRfaWQgPSBidG4uZ2V0QXR0cmlidXRlKCdkYXRhLWRvY3VtZW50X2lkJylcblx0XHRpZiAoY2N1dGlscy5jaGVja1ZhbHVlKGNvbGxlY3Rpb24pICYmIGNjdXRpbHMuY2hlY2tWYWx1ZShkb2N1bWVudF9pZCkpIHtcblx0XHRcdGNydWQuZGVsZXRlRG9jdW1lbnQoe1xuXHRcdFx0XHQnY29sbGVjdGlvbic6IGNvbGxlY3Rpb24sIFxuXHRcdFx0XHQnZG9jdW1lbnRfaWQnOiBkb2N1bWVudF9pZCxcblx0XHRcdFx0J21ldGFkYXRhJzogJ2RlbGV0ZURvY3VtZW50LWFjdGlvbicgXG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0ZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2RlbGV0ZWREb2N1bWVudCcsIHtcblx0XHRcdFx0ZGV0YWlsOiB7fVxuXHRcdFx0fSkpXG5cdFx0fVxuXHR9LFxuXHRcblx0X19kZWxldGVEb2N1bWVudHNBY3Rpb246IGZ1bmN0aW9uKGJ0bikge1xuXHRcdGNvbnN0IGNvbGxlY3Rpb24gPSBidG4uZ2V0QXR0cmlidXRlKCdkYXRhLWNvbGxlY3Rpb24nKTtcblx0XHRjb25zdCBzZWxlY3RvciA9IGJ0bi5nZXRBdHRyaWJ1dGUoJ2RhdGEtZG9jdW1lbnRfdGFyZ2V0Jyk7XG5cdFx0aWYgKCFzZWxlY3RvcikgcmV0dXJuO1xuXHRcdFxuXHRcdGNvbnN0IHNlbGVjdGVkRWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcilcblx0XHRcblx0XHRpZiAodXRpbHMuY2hlY2tWYWx1ZShjb2xsZWN0aW9uKSkge1xuXHRcdFx0c2VsZWN0ZWRFbHMuZm9yRWFjaCgoZWwpID0+IHtcblx0XHRcdFx0Y29uc3QgZG9jdW1lbnRfaWQgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZG9jdW1lbnRfaWQnKTtcblx0XHRcdFx0aWYgKGNjdXRpbHMuY2hlY2tWYWx1ZShkb2N1bWVudF9pZCkpIHtcblx0XHRcdFx0XHRjcnVkLmRlbGV0ZURvY3VtZW50KHtcblx0XHRcdFx0XHRcdCdjb2xsZWN0aW9uJzogY29sbGVjdGlvbixcblx0XHRcdFx0XHRcdCdkb2N1bWVudF9pZCc6IGRvY3VtZW50X2lkLFxuXHRcdFx0XHRcdFx0J21ldGFkYXRhJzogJydcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0XG5cdFx0XHRkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnZGVsZXRlZERvY3VtZW50cycsIHtcblx0XHRcdFx0ZGV0YWlsOiB7fVxuXHRcdFx0fSkpXG5cdFx0fVxuXHR9LFxuXHRcblx0X19jcmVhdGVEb2N1bWVudEFjdGlvbjogZnVuY3Rpb24oYnRuKSB7XG5cdFx0Y29uc3QgZm9ybSA9IGJ0bi5jbG9zZXN0KFwiZm9ybVwiKVxuXHRcdGNvbnN0IHNlbGYgPSB0aGlzO1xuXHRcdGxldCBjb2xsZWN0aW9ucyA9IHV0aWxzLmdldENPbGxlY3Rpb25zKGZvcm0pXG5cdFx0XG5cdFx0Y29sbGVjdGlvbnMuZm9yRWFjaCgoY29sbGVjdGlvbikgPT4ge1xuXHRcdFx0bGV0IGRhdGEgPSB1dGlscy5nZXRGb3JtRGF0YShmb3JtLCBcIlwiLCBjb2xsZWN0aW9uKTtcblx0XHRcdFxuXHRcdFx0aWYgKE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aCA9PSAwICYmIGRhdGEuY29uc3RydWN0b3IgPT09IE9iamVjdCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRpZiAoY2N1dGlscy5jaGVja1ZhbHVlKGNvbGxlY3Rpb24pKSB7XG5cdFx0XHRcdGNydWQuY3JlYXRlRG9jdW1lbnQoe1xuXHRcdFx0XHRcdCdjb2xsZWN0aW9uJzogY29sbGVjdGlvbixcblx0XHRcdFx0XHQnZGF0YSc6IGRhdGEsXG5cdFx0XHRcdFx0J21ldGFkYXRhJzogJ2NyZWF0ZURvY3VtZW50LWFjdGlvbicgLFxuXHRcdFx0XHRcdCdlbGVtZW50JzonZW1wdHknXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnY3JlYXRlZERvY3VtZW50Jywge1xuXHRcdFx0XHRcdGRldGFpbDoge31cblx0XHRcdFx0fSkpXG5cdFx0XHR9XG5cdFx0fSlcblx0fSxcblx0XG5cdF9fc2F2ZURvY3VtZW50QWN0aW9uOiBmdW5jdGlvbihidG4pIHtcblx0XHRjb25zdCBmb3JtID0gYnRuLmNsb3Nlc3QoXCJmb3JtXCIpXG5cblx0XHRpZiAoIXV0aWxzLmNoZWNrRm9ybVZhbGlkYXRlKGZvcm0pKSB7XG5cdFx0XHRhbGVydCgnVmFsdWVzIGFyZSBub3QgdW5pcXVlJyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdFxuXHRcdGNvbnN0IHNlbGVjdG9ycyA9IHRoaXMuc2VsZWN0b3JzIHx8IFtdO1xuXHRcdGNvbnN0IGVsZW1lbnRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycy5qb2luKCcsJykpO1xuXHRcdFxuXHRcdGxldCByZXF1ZXN0X2RvY3VtZW50X2lkID0gZmFsc2U7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0bGV0IGVsID0gZWxlbWVudHNbaV07XG5cdFx0XHRjb25zdCBkYXRhX2RvY3VtZW50X2lkID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWRvY3VtZW50X2lkJyk7XG5cblx0XHRcdGlmIChlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2F2ZV92YWx1ZScpID09ICdmYWxzZScpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGlmICghZGF0YV9kb2N1bWVudF9pZCkge1xuXHRcdFx0XHRpZiAoZWwuZ2V0QXR0cmlidXRlKCduYW1lJykpIHtcblx0XHRcdFx0XHRyZXF1ZXN0X2RvY3VtZW50X2lkID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYgKGlucHV0LmlzVXNhZ2VZKGVsKSkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHV0aWxzLmlzVGVtcGxhdGVJbnB1dChlbCkpIHJldHVybjtcblxuXHRcdFx0dmFyIG5ld19ldmVudCA9IG5ldyBDdXN0b21FdmVudChcImNsaWNrZWQtc3VibWl0QnRuXCIsIHtcblx0XHRcdFx0YnViYmxlczogdHJ1ZSxcblx0XHRcdFx0ZGV0YWlsOiB7IFxuXHRcdFx0XHRcdHR5cGU6IFwic3VibWl0QnRuXCIsIFxuXHRcdFx0XHRcdGVsZW1lbnQ6IGVsIFxuXHRcdFx0XHR9fSk7XG5cdFx0XHRlbC5kaXNwYXRjaEV2ZW50KG5ld19ldmVudCk7ICBcblx0XHR9XG5cdFx0aWYgKHJlcXVlc3RfZG9jdW1lbnRfaWQpIHtcblx0XHRcdHRoaXMucmVxdWVzdERvY3VtZW50SWRPZkZvcm0oZm9ybSlcblx0XHR9XG5cdFx0XG5cdFx0ZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3NhdmVkRG9jdW1lbnQnLCB7XG5cdFx0XHRkZXRhaWw6IHt9XG5cdFx0fSkpXG5cdH0sXG5cdFxuXHRfX3JlcXVlc3REb2N1bWVudElkOiBmdW5jdGlvbihlbGVtZW50LCBuYW1lQXR0ciA9IFwibmFtZVwiLCB2YWx1ZSA9IG51bGwpIHtcblx0XHRjb25zdCBjb2xsZWN0aW9uID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29sbGVjdGlvbicpXG5cdFx0Y29uc3QgbmFtZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKG5hbWVBdHRyKVxuXHRcdFxuXHRcdGlmICghY29sbGVjdGlvbiB8fCAhbmFtZSkgcmV0dXJuIFxuXG5cdFx0Y29uc3QgcmVxdWVzdF9pZCA9IGNjdXRpbHMuZ2VuZXJhdGVVVUlEKCk7XG5cblx0XHRlbGVtZW50LnNldEF0dHJpYnV0ZSh0aGlzLnJlcXVlc3RBdHRyLCByZXF1ZXN0X2lkKTtcblx0XHRcblx0XHRjcnVkLmNyZWF0ZURvY3VtZW50KHtcblx0XHRcdFwiY29sbGVjdGlvblwiOiBjb2xsZWN0aW9uLFxuXHRcdFx0XCJlbGVtZW50XCI6IHJlcXVlc3RfaWQsXG5cdFx0XHRcIm1ldGFkYXRhXCI6IFwiXCIsXG5cdFx0fSlcblx0fSxcblx0XHRcblx0X19yZXF1ZXN0RG9jdW1lbnRJZE9mRm9ybTogZnVuY3Rpb24gKGZvcm0pIHtcblx0XHRcblx0XHRsZXQgc2VsZiA9IHRoaXM7XG5cdFx0bGV0IGVsZW1lbnMgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tuYW1lXSwgW2RhdGEtcGFzc190b10nKVxuXHRcdFxuXHRcdGxldCBjb2xsZWN0aW9ucyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgIGkgPSAwOyBpIDwgZWxlbWVucy5sZW5ndGg7IGkrKykge1xuXHRcdFx0bGV0IGVsID0gZWxlbWVuc1tpXTtcblx0XHRcdGlmIChlbC5wYXJlbnROb2RlLmNsYXNzTGlzdC5jb250YWlucygndGVtcGxhdGUnKSkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IGNvbGxlY3Rpb24gPSBlbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbGxlY3Rpb25cIikgfHwgZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1wYXNzX2NvbGxlY3Rpb25cIikgfHwgXCJcIjtcdFxuXHRcdFx0XG5cdFx0XHRpZiAoXG5cdFx0XHRcdGNvbGxlY3Rpb24gIT09IFwiXCIgJiYgXG5cdFx0XHRcdCFjb2xsZWN0aW9ucy5pbmNsdWRlcyhjb2xsZWN0aW9uKSAmJiBcblx0XHRcdFx0KCFzZWxmLmNoZWNrSUQoZWwsICdkYXRhLWRvY3VtZW50X2lkJykgJiYgIXNlbGYuY2hlY2tJRChlbCwgJ2RhdGEtcGFzc19kb2N1bWVudF9pZCcpKVxuXHRcdFx0KSB7XG5cdFx0XHRcdGNvbnN0IHJlcXVlc3RfaWQgPSBjY3V0aWxzLmdlbmVyYXRlVVVJRCgpO1xuXHRcdFx0XHRjb2xsZWN0aW9ucy5wdXNoKGNvbGxlY3Rpb24pO1xuXG5cdFx0XHRcdGVsLnNldEF0dHJpYnV0ZSh0aGlzLnJlcXVlc3RBdHRyLCByZXF1ZXN0X2lkKTtcblx0XHRcdFx0Ly8uIGdldCBEYXRhXG5cdFx0XHRcdFxuXHRcdFx0XHRsZXQgZGF0YSA9IHV0aWxzLmdldEZvcm1EYXRhKGZvcm0sIFwiXCIsIGNvbGxlY3Rpb24pO1xuXHRcdFx0XHRcblx0XHRcdFx0LyogRml4TUUgQ3JlYXRlIERvY3VtZW50IHJlcXVlc3QgKi9cdFxuXHRcdFx0XHRjcnVkLmNyZWF0ZURvY3VtZW50KHtcblx0XHRcdFx0XHRcImNvbGxlY3Rpb25cIjogY29sbGVjdGlvbixcblx0XHRcdFx0XHRcImVsZW1lbnRcIjogcmVxdWVzdF9pZCxcblx0XHRcdFx0XHQnZGF0YSc6IGRhdGEsXG5cdFx0XHRcdFx0XCJtZXRhZGF0YVwiOiBcIlwiLFxuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHRfX3NldE5ld0lkUHJvY2VzczogZnVuY3Rpb24oZWxlbWVudCwgZG9jdW1lbnRfaWQsIHBhc3MpIHtcblx0XHRpZiAoIWVsZW1lbnQpIHJldHVybjtcblx0XHRcbiAgXHRcdGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKHRoaXMucmVxdWVzdEF0dHIpO1xuXHRcdGNvbnN0IGV2ZW50X2RhdGEgPSB7XG5cdFx0XHRkb2N1bWVudF9pZDogZG9jdW1lbnRfaWQsXG5cdFx0fVxuXG5cdFx0aWYgKCFwYXNzICYmICF0aGlzLmNoZWNrSUQoZWxlbWVudCkgJiYgZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ25hbWUnKSkge1xuXHRcdFx0ZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZG9jdW1lbnRfaWQnLCBkb2N1bWVudF9pZCk7XG5cdCAgXHR9XG5cblx0ICBcdGlmIChwYXNzICYmICF0aGlzLmNoZWNrSUQoZWxlbWVudCwgJ2RhdGEtcGFzc19kb2N1bWVudF9pZCcpICYmIGVsZW1lbnQuaGFzQXR0cmlidXRlKCdkYXRhLXBhc3NfdG8nKSkge1xuXHRcdFx0ZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcGFzc19kb2N1bWVudF9pZCcsIGRvY3VtZW50X2lkKTtcblx0XHRcdC8vIENvQ3JlYXRlTG9naWMuc3RvcmVQYXNzRGF0YShlbGVtZW50KVxuXHRcdFx0XG5cdFx0XHRpZiAoZWxlbWVudC5wYXJlbnROb2RlLmNsYXNzTGlzdC5jb250YWlucygnc3VibWl0QnRuJykpIHtcblx0XHRcdFx0ZWxlbWVudC5jbGljaygpO1xuXHRcdFx0fVxuXHQgIFx0fVxuICBcdFxuXHRcdHZhciBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnc2V0LWRvY3VtZW50X2lkJywge2RldGFpbDogZXZlbnRfZGF0YX0pXG5cdFx0ZWxlbWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcblxuXHR9LFxuXHRcblx0X19yZWNlaXZlZERvY3VtZW50SWQ6IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRpZiAoIWRhdGFbJ2RvY3VtZW50X2lkJ10pIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRsZXQgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFske3RoaXMucmVxdWVzdEF0dHJ9PVwiJHtkYXRhWydlbGVtZW50J119XCJdYCk7XG5cdFx0aWYgKCFlbGVtZW50KSByZXR1cm47XG5cdFx0bGV0IHNlbGYgPSB0aGlzO1xuXHRcdGNvbnN0IGZvcm0gPSAoZWxlbWVudC50YWdOYW1lID09PSBcIkZPUk1cIikgPyBlbGVtZW50IDogdXRpbHMuZ2V0UGFyZW50cyhlbGVtZW50LCAnZm9ybScpO1xuXHRcdGNvbnN0IGNvbGxlY3Rpb24gPSBkYXRhWydjb2xsZWN0aW9uJ107XG5cdFx0Y29uc3QgaWQgPSBkYXRhWydkb2N1bWVudF9pZCddXG5cdFx0aWYgKGZvcm0gJiYgaWQpIHtcblx0XHRcdGZvcm0uc2V0QXR0cmlidXRlKCdkYXRhLWZvcm1faWQnLCBkYXRhWydlbGVtZW50J10pO1xuXHRcdFx0Y29uc3QgZWxlbWVudHMgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoYFtkYXRhLWNvbGxlY3Rpb249JHtjb2xsZWN0aW9ufV0sIFtkYXRhLXBhc3NfY29sbGVjdGlvbj0ke2NvbGxlY3Rpb259XWApXG5cdFx0XHRlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XG5cdFx0XHRcdGVsLnJlbW92ZUF0dHJpYnV0ZShzZWxmLnJlcXVlc3RBdHRyKTtcblx0XHRcdFx0aWYgKGVsLmhhc0F0dHJpYnV0ZSgnbmFtZScpKSBzZWxmLl9fc2V0TmV3SWRQcm9jZXNzKGVsLCBpZCk7XG5cdFx0XHRcdGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2RhdGEtcGFzc190bycpKSBzZWxmLl9fc2V0TmV3SWRQcm9jZXNzKGVsLCBpZCwgdHJ1ZSk7XG5cdFx0XHR9KVxuXHQgIFx0XG5cdFx0fSBlbHNlIGlmIChlbGVtZW50KSB7XG5cdFx0XHR0aGlzLl9fc2V0TmV3SWRQcm9jZXNzKGVsZW1lbnQsIGlkKTtcblx0XHR9XG5cdH0sXG59XG5cbkNvQ3JlYXRlRm9ybS5fX2luaXQoKTtcbmNvcmUucmVnaXN0ZXJJbml0KENvQ3JlYXRlRm9ybS5pbml0RWxlbWVudCwgQ29DcmVhdGVGb3JtKTtcblxub2JzZXJ2ZXIuaW5pdCh7IFxuXHRuYW1lOiAnQ29DcmVhdGVGb3JtJywgXG5cdG9ic2VydmU6IFsnc3VidHJlZScsICdjaGlsZExpc3QnXSxcblx0aW5jbHVkZTogJ2Zvcm0nLCBcblx0Y2FsbGJhY2s6IGZ1bmN0aW9uKG11dGF0aW9uKSB7XG5cdFx0Q29DcmVhdGVGb3JtLmluaXRFbGVtZW50KG11dGF0aW9uLnRhcmdldClcblx0fVxufSlcblxuYWN0aW9uLmluaXQoe1xuXHRhY3Rpb246IFwiY3JlYXRlRG9jdW1lbnRcIixcblx0ZW5kRXZlbnQ6IFwiY3JlYXRlZERvY3VtZW50XCIsXG5cdGNhbGxiYWNrOiAoYnRuLCBkYXRhKSA9PiB7XG5cdFx0Q29DcmVhdGVGb3JtLl9fY3JlYXRlRG9jdW1lbnRBY3Rpb24oYnRuKVxuXHR9LFxufSlcblxuYWN0aW9uLmluaXQoe1xuXHRhY3Rpb246IFwiZGVsZXRlRG9jdW1lbnRcIixcblx0ZW5kRXZlbnQ6IFwiZGVsZXRlZERvY3VtZW50XCIsXG5cdGNhbGxiYWNrOiAoYnRuLCBkYXRhKSA9PiB7XG5cdFx0Q29DcmVhdGVGb3JtLl9fZGVsZXRlRG9jdW1lbnRBY3Rpb24oYnRuKVxuXHR9LFxufSlcblxuYWN0aW9uLmluaXQoe1xuXHRhY3Rpb246IFwiZGVsZXRlRG9jdW1lbnRzXCIsXG5cdGVuZEV2ZW50OiBcImRlbGV0ZWREb2N1bWVudHNcIixcblx0Y2FsbGJhY2s6IChidG4sIGRhdGEpID0+IHtcblx0XHRDb0NyZWF0ZURvY3VtZW50Ll9fZGVsZXRlRG9jdW1lbnRzQWN0aW9uKGJ0bilcblx0fSxcbn0pXG5cbmFjdGlvbi5pbml0KHtcblx0YWN0aW9uOiBcInNhdmVEb2N1bWVudFwiLFxuXHRlbmRFdmVudDogXCJzYXZlZERvY3VtZW50XCIsXG5cdGNhbGxiYWNrOiAoYnRuLCBkYXRhKSA9PiB7XG5cdFx0Q29DcmVhdGVGb3JtLl9fc2F2ZURvY3VtZW50QWN0aW9uKGJ0bilcblx0fSxcbn0pXG5cbmV4cG9ydCBkZWZhdWx0IENvQ3JlYXRlRm9ybTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../CoCreateJS/node_modules/@cocreate/form/src/index.js\n")},"../../CoCreateJS/node_modules/@cocreate/form/src/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n\nconst Utils = {\n\n\tdisableAutoFill: function(element) {\n\t\tif (element.tagName == \"TEXTAREA\") {\n\t\t\telement.value = \"\";\n\t\t\telement.setAttribute(\"autocomplete\",\"off\")\n\t\t}\n\t\tif (!element.hasAttribute(\"autocomplete\")) {\n\t\t\telement.setAttribute('autocomplete', \"off\");\n\t\t}\n\t},\n\n\tsetAttribute: function(form) {\n\t\t\n\t\tconst collection = form.getAttribute('data-collection') || \"\"; \n\t\tconst dataRealTime = form.getAttribute('data-realtime');\n\t\tconst document_id = form.getAttribute('data-document_id') || \"\";\n\t\tlet elements = form.querySelectorAll('[name], [data-pass_to]')\n\t\t\n\t\t\t\t\t\n\t\telements.forEach(function(el) {\n\t\t\tif (el.parentNode.classList.contains('template')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (el.getAttribute('data-realtime') == null && dataRealTime) {\n\t\t\t\t\n\t\t\t\t// if (!['INPUT', 'TEXTAREA'].indexOf(el.tagName)) {\n\t\t\t\tel.setAttribute('data-realtime', dataRealTime);\n\t\t\t\t// }\n\t\t\t}\n\t\t\tif (el.getAttribute('name') && !el.hasAttribute('data-collection') && collection) {\n\t\t\t\tel.setAttribute('data-collection', collection);\n\t\t\t}\n\t\t\t\n\t\t\tif (el.getAttribute('data-pass_to') && !el.hasAttribute('data-pass_collection') &&  collection) {\n\t\t\t\tel.setAttribute('data-pass_collection', collection);\n\t\t\t}\n\t\t\t\n\t\t\tif (el.getAttribute('name') && !el.getAttribute('data-document_id') && document_id) {\n\t\t\t\tel.setAttribute('data-document_id', document_id)\n\t\t\t}\n\t\t\tif (!el.hasAttribute(\"data-document_id\") && document_id != null) {\n\t\t\t\tel.setAttribute('data-document_id', document_id)\n\t\t\t}\n\n\t\t})\n\t},\n\n\tcheckFormValidate: function(form) {\n\t\t\n\t\tif (typeof CoCreate.unique !== 'undefined') {\n\t\t\treturn CoCreate.unique.checkValidate(form)\n\t\t}\n\t\treturn true;\n\t},\n\t\n\tisTemplateInput: function (input) {\n\t\tif (input.classList.contains('template')) return true;\n\t\t\n\t\tlet node = input.parentNode;\n\t\twhile (node) {\n\t\t\tif (node.classList && node.classList.contains('template')) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tnode = node.parentNode;\n\t\t}\n\t\t\n\t\treturn false;\n\t},\n\t\n\tgetFormData: function(form, document_id, collection) {\n\t\tlet data = {};\n\t\tif (!collection) return {}\n\t\t\n\t\tconst elements = form.querySelectorAll(`[name][data-collection='${collection}']`)\n\t\telements.forEach((el) => {\n\t\t\tlet el_document_id = el.getAttribute('data-document_id') || \"\"\n\t\t\tlet name = el.getAttribute('name')\n\t\t\tlet value = el.value || el.getAttribute('value')\n\t\t\tif (name === \"_id\") return;\n\t\t\tif (!name || !value) return;\n\t\t\tif (document_id == el_document_id) {\n\t\t\t\tdata[name] = el.value\n\t\t\t}\n\t\t})\n\t\treturn data;\n\t},\n\t// getFormData: function(form, selectors) {\n\t// \tconst self = this; \n\t// \tconst elements = form.querySelectorAll(selectors.join(','));\n\t\t\n\t// \tlet request_document_id = false;\n\t// \tlet dataList = [];\n\t\t\n\t\t\n\t// \telements.forEach(el => {\n\t// \t\tlet collection = el.getAttribute('data-collection')\n\t// \t\tlet document_id = el.getAttribute('data-document_id')\n\t// \t\tlet name = el.getAttribute('name')\n\t\t\t\n\t// \t\tif (el.getAttribute('data-save_value') == 'false') {\n\t// \t\t\treturn;\n\t// \t\t}\n\t\t\t\n\t// \t\tif (!document_id && name) {\n\t// \t\t\trequest_document_id = true;\n\t// \t\t\treturn;\n\t// \t\t}\n\t\t\t\n\t// \t\tlet data = dataList.find(d => d.collection == collection && d.document_id == document_id);\n\t\t\t\t\n\t// \t})\n\t// },\n\t\n\tgetParents: function(element, selector = \"form\") {\n\t\tif (!Element.prototype.matches) {\n\t\t\tElement.prototype.matches =\tElement.prototype.matchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector ||\tElement.prototype.oMatchesSelector ||\tElement.prototype.webkitMatchesSelector ||\n\t\t\t\n\t\t\tfunction(s) {\n\t\t\t\tvar matches = (this.document || this.ownerDocument).querySelectorAll(s), i = matches.length;\n\t\t\t\twhile (--i >= 0 && matches.item(i) !== this) {}\n\t\t\t\treturn i > -1;\n\t\t\t};\n\t\t}\n\t\t\n\t\tfor ( ; element && element !== document; element = element.parentNode ) {\n\t\t\tif ( element.matches( selector ) ) return element;\n\t\t}\n\t\treturn null;\n\t},\n\t\n\tsetDocumentIDOfElement: function(element, document_id) {\n\t\tlet old_document_id = element.getAttribute('data-document_id');\n\t\tif (!old_document_id || old_document_id == \"\" || old_document_id == \"pending\") {\n\t\t\telement.setAttribute('data-document_id', document_id);\n\t\t}\n\t},\n\t\n\tgetCOllections: function(form) {\n\t\tlet collections = [];\n\t\tif (!form) return collections;\n\n\t\tlet els = form.querySelectorAll('[name][data-collection]');\n\t\tels.forEach((el) => {\n\t\t\tlet tmpCollection = el.getAttribute('data-collection')\n\t\t\tif (tmpCollection && !collections.includes(tmpCollection)) {\n\t\t\t\tcollections.push(tmpCollection)\n\t\t\t} \n\t\t})\n\t\treturn collections;\n\t},\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Utils);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5hdHRyaWJ1dGVzLy4uLy4uL0NvQ3JlYXRlSlMvbm9kZV9tb2R1bGVzL0Bjb2NyZWF0ZS9mb3JtL3NyYy91dGlscy5qcz80YmE1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUEsZ0U7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBLG9FQUFvRSxXQUFXO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEVBQUU7QUFDRjtBQUNBLHVCO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLE1BQU07QUFDTixLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUyxpQ0FBaUM7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEk7QUFDQSxHQUFHO0FBQ0g7QUFDQSxFQUFFO0FBQ0Y7O0FBRUEsaUVBQWUsS0FBSyIsImZpbGUiOiIuLi8uLi9Db0NyZWF0ZUpTL25vZGVfbW9kdWxlcy9AY29jcmVhdGUvZm9ybS9zcmMvdXRpbHMuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmNvbnN0IFV0aWxzID0ge1xuXG5cdGRpc2FibGVBdXRvRmlsbDogZnVuY3Rpb24oZWxlbWVudCkge1xuXHRcdGlmIChlbGVtZW50LnRhZ05hbWUgPT0gXCJURVhUQVJFQVwiKSB7XG5cdFx0XHRlbGVtZW50LnZhbHVlID0gXCJcIjtcblx0XHRcdGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXV0b2NvbXBsZXRlXCIsXCJvZmZcIilcblx0XHR9XG5cdFx0aWYgKCFlbGVtZW50Lmhhc0F0dHJpYnV0ZShcImF1dG9jb21wbGV0ZVwiKSkge1xuXHRcdFx0ZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2F1dG9jb21wbGV0ZScsIFwib2ZmXCIpO1xuXHRcdH1cblx0fSxcblxuXHRzZXRBdHRyaWJ1dGU6IGZ1bmN0aW9uKGZvcm0pIHtcblx0XHRcblx0XHRjb25zdCBjb2xsZWN0aW9uID0gZm9ybS5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29sbGVjdGlvbicpIHx8IFwiXCI7IFxuXHRcdGNvbnN0IGRhdGFSZWFsVGltZSA9IGZvcm0uZ2V0QXR0cmlidXRlKCdkYXRhLXJlYWx0aW1lJyk7XG5cdFx0Y29uc3QgZG9jdW1lbnRfaWQgPSBmb3JtLmdldEF0dHJpYnV0ZSgnZGF0YS1kb2N1bWVudF9pZCcpIHx8IFwiXCI7XG5cdFx0bGV0IGVsZW1lbnRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdbbmFtZV0sIFtkYXRhLXBhc3NfdG9dJylcblx0XHRcblx0XHRcdFx0XHRcblx0XHRlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XG5cdFx0XHRpZiAoZWwucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ3RlbXBsYXRlJykpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1yZWFsdGltZScpID09IG51bGwgJiYgZGF0YVJlYWxUaW1lKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBpZiAoIVsnSU5QVVQnLCAnVEVYVEFSRUEnXS5pbmRleE9mKGVsLnRhZ05hbWUpKSB7XG5cdFx0XHRcdGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1yZWFsdGltZScsIGRhdGFSZWFsVGltZSk7XG5cdFx0XHRcdC8vIH1cblx0XHRcdH1cblx0XHRcdGlmIChlbC5nZXRBdHRyaWJ1dGUoJ25hbWUnKSAmJiAhZWwuaGFzQXR0cmlidXRlKCdkYXRhLWNvbGxlY3Rpb24nKSAmJiBjb2xsZWN0aW9uKSB7XG5cdFx0XHRcdGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1jb2xsZWN0aW9uJywgY29sbGVjdGlvbik7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGlmIChlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGFzc190bycpICYmICFlbC5oYXNBdHRyaWJ1dGUoJ2RhdGEtcGFzc19jb2xsZWN0aW9uJykgJiYgIGNvbGxlY3Rpb24pIHtcblx0XHRcdFx0ZWwuc2V0QXR0cmlidXRlKCdkYXRhLXBhc3NfY29sbGVjdGlvbicsIGNvbGxlY3Rpb24pO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRpZiAoZWwuZ2V0QXR0cmlidXRlKCduYW1lJykgJiYgIWVsLmdldEF0dHJpYnV0ZSgnZGF0YS1kb2N1bWVudF9pZCcpICYmIGRvY3VtZW50X2lkKSB7XG5cdFx0XHRcdGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1kb2N1bWVudF9pZCcsIGRvY3VtZW50X2lkKVxuXHRcdFx0fVxuXHRcdFx0aWYgKCFlbC5oYXNBdHRyaWJ1dGUoXCJkYXRhLWRvY3VtZW50X2lkXCIpICYmIGRvY3VtZW50X2lkICE9IG51bGwpIHtcblx0XHRcdFx0ZWwuc2V0QXR0cmlidXRlKCdkYXRhLWRvY3VtZW50X2lkJywgZG9jdW1lbnRfaWQpXG5cdFx0XHR9XG5cblx0XHR9KVxuXHR9LFxuXG5cdGNoZWNrRm9ybVZhbGlkYXRlOiBmdW5jdGlvbihmb3JtKSB7XG5cdFx0XG5cdFx0aWYgKHR5cGVvZiBDb0NyZWF0ZS51bmlxdWUgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRyZXR1cm4gQ29DcmVhdGUudW5pcXVlLmNoZWNrVmFsaWRhdGUoZm9ybSlcblx0XHR9XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0sXG5cdFxuXHRpc1RlbXBsYXRlSW5wdXQ6IGZ1bmN0aW9uIChpbnB1dCkge1xuXHRcdGlmIChpbnB1dC5jbGFzc0xpc3QuY29udGFpbnMoJ3RlbXBsYXRlJykpIHJldHVybiB0cnVlO1xuXHRcdFxuXHRcdGxldCBub2RlID0gaW5wdXQucGFyZW50Tm9kZTtcblx0XHR3aGlsZSAobm9kZSkge1xuXHRcdFx0aWYgKG5vZGUuY2xhc3NMaXN0ICYmIG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCd0ZW1wbGF0ZScpKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0bm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcblx0XHR9XG5cdFx0XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9LFxuXHRcblx0Z2V0Rm9ybURhdGE6IGZ1bmN0aW9uKGZvcm0sIGRvY3VtZW50X2lkLCBjb2xsZWN0aW9uKSB7XG5cdFx0bGV0IGRhdGEgPSB7fTtcblx0XHRpZiAoIWNvbGxlY3Rpb24pIHJldHVybiB7fVxuXHRcdFxuXHRcdGNvbnN0IGVsZW1lbnRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKGBbbmFtZV1bZGF0YS1jb2xsZWN0aW9uPScke2NvbGxlY3Rpb259J11gKVxuXHRcdGVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiB7XG5cdFx0XHRsZXQgZWxfZG9jdW1lbnRfaWQgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZG9jdW1lbnRfaWQnKSB8fCBcIlwiXG5cdFx0XHRsZXQgbmFtZSA9IGVsLmdldEF0dHJpYnV0ZSgnbmFtZScpXG5cdFx0XHRsZXQgdmFsdWUgPSBlbC52YWx1ZSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJylcblx0XHRcdGlmIChuYW1lID09PSBcIl9pZFwiKSByZXR1cm47XG5cdFx0XHRpZiAoIW5hbWUgfHwgIXZhbHVlKSByZXR1cm47XG5cdFx0XHRpZiAoZG9jdW1lbnRfaWQgPT0gZWxfZG9jdW1lbnRfaWQpIHtcblx0XHRcdFx0ZGF0YVtuYW1lXSA9IGVsLnZhbHVlXG5cdFx0XHR9XG5cdFx0fSlcblx0XHRyZXR1cm4gZGF0YTtcblx0fSxcblx0Ly8gZ2V0Rm9ybURhdGE6IGZ1bmN0aW9uKGZvcm0sIHNlbGVjdG9ycykge1xuXHQvLyBcdGNvbnN0IHNlbGYgPSB0aGlzOyBcblx0Ly8gXHRjb25zdCBlbGVtZW50cyA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcnMuam9pbignLCcpKTtcblx0XHRcblx0Ly8gXHRsZXQgcmVxdWVzdF9kb2N1bWVudF9pZCA9IGZhbHNlO1xuXHQvLyBcdGxldCBkYXRhTGlzdCA9IFtdO1xuXHRcdFxuXHRcdFxuXHQvLyBcdGVsZW1lbnRzLmZvckVhY2goZWwgPT4ge1xuXHQvLyBcdFx0bGV0IGNvbGxlY3Rpb24gPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29sbGVjdGlvbicpXG5cdC8vIFx0XHRsZXQgZG9jdW1lbnRfaWQgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZG9jdW1lbnRfaWQnKVxuXHQvLyBcdFx0bGV0IG5hbWUgPSBlbC5nZXRBdHRyaWJ1dGUoJ25hbWUnKVxuXHRcdFx0XG5cdC8vIFx0XHRpZiAoZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXNhdmVfdmFsdWUnKSA9PSAnZmFsc2UnKSB7XG5cdC8vIFx0XHRcdHJldHVybjtcblx0Ly8gXHRcdH1cblx0XHRcdFxuXHQvLyBcdFx0aWYgKCFkb2N1bWVudF9pZCAmJiBuYW1lKSB7XG5cdC8vIFx0XHRcdHJlcXVlc3RfZG9jdW1lbnRfaWQgPSB0cnVlO1xuXHQvLyBcdFx0XHRyZXR1cm47XG5cdC8vIFx0XHR9XG5cdFx0XHRcblx0Ly8gXHRcdGxldCBkYXRhID0gZGF0YUxpc3QuZmluZChkID0+IGQuY29sbGVjdGlvbiA9PSBjb2xsZWN0aW9uICYmIGQuZG9jdW1lbnRfaWQgPT0gZG9jdW1lbnRfaWQpO1xuXHRcdFx0XHRcblx0Ly8gXHR9KVxuXHQvLyB9LFxuXHRcblx0Z2V0UGFyZW50czogZnVuY3Rpb24oZWxlbWVudCwgc2VsZWN0b3IgPSBcImZvcm1cIikge1xuXHRcdGlmICghRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcykge1xuXHRcdFx0RWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcyA9XHRFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUubW96TWF0Y2hlc1NlbGVjdG9yIHx8IEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yIHx8XHRFbGVtZW50LnByb3RvdHlwZS5vTWF0Y2hlc1NlbGVjdG9yIHx8XHRFbGVtZW50LnByb3RvdHlwZS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRcdFxuXHRcdFx0ZnVuY3Rpb24ocykge1xuXHRcdFx0XHR2YXIgbWF0Y2hlcyA9ICh0aGlzLmRvY3VtZW50IHx8IHRoaXMub3duZXJEb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChzKSwgaSA9IG1hdGNoZXMubGVuZ3RoO1xuXHRcdFx0XHR3aGlsZSAoLS1pID49IDAgJiYgbWF0Y2hlcy5pdGVtKGkpICE9PSB0aGlzKSB7fVxuXHRcdFx0XHRyZXR1cm4gaSA+IC0xO1xuXHRcdFx0fTtcblx0XHR9XG5cdFx0XG5cdFx0Zm9yICggOyBlbGVtZW50ICYmIGVsZW1lbnQgIT09IGRvY3VtZW50OyBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlICkge1xuXHRcdFx0aWYgKCBlbGVtZW50Lm1hdGNoZXMoIHNlbGVjdG9yICkgKSByZXR1cm4gZWxlbWVudDtcblx0XHR9XG5cdFx0cmV0dXJuIG51bGw7XG5cdH0sXG5cdFxuXHRzZXREb2N1bWVudElET2ZFbGVtZW50OiBmdW5jdGlvbihlbGVtZW50LCBkb2N1bWVudF9pZCkge1xuXHRcdGxldCBvbGRfZG9jdW1lbnRfaWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1kb2N1bWVudF9pZCcpO1xuXHRcdGlmICghb2xkX2RvY3VtZW50X2lkIHx8IG9sZF9kb2N1bWVudF9pZCA9PSBcIlwiIHx8IG9sZF9kb2N1bWVudF9pZCA9PSBcInBlbmRpbmdcIikge1xuXHRcdFx0ZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZG9jdW1lbnRfaWQnLCBkb2N1bWVudF9pZCk7XG5cdFx0fVxuXHR9LFxuXHRcblx0Z2V0Q09sbGVjdGlvbnM6IGZ1bmN0aW9uKGZvcm0pIHtcblx0XHRsZXQgY29sbGVjdGlvbnMgPSBbXTtcblx0XHRpZiAoIWZvcm0pIHJldHVybiBjb2xsZWN0aW9ucztcblxuXHRcdGxldCBlbHMgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tuYW1lXVtkYXRhLWNvbGxlY3Rpb25dJyk7XG5cdFx0ZWxzLmZvckVhY2goKGVsKSA9PiB7XG5cdFx0XHRsZXQgdG1wQ29sbGVjdGlvbiA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1jb2xsZWN0aW9uJylcblx0XHRcdGlmICh0bXBDb2xsZWN0aW9uICYmICFjb2xsZWN0aW9ucy5pbmNsdWRlcyh0bXBDb2xsZWN0aW9uKSkge1xuXHRcdFx0XHRjb2xsZWN0aW9ucy5wdXNoKHRtcENvbGxlY3Rpb24pXG5cdFx0XHR9IFxuXHRcdH0pXG5cdFx0cmV0dXJuIGNvbGxlY3Rpb25zO1xuXHR9LFxufVxuXG5leHBvcnQgZGVmYXVsdCBVdGlsczsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../CoCreateJS/node_modules/@cocreate/form/src/utils.js\n")}}]);
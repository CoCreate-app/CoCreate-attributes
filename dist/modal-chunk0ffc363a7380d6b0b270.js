/*! For license information please see modal-chunk0ffc363a7380d6b0b270.js.LICENSE.txt */
(this.webpackChunkCoCreate_attributes=this.webpackChunkCoCreate_attributes||[]).push([["modal-chunk"],{"./node_modules/file-loader/dist/cjs.js!../../CoCreateJS/node_modules/@cocreate/modal/src/CoCreate-modal.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__webpack_require__.p + "9035f5ddb466c6c9071b96225340988e.css");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5hdHRyaWJ1dGVzLy4uLy4uL0NvQ3JlYXRlSlMvbm9kZV9tb2R1bGVzL0Bjb2NyZWF0ZS9tb2RhbC9zcmMvQ29DcmVhdGUtbW9kYWwuY3NzP2NlNWIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGlFQUFlLHFCQUF1Qix5Q0FBeUMiLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZmlsZS1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vQ29DcmVhdGVKUy9ub2RlX21vZHVsZXMvQGNvY3JlYXRlL21vZGFsL3NyYy9Db0NyZWF0ZS1tb2RhbC5jc3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiOTAzNWY1ZGRiNDY2YzZjOTA3MWI5NjIyNTM0MDk4OGUuY3NzXCI7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/file-loader/dist/cjs.js!../../CoCreateJS/node_modules/@cocreate/modal/src/CoCreate-modal.css\n')},"../../CoCreateJS/node_modules/@cocreate/modal/src/CoCreate-modal.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _CoCreate_components_CoCreate_attributes_node_modules_style_loader_dist_runtime_injectStylesIntoLinkTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../../../../CoCreate-components/CoCreate-attributes/node_modules/style-loader/dist/runtime/injectStylesIntoLinkTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoLinkTag.js");\n/* harmony import */ var _CoCreate_components_CoCreate_attributes_node_modules_style_loader_dist_runtime_injectStylesIntoLinkTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_CoCreate_components_CoCreate_attributes_node_modules_style_loader_dist_runtime_injectStylesIntoLinkTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _CoCreate_components_CoCreate_attributes_node_modules_file_loader_dist_cjs_js_CoCreate_modal_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !!../../../../../CoCreate-components/CoCreate-attributes/node_modules/file-loader/dist/cjs.js!./CoCreate-modal.css */ "./node_modules/file-loader/dist/cjs.js!../../CoCreateJS/node_modules/@cocreate/modal/src/CoCreate-modal.css");\n\n            \n\nvar options = {"injectType":"linkTag"};\n\noptions.insert = "head";\n\nvar update = _CoCreate_components_CoCreate_attributes_node_modules_style_loader_dist_runtime_injectStylesIntoLinkTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_CoCreate_components_CoCreate_attributes_node_modules_file_loader_dist_cjs_js_CoCreate_modal_css__WEBPACK_IMPORTED_MODULE_1__.default, options);\n\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5hdHRyaWJ1dGVzLy4uLy4uL0NvQ3JlYXRlSlMvbm9kZV9tb2R1bGVzL0Bjb2NyZWF0ZS9tb2RhbC9zcmMvQ29DcmVhdGUtbW9kYWwuY3NzPzBhYzkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE0STtBQUM1SSxZQUFxSjs7QUFFckosZUFBZTs7QUFFZjs7QUFFQSxhQUFhLGlKQUFHLENBQUMscUlBQU87Ozs7QUFJeEIsaUVBQWUsRSIsImZpbGUiOiIuLi8uLi9Db0NyZWF0ZUpTL25vZGVfbW9kdWxlcy9AY29jcmVhdGUvbW9kYWwvc3JjL0NvQ3JlYXRlLW1vZGFsLmNzcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhcGkgZnJvbSBcIiEuLi8uLi8uLi8uLi8uLi9Db0NyZWF0ZS1jb21wb25lbnRzL0NvQ3JlYXRlLWF0dHJpYnV0ZXMvbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b0xpbmtUYWcuanNcIjtcbiAgICAgICAgICAgIGltcG9ydCBjb250ZW50IGZyb20gXCIhIS4uLy4uLy4uLy4uLy4uL0NvQ3JlYXRlLWNvbXBvbmVudHMvQ29DcmVhdGUtYXR0cmlidXRlcy9ub2RlX21vZHVsZXMvZmlsZS1sb2FkZXIvZGlzdC9janMuanMhLi9Db0NyZWF0ZS1tb2RhbC5jc3NcIjtcblxudmFyIG9wdGlvbnMgPSB7XCJpbmplY3RUeXBlXCI6XCJsaW5rVGFnXCJ9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xuXG52YXIgdXBkYXRlID0gYXBpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0IGRlZmF1bHQge30iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../CoCreateJS/node_modules/@cocreate/modal/src/CoCreate-modal.css\n')},"../../CoCreateJS/node_modules/@cocreate/modal/src/container.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _modal_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modal.js */ \"../../CoCreateJS/node_modules/@cocreate/modal/src/modal.js\");\n\n\n\nfunction ModalContainer(el) {\n  this.modals = [];\n  \n  this.el = el;\n  this.modalClass = this.el.getAttribute(\"data-modal-class\");\n  this.SELECT_ZINDEX = 10;\n  this.UNSELECT_ZINDEX = 2;\n  this.ghostEl = null;\n  this.width = 0;\n  this.height = 0;\n  \n  this.selectedModal = null;\n  \n  if (!this.modalClass) {\n    this.modalClass = \"modal\";\n  }\n  \n  this._createGhost(this.el.getAttribute(\"data-ghost-class\"));\n  this._initModals();\n  this._initEvent();\n  \n}\n\nModalContainer.prototype = {\n  _createGhost: function(ghostClass) {\n    var node = document.createElement(\"div\");\n    if (!ghostClass) {\n      ghostClass = \"modal-ghost\";\n    }\n    \n    node.classList.add(ghostClass);\n    this.el.appendChild(node);\n    this.ghostEl = node;\n  },\n  _initModals : function() {\n    var el_children = document.querySelectorAll(\".\" + this.modalClass);\n    \n    for (var i = 0; i < el_children.length; i++) {\n      this.modals.push(new _modal_js__WEBPACK_IMPORTED_MODULE_0__.default(el_children[i], {}, this.el));\n    }\n    \n    if (!this.selectedModal) {\n      this._selectModal(this.modals[this.modals.length - 1]);\n      \n    }\n  },\n  \n  _initEvent : function() {\n    let _this = this;\n    \n    this.el.addEventListener('mousemove', function(e) {\n      e.preventDefault();\n      if (_this.selectedModal) {\n        _this.selectedModal._onMove(e);\n      }\n    });\n    \n    this.el.addEventListener('mouseup', function(e) {\n      if (_this.selectedModal) {\n        _this.selectedModal._onUp(e);\n      }\n      e.preventDefault();\n    }, true);\n\n    this.el.addEventListener('touchmove', function(e) {\n      // e.preventDefault();\n      if (_this.selectedModal) {\n      _this.selectedModal._onMove(e.touches[0]);\n      }\n    })\n    \n    this.el.addEventListener('touchend', function(e) {\n      // e.preventDefault();\n      if (_this.selectedModal) {\n      _this.selectedModal._onUp(e.touches[0]);\n      }\n    })\n    \n    this.el.addEventListener('cocreate-selectmodal', function(e) {\n      if (_this.selectedModal) {\n        _this._selectModal(e.detail.modal);\n      }\n    })\n    \n    this.el.addEventListener('cocreate-modalghost', function(e) {\n      if (_this.selectedModal) {\n        _this._ghostProcess(e.detail)\n      }\n    })\n    \n    this.el.addEventListener('cocreate-removemodal', function(e) {\n      if (_this.selectedModal) {\n        _this._removeModal(e.detail.modal)\n      }\n    })\n    this._initResizeEvent()\n  },\n  \n  _initResizeEvent: function() {\n    var _this = this;\n    var bound = this.el.getBoundingClientRect();\n    this.width = bound.width;\n    this.height = bound.height;\n    let ro = new ResizeObserver((entries, observer) => {\n      let contentRect = entries[0].contentRect;\n      _this._resizeProcess(_this.width, _this.height, contentRect.width, contentRect.height);\n    })\n    \n    ro.observe(this.el)\n  },\n  \n  _resizeProcess(prevWidth, prevHeight, width, height) {\n    this.width = width;\n    this.height = height;\n\n    if (prevWidth == width && prevHeight == height) {\n      return;\n    }\n    \n    let dx = width - prevWidth;\n    let dy = height - prevHeight;\n    \n    for (var  i = 0; i < this.modals.length; i++) {\n      this.modals[i].resize(dx, dy, width, height);\n    }\n    \n  },\n  \n  _createModal : function(attr) {\n    var node = document.createElement(\"div\");\n    node.classList.add(this.modalClass);\n    node.style.zIndex = this.SELECT_ZINDEX; \n    \n    this.el.appendChild(node)\n    \n    var modal = new _modal_js__WEBPACK_IMPORTED_MODULE_0__.default(node, attr, this.el);\n    this.modals.push(modal)\n    \n    this._selectModal(node);\n  },\n  \n  _releaseSelect: function() {\n    if (!this.selectedModal) {\n      return;\n    }\n    this.selectedModal.el.style.zIndex = this.UNSELECT_ZINDEX;\n    this.selectedModal.el.classList.remove(\"modal_selected\");\n    this.selectedModal = null;\n  },\n  \n  _selectModal: function(el) {\n    \n    let modal = this._findModalByElement(el);\n    if (modal == this.selectedModal) {\n      return;\n    }\n    this._releaseSelect();\n    \n    this.selectedModal = modal;\n    \n    if (this.selectedModal) {\n      this.selectedModal.el.style.zIndex = this.SELECT_ZINDEX;\n      this.selectedModal.el.classList.add('modal_selected');\n      this.ghostEl.style.width = 0;\n      this.ghostEl.style.height = 0;\n    }\n  },\n  \n  _findModalByElement: function(el) {\n    \n    if (el instanceof _modal_js__WEBPACK_IMPORTED_MODULE_0__.default) {\n      return el;\n    }\n    for (var i = 0; i < this.modals.length; i ++) {\n      if (this.modals[i].el.isEqualNode(el) ) {\n        return this.modals[i];\n      }\n    }\n    \n    return null;\n  },\n  \n  getModalById: function(id) {\n    for (var i = 0; i < this.modals.length; i++) {\n      if (this.modals[i].id == id) {\n        return this.modals[i];\n      }\n    }\n    \n    return null;\n  },\n  \n  _ghostProcess: function(info) {\n    this.ghostEl.style.left = info.x + 'px';\n    this.ghostEl.style.top = info.y + 'px';\n    this.ghostEl.style.width = info.w + 'px';\n    this.ghostEl.style.height = info.h + 'px';\n    \n    if (info.type === \"show\") {\n      if (this.ghostEl.style.display === 'none') {\n        this.ghostEl.style.display = 'block'\n      }\n      this.ghostEl.style.opacity = 0.2;  \n    } else {\n      this.ghostEl.style.opacity = 0;\n      if (this.ghostEl.style.display !== 'none') {\n        this.ghostEl.style.display = 'none'\n      }\n    }\n    return;\n  },\n  \n  _removeModal: function(modal) {\n    for (var i = 0; i < this.modals.length; i ++) {\n      if (this.modals[i] === modal ) {\n        this.el.removeChild(modal.el);\n        this.modals.splice(i, 1);\n        break;\n      }\n    }\n    if (this.modals.length > 0 ) {\n      this._selectModal(this.modals[this.modals.length - 1]);\n    } else {\n      this.selectedModal = null;\n    }\n    this.el.style.pointerEvents = \"none\";\n  }\n\n}\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ModalContainer);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5hdHRyaWJ1dGVzLy4uLy4uL0NvQ3JlYXRlSlMvbm9kZV9tb2R1bGVzL0Bjb2NyZWF0ZS9tb2RhbC9zcmMvY29udGFpbmVyLmpzPzMzZTAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQzhCOztBQUU5QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBLG1CQUFtQix3QkFBd0I7QUFDM0MsMkJBQTJCLDhDQUFLLG1CQUFtQjtBQUNuRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsb0JBQW9CLHdCQUF3QjtBQUM1QztBQUNBOztBQUVBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsMkM7O0FBRUE7O0FBRUEsb0JBQW9CLDhDQUFLO0FBQ3pCOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBLHNCQUFzQiw4Q0FBSztBQUMzQjtBQUNBO0FBQ0EsbUJBQW1CLHdCQUF3QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxtQkFBbUIsd0JBQXdCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLG1CQUFtQix3QkFBd0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0EsaUVBQWUsY0FBYyIsImZpbGUiOiIuLi8uLi9Db0NyZWF0ZUpTL25vZGVfbW9kdWxlcy9AY29jcmVhdGUvbW9kYWwvc3JjL2NvbnRhaW5lci5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IE1vZGFsIGZyb20gXCIuL21vZGFsLmpzXCJcblxuZnVuY3Rpb24gTW9kYWxDb250YWluZXIoZWwpIHtcbiAgdGhpcy5tb2RhbHMgPSBbXTtcbiAgXG4gIHRoaXMuZWwgPSBlbDtcbiAgdGhpcy5tb2RhbENsYXNzID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1vZGFsLWNsYXNzXCIpO1xuICB0aGlzLlNFTEVDVF9aSU5ERVggPSAxMDtcbiAgdGhpcy5VTlNFTEVDVF9aSU5ERVggPSAyO1xuICB0aGlzLmdob3N0RWwgPSBudWxsO1xuICB0aGlzLndpZHRoID0gMDtcbiAgdGhpcy5oZWlnaHQgPSAwO1xuICBcbiAgdGhpcy5zZWxlY3RlZE1vZGFsID0gbnVsbDtcbiAgXG4gIGlmICghdGhpcy5tb2RhbENsYXNzKSB7XG4gICAgdGhpcy5tb2RhbENsYXNzID0gXCJtb2RhbFwiO1xuICB9XG4gIFxuICB0aGlzLl9jcmVhdGVHaG9zdCh0aGlzLmVsLmdldEF0dHJpYnV0ZShcImRhdGEtZ2hvc3QtY2xhc3NcIikpO1xuICB0aGlzLl9pbml0TW9kYWxzKCk7XG4gIHRoaXMuX2luaXRFdmVudCgpO1xuICBcbn1cblxuTW9kYWxDb250YWluZXIucHJvdG90eXBlID0ge1xuICBfY3JlYXRlR2hvc3Q6IGZ1bmN0aW9uKGdob3N0Q2xhc3MpIHtcbiAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgaWYgKCFnaG9zdENsYXNzKSB7XG4gICAgICBnaG9zdENsYXNzID0gXCJtb2RhbC1naG9zdFwiO1xuICAgIH1cbiAgICBcbiAgICBub2RlLmNsYXNzTGlzdC5hZGQoZ2hvc3RDbGFzcyk7XG4gICAgdGhpcy5lbC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICB0aGlzLmdob3N0RWwgPSBub2RlO1xuICB9LFxuICBfaW5pdE1vZGFscyA6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBlbF9jaGlsZHJlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIgKyB0aGlzLm1vZGFsQ2xhc3MpO1xuICAgIFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxfY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMubW9kYWxzLnB1c2gobmV3IE1vZGFsKGVsX2NoaWxkcmVuW2ldLCB7fSwgdGhpcy5lbCkpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIXRoaXMuc2VsZWN0ZWRNb2RhbCkge1xuICAgICAgdGhpcy5fc2VsZWN0TW9kYWwodGhpcy5tb2RhbHNbdGhpcy5tb2RhbHMubGVuZ3RoIC0gMV0pO1xuICAgICAgXG4gICAgfVxuICB9LFxuICBcbiAgX2luaXRFdmVudCA6IGZ1bmN0aW9uKCkge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG4gICAgXG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoX3RoaXMuc2VsZWN0ZWRNb2RhbCkge1xuICAgICAgICBfdGhpcy5zZWxlY3RlZE1vZGFsLl9vbk1vdmUoZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKF90aGlzLnNlbGVjdGVkTW9kYWwpIHtcbiAgICAgICAgX3RoaXMuc2VsZWN0ZWRNb2RhbC5fb25VcChlKTtcbiAgICAgIH1cbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9LCB0cnVlKTtcblxuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgZnVuY3Rpb24oZSkge1xuICAgICAgLy8gZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKF90aGlzLnNlbGVjdGVkTW9kYWwpIHtcbiAgICAgIF90aGlzLnNlbGVjdGVkTW9kYWwuX29uTW92ZShlLnRvdWNoZXNbMF0pO1xuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIC8vIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChfdGhpcy5zZWxlY3RlZE1vZGFsKSB7XG4gICAgICBfdGhpcy5zZWxlY3RlZE1vZGFsLl9vblVwKGUudG91Y2hlc1swXSk7XG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvY3JlYXRlLXNlbGVjdG1vZGFsJywgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKF90aGlzLnNlbGVjdGVkTW9kYWwpIHtcbiAgICAgICAgX3RoaXMuX3NlbGVjdE1vZGFsKGUuZGV0YWlsLm1vZGFsKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY29jcmVhdGUtbW9kYWxnaG9zdCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmIChfdGhpcy5zZWxlY3RlZE1vZGFsKSB7XG4gICAgICAgIF90aGlzLl9naG9zdFByb2Nlc3MoZS5kZXRhaWwpXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvY3JlYXRlLXJlbW92ZW1vZGFsJywgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKF90aGlzLnNlbGVjdGVkTW9kYWwpIHtcbiAgICAgICAgX3RoaXMuX3JlbW92ZU1vZGFsKGUuZGV0YWlsLm1vZGFsKVxuICAgICAgfVxuICAgIH0pXG4gICAgdGhpcy5faW5pdFJlc2l6ZUV2ZW50KClcbiAgfSxcbiAgXG4gIF9pbml0UmVzaXplRXZlbnQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgdmFyIGJvdW5kID0gdGhpcy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB0aGlzLndpZHRoID0gYm91bmQud2lkdGg7XG4gICAgdGhpcy5oZWlnaHQgPSBib3VuZC5oZWlnaHQ7XG4gICAgbGV0IHJvID0gbmV3IFJlc2l6ZU9ic2VydmVyKChlbnRyaWVzLCBvYnNlcnZlcikgPT4ge1xuICAgICAgbGV0IGNvbnRlbnRSZWN0ID0gZW50cmllc1swXS5jb250ZW50UmVjdDtcbiAgICAgIF90aGlzLl9yZXNpemVQcm9jZXNzKF90aGlzLndpZHRoLCBfdGhpcy5oZWlnaHQsIGNvbnRlbnRSZWN0LndpZHRoLCBjb250ZW50UmVjdC5oZWlnaHQpO1xuICAgIH0pXG4gICAgXG4gICAgcm8ub2JzZXJ2ZSh0aGlzLmVsKVxuICB9LFxuICBcbiAgX3Jlc2l6ZVByb2Nlc3MocHJldldpZHRoLCBwcmV2SGVpZ2h0LCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgaWYgKHByZXZXaWR0aCA9PSB3aWR0aCAmJiBwcmV2SGVpZ2h0ID09IGhlaWdodCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBsZXQgZHggPSB3aWR0aCAtIHByZXZXaWR0aDtcbiAgICBsZXQgZHkgPSBoZWlnaHQgLSBwcmV2SGVpZ2h0O1xuICAgIFxuICAgIGZvciAodmFyICBpID0gMDsgaSA8IHRoaXMubW9kYWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLm1vZGFsc1tpXS5yZXNpemUoZHgsIGR5LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICB9XG4gICAgXG4gIH0sXG4gIFxuICBfY3JlYXRlTW9kYWwgOiBmdW5jdGlvbihhdHRyKSB7XG4gICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG5vZGUuY2xhc3NMaXN0LmFkZCh0aGlzLm1vZGFsQ2xhc3MpO1xuICAgIG5vZGUuc3R5bGUuekluZGV4ID0gdGhpcy5TRUxFQ1RfWklOREVYOyBcbiAgICBcbiAgICB0aGlzLmVsLmFwcGVuZENoaWxkKG5vZGUpXG4gICAgXG4gICAgdmFyIG1vZGFsID0gbmV3IE1vZGFsKG5vZGUsIGF0dHIsIHRoaXMuZWwpO1xuICAgIHRoaXMubW9kYWxzLnB1c2gobW9kYWwpXG4gICAgXG4gICAgdGhpcy5fc2VsZWN0TW9kYWwobm9kZSk7XG4gIH0sXG4gIFxuICBfcmVsZWFzZVNlbGVjdDogZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLnNlbGVjdGVkTW9kYWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zZWxlY3RlZE1vZGFsLmVsLnN0eWxlLnpJbmRleCA9IHRoaXMuVU5TRUxFQ1RfWklOREVYO1xuICAgIHRoaXMuc2VsZWN0ZWRNb2RhbC5lbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfc2VsZWN0ZWRcIik7XG4gICAgdGhpcy5zZWxlY3RlZE1vZGFsID0gbnVsbDtcbiAgfSxcbiAgXG4gIF9zZWxlY3RNb2RhbDogZnVuY3Rpb24oZWwpIHtcbiAgICBcbiAgICBsZXQgbW9kYWwgPSB0aGlzLl9maW5kTW9kYWxCeUVsZW1lbnQoZWwpO1xuICAgIGlmIChtb2RhbCA9PSB0aGlzLnNlbGVjdGVkTW9kYWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fcmVsZWFzZVNlbGVjdCgpO1xuICAgIFxuICAgIHRoaXMuc2VsZWN0ZWRNb2RhbCA9IG1vZGFsO1xuICAgIFxuICAgIGlmICh0aGlzLnNlbGVjdGVkTW9kYWwpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRNb2RhbC5lbC5zdHlsZS56SW5kZXggPSB0aGlzLlNFTEVDVF9aSU5ERVg7XG4gICAgICB0aGlzLnNlbGVjdGVkTW9kYWwuZWwuY2xhc3NMaXN0LmFkZCgnbW9kYWxfc2VsZWN0ZWQnKTtcbiAgICAgIHRoaXMuZ2hvc3RFbC5zdHlsZS53aWR0aCA9IDA7XG4gICAgICB0aGlzLmdob3N0RWwuc3R5bGUuaGVpZ2h0ID0gMDtcbiAgICB9XG4gIH0sXG4gIFxuICBfZmluZE1vZGFsQnlFbGVtZW50OiBmdW5jdGlvbihlbCkge1xuICAgIFxuICAgIGlmIChlbCBpbnN0YW5jZW9mIE1vZGFsKSB7XG4gICAgICByZXR1cm4gZWw7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tb2RhbHMubGVuZ3RoOyBpICsrKSB7XG4gICAgICBpZiAodGhpcy5tb2RhbHNbaV0uZWwuaXNFcXVhbE5vZGUoZWwpICkge1xuICAgICAgICByZXR1cm4gdGhpcy5tb2RhbHNbaV07XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBudWxsO1xuICB9LFxuICBcbiAgZ2V0TW9kYWxCeUlkOiBmdW5jdGlvbihpZCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tb2RhbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLm1vZGFsc1tpXS5pZCA9PSBpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tb2RhbHNbaV07XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBudWxsO1xuICB9LFxuICBcbiAgX2dob3N0UHJvY2VzczogZnVuY3Rpb24oaW5mbykge1xuICAgIHRoaXMuZ2hvc3RFbC5zdHlsZS5sZWZ0ID0gaW5mby54ICsgJ3B4JztcbiAgICB0aGlzLmdob3N0RWwuc3R5bGUudG9wID0gaW5mby55ICsgJ3B4JztcbiAgICB0aGlzLmdob3N0RWwuc3R5bGUud2lkdGggPSBpbmZvLncgKyAncHgnO1xuICAgIHRoaXMuZ2hvc3RFbC5zdHlsZS5oZWlnaHQgPSBpbmZvLmggKyAncHgnO1xuICAgIFxuICAgIGlmIChpbmZvLnR5cGUgPT09IFwic2hvd1wiKSB7XG4gICAgICBpZiAodGhpcy5naG9zdEVsLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykge1xuICAgICAgICB0aGlzLmdob3N0RWwuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICAgIH1cbiAgICAgIHRoaXMuZ2hvc3RFbC5zdHlsZS5vcGFjaXR5ID0gMC4yOyAgXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZ2hvc3RFbC5zdHlsZS5vcGFjaXR5ID0gMDtcbiAgICAgIGlmICh0aGlzLmdob3N0RWwuc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnKSB7XG4gICAgICAgIHRoaXMuZ2hvc3RFbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybjtcbiAgfSxcbiAgXG4gIF9yZW1vdmVNb2RhbDogZnVuY3Rpb24obW9kYWwpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubW9kYWxzLmxlbmd0aDsgaSArKykge1xuICAgICAgaWYgKHRoaXMubW9kYWxzW2ldID09PSBtb2RhbCApIHtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVDaGlsZChtb2RhbC5lbCk7XG4gICAgICAgIHRoaXMubW9kYWxzLnNwbGljZShpLCAxKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLm1vZGFscy5sZW5ndGggPiAwICkge1xuICAgICAgdGhpcy5fc2VsZWN0TW9kYWwodGhpcy5tb2RhbHNbdGhpcy5tb2RhbHMubGVuZ3RoIC0gMV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbGVjdGVkTW9kYWwgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLmVsLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcIm5vbmVcIjtcbiAgfVxuXG59XG5cblxuZXhwb3J0IGRlZmF1bHQgTW9kYWxDb250YWluZXI7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../CoCreateJS/node_modules/@cocreate/modal/src/container.js\n")},"../../CoCreateJS/node_modules/@cocreate/modal/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _container_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./container.js */ \"../../CoCreateJS/node_modules/@cocreate/modal/src/container.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"../../CoCreateJS/node_modules/@cocreate/modal/src/utils.js\");\n/* harmony import */ var _cocreate_observer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @cocreate/observer */ \"../../CoCreateJS/node_modules/@cocreate/observer/src/index.js\");\n/* harmony import */ var _cocreate_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @cocreate/utils */ \"../../CoCreateJS/node_modules/@cocreate/utils/src/index.js\");\n/* harmony import */ var _cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @cocreate/cocreatejs */ \"../../CoCreateJS/node_modules/@cocreate/cocreatejs/src/index.js\");\n/* harmony import */ var _CoCreate_modal_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./CoCreate-modal.css */ \"../../CoCreateJS/node_modules/@cocreate/modal/src/CoCreate-modal.css\");\n\n\n\n\n\n\n\nfunction CoCreateWindow(id) {\n  let container_id = (id) ? id : 'modal-viewport';\n  this.container = null;\n  this.id = container_id;\n  \n  this.pageId = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.generateUUID)(20);\n  this.isRoot = this._checkRoot();\n  \n  \n  if (!this.isRoot) {\n    this.parentId = _utils_js__WEBPACK_IMPORTED_MODULE_1__.ModalStorage.parentPageId;\n    this.pageId = _utils_js__WEBPACK_IMPORTED_MODULE_1__.ModalStorage.pageId;\n    this.rootId = _utils_js__WEBPACK_IMPORTED_MODULE_1__.ModalStorage.rootPageId;\n  } else {\n    _utils_js__WEBPACK_IMPORTED_MODULE_1__.ModalStorage.rootPageId = this.pageId;\n    this.rootId = this.pageId;\n    this.parentId = this.pageId;\n  }\n  \n  this._createContainer();\n  this._initWndButtons();\n  \n  this._initSocket();\n  \n  //. set parent_id and page_id for test \n  \n  var html = document.querySelector(\"html\");\n  html.setAttribute(\"test-parent_id\", this.parentId);\n  html.setAttribute(\"test-page_id\", this.pageId);\n}\n\nCoCreateWindow.prototype = {\n  _checkRoot: function() {\n    try {\n        return window.self === window.top;\n    } catch (e) {\n        return false;\n    }\n  },\n  _createContainer: function() {\n    if (this.container) return true;\n\n    var el = document.getElementById(this.id);\n    if (el) {\n      this.container = new _container_js__WEBPACK_IMPORTED_MODULE_0__.default(el);\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  _initWndButtons: function() {\n    var closeBtns = document.querySelectorAll('.btn-modal-close');\n    var minmaxBtn = document.querySelector('.btn-modal-maximize');\n    var parkBtn = document.querySelector('.btn-modal-minimize');\n    var _this = this;\n    \n    if (closeBtns.length > 0) {\n      for (var i=0; i < closeBtns.length; i++) {\n        var closeBtn = closeBtns[i];\n        closeBtn.addEventListener('click', function(e) {\n          e.preventDefault();\n          _this.sendWindowBtnEvent('close');\n        })  \n      }\n    }\n    \n    if (minmaxBtn) {\n      minmaxBtn.addEventListener('click', function(e) {\n        e.preventDefault();\n        _this.sendWindowBtnEvent('maximize');\n        // let state = this.getAttribute('data-state');\n        \n        // if (state == 'min') {\n        //   _this.sendWindowBtnEvent('minimize');\n        //   this.setAttribute('data-state', 'max');\n        // } else {\n        //   _this.sendWindowBtnEvent('maximize');\n        //   this.setAttribute('data-state', 'min');\n        // }\n      })\n    }\n    \n    if (parkBtn) {\n      parkBtn.addEventListener('click', function(e) {\n        e.preventDefault();\n        _this.sendWindowBtnEvent('park');\n      })\n    }\n  },\n  \n  sendWindowBtnEvent: function(type) {\n    var json = {\n      \"apiKey\": config.apiKey,\n      \"securityKey\": config.securityKey,\n      \"organization_id\": config.organization_Id,\n      \"data\": {\n        \"parentId\": this.parentId,\n        \"pageId\": this.pageId,\n        \"type\": type,\n        \"author\": \"jin\"\n      }\n    }\n\n    _cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_4__.socket.send('windowBtnEvent', json);\n  },\n  \n  _initSocket: function() {\n    var _this = this;\n    _cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_4__.socket.listen('openWindow', function(data) {\n      if (data.parentId == _this.pageId) {\n        _this.container._createModal(data);\n      }\n      // if (data.parentId == _this.pageId) {\n      //   _this.container._createModal(data);\n      // }\n    }),\n    \n    _cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_4__.socket.listen('windowBtnEvent', function(data) {\n      if (data.parentId == _this.pageId) {\n        \n        var pageId = data.pageId;\n        var type = data.type;\n        \n        var modal = _this.container.getModalById(pageId);\n        \n        if (modal) {\n          switch (type) {\n            case 'close':\n               _this.container._removeModal(modal)\n              break;\n            case 'maximize':\n              // minimizeWindow(w);\n              modal._setMaximize();\n              break;\n            case 'park':\n              modal.togglePark();\n              break;\n            default:\n          }          \n        }\n      }\n    })\n  },\n  \n  open: function(aTag) {\n    this.openWindow(aTag);\n  },\n   \n  openWindow: function(aTag) {\n    \n    var attr = {\n      url:    aTag.getAttribute('href'),\n      x:      aTag.getAttribute('data-modal_x'),\n      y:      aTag.getAttribute('data-modal_y'),\n      width:  aTag.getAttribute('data-modal_width'),\n      height: aTag.getAttribute('data-modal_height'),\n      ajax:   aTag.getAttribute('data-modal_ajax'),\n      color:  aTag.getAttribute('data-modal_color'),\n      header: aTag.getAttribute('data-modal_header') ? aTag.getAttribute('data-modal_header'): \"true\", \n      \n      attributes: _cocreate_utils__WEBPACK_IMPORTED_MODULE_3__.default.getAttributes(aTag)\n    }\n    \n    var open_type = aTag.getAttribute('data-modal_open');\n    open_type = open_type ? open_type : 'root';\n    \n    _utils_js__WEBPACK_IMPORTED_MODULE_1__.ModalStorage.rootPageId = this.rootId;\n    \n    var open_id = open_type;\n    // if (this.isRoot) {\n    //   ModalStorage.parentPageId = this.pageId;\n    // } else {\n      switch (open_type) {\n        case 'parent':\n          open_id = this.parentId;\n          break;\n        case 'page':\n          open_id = this.pageId;\n          break;\n        case 'root':\n          open_id = this.rootId;\n          break;\n        default:\n          open_id = open_type;\n          break;\n          // code\n      }\n    _utils_js__WEBPACK_IMPORTED_MODULE_1__.ModalStorage.parentPageId = open_id;\n    \n    attr.parentId = open_id;\n    // }\n    \n    if (this.isRoot) {\n      if (this._createContainer()) {\n        this.container._createModal(attr);  \n      }\n    } else {\n      // attr.parentId = this.parentId;\n      _cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_4__.socket.send('openWindow', {\n        \"apiKey\": config.apiKey,\n        \"securityKey\": config.securityKey,\n        \"organization_id\": config.organization_Id,\n         data: attr\n      })\n    }\n  },\n}\n\nlet CoCreateModal = new CoCreateWindow();\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CoCreateModal);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5hdHRyaWJ1dGVzLy4uLy4uL0NvQ3JlYXRlSlMvbm9kZV9tb2R1bGVzL0Bjb2NyZWF0ZS9tb2RhbC9zcmMvaW5kZXguanM/OTY3OSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTJDO0FBQ1k7QUFDYjtBQUNOO0FBQ2M7QUFDcEI7O0FBRTlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGdCQUFnQix1REFBWTtBQUM1Qjs7O0FBR0E7QUFDQSxvQkFBb0IsZ0VBQXlCO0FBQzdDLGtCQUFrQiwwREFBbUI7QUFDckMsa0JBQWtCLDhEQUF1QjtBQUN6QyxHQUFHO0FBQ0gsSUFBSSw4REFBdUI7QUFDM0I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQSwyQkFBMkIsa0RBQWM7QUFDekM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1CQUFtQixzQkFBc0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxJQUFJLDZEQUFXO0FBQ2YsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsSUFBSSwrREFBYTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMLElBQUksK0RBQWE7QUFDakI7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFc7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtCQUFrQixrRUFBbUI7QUFDckM7O0FBRUE7QUFDQTs7QUFFQSxJQUFJLDhEQUF1Qjs7QUFFM0I7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksZ0VBQXlCOztBQUU3QjtBQUNBOztBQUVBO0FBQ0E7QUFDQSwwQztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsTUFBTSw2REFBVztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQSxpRUFBZSxhQUFhIiwiZmlsZSI6Ii4uLy4uL0NvQ3JlYXRlSlMvbm9kZV9tb2R1bGVzL0Bjb2NyZWF0ZS9tb2RhbC9zcmMvaW5kZXguanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTW9kYWxDb250YWluZXIgZnJvbSBcIi4vY29udGFpbmVyLmpzXCJcbmltcG9ydCB7IGdlbmVyYXRlVVVJRCwgTW9kYWxTdG9yYWdlIH0gZnJvbSBcIi4vdXRpbHMuanNcIlxuaW1wb3J0IG9ic2VydmVyIGZyb20gJ0Bjb2NyZWF0ZS9vYnNlcnZlcic7XG5pbXBvcnQgdXRpbHMgZnJvbSAnQGNvY3JlYXRlL3V0aWxzJztcbmltcG9ydCB7c29ja2V0LCBjcnVkfSBmcm9tICdAY29jcmVhdGUvY29jcmVhdGVqcyc7XG5pbXBvcnQgJy4vQ29DcmVhdGUtbW9kYWwuY3NzJztcblxuZnVuY3Rpb24gQ29DcmVhdGVXaW5kb3coaWQpIHtcbiAgbGV0IGNvbnRhaW5lcl9pZCA9IChpZCkgPyBpZCA6ICdtb2RhbC12aWV3cG9ydCc7XG4gIHRoaXMuY29udGFpbmVyID0gbnVsbDtcbiAgdGhpcy5pZCA9IGNvbnRhaW5lcl9pZDtcbiAgXG4gIHRoaXMucGFnZUlkID0gZ2VuZXJhdGVVVUlEKDIwKTtcbiAgdGhpcy5pc1Jvb3QgPSB0aGlzLl9jaGVja1Jvb3QoKTtcbiAgXG4gIFxuICBpZiAoIXRoaXMuaXNSb290KSB7XG4gICAgdGhpcy5wYXJlbnRJZCA9IE1vZGFsU3RvcmFnZS5wYXJlbnRQYWdlSWQ7XG4gICAgdGhpcy5wYWdlSWQgPSBNb2RhbFN0b3JhZ2UucGFnZUlkO1xuICAgIHRoaXMucm9vdElkID0gTW9kYWxTdG9yYWdlLnJvb3RQYWdlSWQ7XG4gIH0gZWxzZSB7XG4gICAgTW9kYWxTdG9yYWdlLnJvb3RQYWdlSWQgPSB0aGlzLnBhZ2VJZDtcbiAgICB0aGlzLnJvb3RJZCA9IHRoaXMucGFnZUlkO1xuICAgIHRoaXMucGFyZW50SWQgPSB0aGlzLnBhZ2VJZDtcbiAgfVxuICBcbiAgdGhpcy5fY3JlYXRlQ29udGFpbmVyKCk7XG4gIHRoaXMuX2luaXRXbmRCdXR0b25zKCk7XG4gIFxuICB0aGlzLl9pbml0U29ja2V0KCk7XG4gIFxuICAvLy4gc2V0IHBhcmVudF9pZCBhbmQgcGFnZV9pZCBmb3IgdGVzdCBcbiAgXG4gIHZhciBodG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImh0bWxcIik7XG4gIGh0bWwuc2V0QXR0cmlidXRlKFwidGVzdC1wYXJlbnRfaWRcIiwgdGhpcy5wYXJlbnRJZCk7XG4gIGh0bWwuc2V0QXR0cmlidXRlKFwidGVzdC1wYWdlX2lkXCIsIHRoaXMucGFnZUlkKTtcbn1cblxuQ29DcmVhdGVXaW5kb3cucHJvdG90eXBlID0ge1xuICBfY2hlY2tSb290OiBmdW5jdGlvbigpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gd2luZG93LnNlbGYgPT09IHdpbmRvdy50b3A7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LFxuICBfY3JlYXRlQ29udGFpbmVyOiBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5jb250YWluZXIpIHJldHVybiB0cnVlO1xuXG4gICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5pZCk7XG4gICAgaWYgKGVsKSB7XG4gICAgICB0aGlzLmNvbnRhaW5lciA9IG5ldyBNb2RhbENvbnRhaW5lcihlbCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSxcblxuICBfaW5pdFduZEJ1dHRvbnM6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjbG9zZUJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnRuLW1vZGFsLWNsb3NlJyk7XG4gICAgdmFyIG1pbm1heEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4tbW9kYWwtbWF4aW1pemUnKTtcbiAgICB2YXIgcGFya0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4tbW9kYWwtbWluaW1pemUnKTtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIFxuICAgIGlmIChjbG9zZUJ0bnMubGVuZ3RoID4gMCkge1xuICAgICAgZm9yICh2YXIgaT0wOyBpIDwgY2xvc2VCdG5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjbG9zZUJ0biA9IGNsb3NlQnRuc1tpXTtcbiAgICAgICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIF90aGlzLnNlbmRXaW5kb3dCdG5FdmVudCgnY2xvc2UnKTtcbiAgICAgICAgfSkgIFxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpZiAobWlubWF4QnRuKSB7XG4gICAgICBtaW5tYXhCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgX3RoaXMuc2VuZFdpbmRvd0J0bkV2ZW50KCdtYXhpbWl6ZScpO1xuICAgICAgICAvLyBsZXQgc3RhdGUgPSB0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS1zdGF0ZScpO1xuICAgICAgICBcbiAgICAgICAgLy8gaWYgKHN0YXRlID09ICdtaW4nKSB7XG4gICAgICAgIC8vICAgX3RoaXMuc2VuZFdpbmRvd0J0bkV2ZW50KCdtaW5pbWl6ZScpO1xuICAgICAgICAvLyAgIHRoaXMuc2V0QXR0cmlidXRlKCdkYXRhLXN0YXRlJywgJ21heCcpO1xuICAgICAgICAvLyB9IGVsc2Uge1xuICAgICAgICAvLyAgIF90aGlzLnNlbmRXaW5kb3dCdG5FdmVudCgnbWF4aW1pemUnKTtcbiAgICAgICAgLy8gICB0aGlzLnNldEF0dHJpYnV0ZSgnZGF0YS1zdGF0ZScsICdtaW4nKTtcbiAgICAgICAgLy8gfVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgaWYgKHBhcmtCdG4pIHtcbiAgICAgIHBhcmtCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgX3RoaXMuc2VuZFdpbmRvd0J0bkV2ZW50KCdwYXJrJyk7XG4gICAgICB9KVxuICAgIH1cbiAgfSxcbiAgXG4gIHNlbmRXaW5kb3dCdG5FdmVudDogZnVuY3Rpb24odHlwZSkge1xuICAgIHZhciBqc29uID0ge1xuICAgICAgXCJhcGlLZXlcIjogY29uZmlnLmFwaUtleSxcbiAgICAgIFwic2VjdXJpdHlLZXlcIjogY29uZmlnLnNlY3VyaXR5S2V5LFxuICAgICAgXCJvcmdhbml6YXRpb25faWRcIjogY29uZmlnLm9yZ2FuaXphdGlvbl9JZCxcbiAgICAgIFwiZGF0YVwiOiB7XG4gICAgICAgIFwicGFyZW50SWRcIjogdGhpcy5wYXJlbnRJZCxcbiAgICAgICAgXCJwYWdlSWRcIjogdGhpcy5wYWdlSWQsXG4gICAgICAgIFwidHlwZVwiOiB0eXBlLFxuICAgICAgICBcImF1dGhvclwiOiBcImppblwiXG4gICAgICB9XG4gICAgfVxuXG4gICAgc29ja2V0LnNlbmQoJ3dpbmRvd0J0bkV2ZW50JywganNvbik7XG4gIH0sXG4gIFxuICBfaW5pdFNvY2tldDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICBzb2NrZXQubGlzdGVuKCdvcGVuV2luZG93JywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgaWYgKGRhdGEucGFyZW50SWQgPT0gX3RoaXMucGFnZUlkKSB7XG4gICAgICAgIF90aGlzLmNvbnRhaW5lci5fY3JlYXRlTW9kYWwoZGF0YSk7XG4gICAgICB9XG4gICAgICAvLyBpZiAoZGF0YS5wYXJlbnRJZCA9PSBfdGhpcy5wYWdlSWQpIHtcbiAgICAgIC8vICAgX3RoaXMuY29udGFpbmVyLl9jcmVhdGVNb2RhbChkYXRhKTtcbiAgICAgIC8vIH1cbiAgICB9KSxcbiAgICBcbiAgICBzb2NrZXQubGlzdGVuKCd3aW5kb3dCdG5FdmVudCcsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIGlmIChkYXRhLnBhcmVudElkID09IF90aGlzLnBhZ2VJZCkge1xuICAgICAgICBcbiAgICAgICAgdmFyIHBhZ2VJZCA9IGRhdGEucGFnZUlkO1xuICAgICAgICB2YXIgdHlwZSA9IGRhdGEudHlwZTtcbiAgICAgICAgXG4gICAgICAgIHZhciBtb2RhbCA9IF90aGlzLmNvbnRhaW5lci5nZXRNb2RhbEJ5SWQocGFnZUlkKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChtb2RhbCkge1xuICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnY2xvc2UnOlxuICAgICAgICAgICAgICAgX3RoaXMuY29udGFpbmVyLl9yZW1vdmVNb2RhbChtb2RhbClcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtYXhpbWl6ZSc6XG4gICAgICAgICAgICAgIC8vIG1pbmltaXplV2luZG93KHcpO1xuICAgICAgICAgICAgICBtb2RhbC5fc2V0TWF4aW1pemUoKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdwYXJrJzpcbiAgICAgICAgICAgICAgbW9kYWwudG9nZ2xlUGFyaygpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgfSAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH0sXG4gIFxuICBvcGVuOiBmdW5jdGlvbihhVGFnKSB7XG4gICAgdGhpcy5vcGVuV2luZG93KGFUYWcpO1xuICB9LFxuICAgXG4gIG9wZW5XaW5kb3c6IGZ1bmN0aW9uKGFUYWcpIHtcbiAgICBcbiAgICB2YXIgYXR0ciA9IHtcbiAgICAgIHVybDogICAgYVRhZy5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSxcbiAgICAgIHg6ICAgICAgYVRhZy5nZXRBdHRyaWJ1dGUoJ2RhdGEtbW9kYWxfeCcpLFxuICAgICAgeTogICAgICBhVGFnLmdldEF0dHJpYnV0ZSgnZGF0YS1tb2RhbF95JyksXG4gICAgICB3aWR0aDogIGFUYWcuZ2V0QXR0cmlidXRlKCdkYXRhLW1vZGFsX3dpZHRoJyksXG4gICAgICBoZWlnaHQ6IGFUYWcuZ2V0QXR0cmlidXRlKCdkYXRhLW1vZGFsX2hlaWdodCcpLFxuICAgICAgYWpheDogICBhVGFnLmdldEF0dHJpYnV0ZSgnZGF0YS1tb2RhbF9hamF4JyksXG4gICAgICBjb2xvcjogIGFUYWcuZ2V0QXR0cmlidXRlKCdkYXRhLW1vZGFsX2NvbG9yJyksXG4gICAgICBoZWFkZXI6IGFUYWcuZ2V0QXR0cmlidXRlKCdkYXRhLW1vZGFsX2hlYWRlcicpID8gYVRhZy5nZXRBdHRyaWJ1dGUoJ2RhdGEtbW9kYWxfaGVhZGVyJyk6IFwidHJ1ZVwiLCBcbiAgICAgIFxuICAgICAgYXR0cmlidXRlczogdXRpbHMuZ2V0QXR0cmlidXRlcyhhVGFnKVxuICAgIH1cbiAgICBcbiAgICB2YXIgb3Blbl90eXBlID0gYVRhZy5nZXRBdHRyaWJ1dGUoJ2RhdGEtbW9kYWxfb3BlbicpO1xuICAgIG9wZW5fdHlwZSA9IG9wZW5fdHlwZSA/IG9wZW5fdHlwZSA6ICdyb290JztcbiAgICBcbiAgICBNb2RhbFN0b3JhZ2Uucm9vdFBhZ2VJZCA9IHRoaXMucm9vdElkO1xuICAgIFxuICAgIHZhciBvcGVuX2lkID0gb3Blbl90eXBlO1xuICAgIC8vIGlmICh0aGlzLmlzUm9vdCkge1xuICAgIC8vICAgTW9kYWxTdG9yYWdlLnBhcmVudFBhZ2VJZCA9IHRoaXMucGFnZUlkO1xuICAgIC8vIH0gZWxzZSB7XG4gICAgICBzd2l0Y2ggKG9wZW5fdHlwZSkge1xuICAgICAgICBjYXNlICdwYXJlbnQnOlxuICAgICAgICAgIG9wZW5faWQgPSB0aGlzLnBhcmVudElkO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdwYWdlJzpcbiAgICAgICAgICBvcGVuX2lkID0gdGhpcy5wYWdlSWQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3Jvb3QnOlxuICAgICAgICAgIG9wZW5faWQgPSB0aGlzLnJvb3RJZDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBvcGVuX2lkID0gb3Blbl90eXBlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIC8vIGNvZGVcbiAgICAgIH1cbiAgICBNb2RhbFN0b3JhZ2UucGFyZW50UGFnZUlkID0gb3Blbl9pZDtcbiAgICBcbiAgICBhdHRyLnBhcmVudElkID0gb3Blbl9pZDtcbiAgICAvLyB9XG4gICAgXG4gICAgaWYgKHRoaXMuaXNSb290KSB7XG4gICAgICBpZiAodGhpcy5fY3JlYXRlQ29udGFpbmVyKCkpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIuX2NyZWF0ZU1vZGFsKGF0dHIpOyAgXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGF0dHIucGFyZW50SWQgPSB0aGlzLnBhcmVudElkO1xuICAgICAgc29ja2V0LnNlbmQoJ29wZW5XaW5kb3cnLCB7XG4gICAgICAgIFwiYXBpS2V5XCI6IGNvbmZpZy5hcGlLZXksXG4gICAgICAgIFwic2VjdXJpdHlLZXlcIjogY29uZmlnLnNlY3VyaXR5S2V5LFxuICAgICAgICBcIm9yZ2FuaXphdGlvbl9pZFwiOiBjb25maWcub3JnYW5pemF0aW9uX0lkLFxuICAgICAgICAgZGF0YTogYXR0clxuICAgICAgfSlcbiAgICB9XG4gIH0sXG59XG5cbmxldCBDb0NyZWF0ZU1vZGFsID0gbmV3IENvQ3JlYXRlV2luZG93KCk7XG5cbmV4cG9ydCBkZWZhdWx0IENvQ3JlYXRlTW9kYWw7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../CoCreateJS/node_modules/@cocreate/modal/src/index.js\n")},"../../CoCreateJS/node_modules/@cocreate/modal/src/modal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ "../../CoCreateJS/node_modules/@cocreate/modal/src/utils.js");\n\n\n\nfunction Modal(el, options, container) {\n  if (!(el && el.nodeType && el.nodeType === 1)) {\n\t\treturn;\n\t}\n  \n  /** define constant **/\t\n\tthis.MARGIN = 5;\n\tthis.FULLSCREEN_MARGIN = -20;\n\tthis.NO_SNAP = -31;\n\tthis.SNAP_MARGIN = -10;\n\t\n\tthis.RIGHT_SCROL = 5;\n\t\n// \tif (window.mobilecheck()) {\n// \t  this.MARGIN = 20;\n// \t}\n\t\n\t/** options **/\n\tlet defaults = {\n\t  minWidth: 60,\n\t  minHeight: 40,\n\t};\n\t\n\tthis.id = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.generateUUID)(20);\n\tthis.el = el;\n\tthis.clicked = null;\n\tthis.redraw = false;\n\t\n\tthis.boundStatus = {};\n\t\n\t/**\n\t * x: mouse x in element\n\t * y: mouse y in element\n\t * cx: x in document\n\t * cy: y in document\n\t * */\n\tthis.point = {};\n\tthis.rect = {};\n\tthis.clickedInfo = null;\n\tthis.preSnapped = null;\n\tthis.prevRect = {};\n\tthis.isSnap = false;\n\tthis.isHeader = true;\n\t\n\tthis.dragArea = null;\n\tthis.headerArea = null;\n\t\n\tthis.width = 0;\n\tthis.height = 0;\n\tthis.isParked = false;\n\t\n\tthis.iframe = null;\n\tthis.container = container;\n\t\n\n\tthis.options = Object.assign(defaults, options);\n\t\n\tthis.el.setAttribute("id", this.id);\n\t\n  window.localStorage.setItem(\'page_id\', this.id)\n  \n\tthis._init();\n\tthis._setModalSize();\n  this._initEvent();\n  this.__animate();\n  \n}\n\nModal.prototype = {\n  constructor: Modal,\n  \n  _init : function() {\n    var opt = this.options;\n    \n    this.isAjax =   opt.ajax  ? opt.ajax    : this.el.getAttribute("data-modal_ajax")\n    var windowURL = opt.url   ? opt.url     : this.el.getAttribute("href");\n    var width =     opt.width ? opt.width   : this.el.getAttribute("data-modal_width");\n    var height =    opt.height? opt.height  : this.el.getAttribute("data-modal_height");\n    var color =     opt.color ? opt.color   : this.el.getAttribute("data-modal_color");\n    var x =         opt.x     ? opt.x       : this.el.getAttribute("data-modal_x")\n    var y =         opt.y     ? opt.y       : this.el.getAttribute("data-modal_y")\n    var showHeader= opt.header? opt.header  : this.el.getAttribute("data-modal_header")\n    \n    var attributes = opt.attributes;\n    \n    //. set default\n    // this.el.style.width = "300px";\n    // this.el.style.height = "100%";\n    // this.el.style.left = 0;\n    // this.el.style.right = 0;\n    // this.el.style.borderColor = "#888";\n    \n    if (width && width != "") {\n      this.el.style.width = width;\n    } else {\n      this.el.style.width = "600px";\n    }\n    if (height && height != "") {\n      this.el.style.height = height;\n    } else {\n      this.el.style.height = "100%";\n    }\n    \n    if (this.el.parentElement.clientWidth < this.el.clientWidth) {\n      this.el.style.width = "100%"\n    }\n    if (this.el.parentElement.clientHeight < this.el.clientHeight) {\n      this.el.style.width = "100%"\n    }\n\n\n    if (x && x != "") {\n      this.el.style.left = x;\n    } else {\n      let hX = (this.el.parentElement.clientWidth - this.el.offsetWidth) / 2;\n      hX = hX > 0 ? hX : 0;\n      this.el.style.left = hX + "px";\n    }\n    if (y && y != "") {\n      this.el.style.top = y;\n    } else {\n      let hY = (this.el.parentElement.clientHeight - this.el.offsetHeight) / 2\n      hY = hY > 0 ? hY : 0\n      this.el.style.top = hY + "px";\n    }\n    if (color && color !== "") this.el.style.borderColor = color;\n    \n    if (showHeader == "true") {\n      this.isHeader = true;\n      this._createTitle();\n    } else {\n      this.isHeader = false;\n      this._createDragArea();\n    }\n    \n    this.el.innerHTML = this.el.innerHTML + `<div class="parked-closeBtn"><i class="fas fa-times closeBtn"></i></div>`;\n    \n    let iframe = null;\n    if (windowURL && windowURL != "") {\n      iframe = this.__createContainer(this.headerArea);\n      iframe.src = windowURL;\n    } else if (attributes) {\n      iframe = this.__createContainer(this.headerArea, attributes[\'data-modal_iframe\'] === "false" ? "div" : "iframe");\n      if (attributes[\'data-pass_to\']) {\n        iframe.setAttribute(\'data-pass_id\', attributes[\'data-pass_to\']);\n        iframe.setAttribute(\'data-collection\', "");\n        iframe.setAttribute(\'data-document_id\', "");\n        iframe.setAttribute(\'data-request_id\', (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.generateUUID)(20));\n      }\n      if (attributes[\'data-pass_name\']) {\n        iframe.setAttribute(\'name\', attributes[\'data-pass_name\']);\n      }\n    } else {\n      return;\n    }\n    \n    this.el.appendChild(iframe)\n    this.iframe = iframe;\n  },\n  \n  __createContainer: function(isHeader, type) {\n    const tag = type || "iframe";\n    \n    let container = document.createElement(tag);\n    container.style.width = "100%";\n    container.style.height = "100%";\n    if (isHeader) {\n      container.style.height = "calc(100% - 45px)";\n    }\n    \n    if (type != "iframe") {\n      container.setAttribute(\'class\', \'domEditor\');\n    }\n    return container;\n  },\n  \n  _initEvent : function() {\n    let self = this;\n    \n    if (this.iframe) {\n      this.iframe.addEventListener(\'load\', function() {\n        console.log(self.iframe.contentDocument);\n        const iframeContent = self.iframe.contentDocument;\n        const nav = iframeContent.querySelector(\'.nav\');\n        \n        iframeContent.addEventListener(\'click\', function() {\n           var event = new CustomEvent("cocreate-selectmodal", {detail: {modal: self}});\n          self.el.parentNode.dispatchEvent(event);\n        })\n      });\n    }\n\n    this.el.addEventListener("click", function(e) {\n      var event = new CustomEvent("cocreate-selectmodal", {detail: {modal: self}});\n      self.el.parentNode.dispatchEvent(event);\n    }, true)\n    \n    this.el.addEventListener("dblclick", function(e) {\n      if (self.isParked) {\n        self.isParked = false;\n        self.el.classList.remove("modal-parked");\n      } \n    })\n    \n    this.el.addEventListener(\'modal-resizing\', function(e) {\n      console.log(\'resizing event trigger\')\n    })\n    this.el.addEventListener(\'touchstart\', function(e) {\n      self.changeRightDragEl(true);\n      var event = new CustomEvent("cocreate-selectmodal", {detail: {modal: self}});\n      self.el.parentNode.dispatchEvent(event);\n      self._onDown(e.touches[0]);\n    })\n    \n    this.el.addEventListener(\'mousemove\', function(e) {\n        self.changeRightDragEl(false);\n    })\n    \n    this.el.addEventListener(\'mousedown\', function(e) {\n      \n      var event = new CustomEvent("cocreate-selectmodal", {detail: {modal: self}});\n      self.el.parentNode.dispatchEvent(event);\n      self._onDown(e);\n    })\n    \n    this.el.addEventListener(\'mouseup\', function(e) {\n        // self.changeRightDragEl(true);\n    })\n\n    this._addButtonEvent()\n    this.el.addEventListener("modal-resizeend", function(e) {\n      self._saveFetch();\n      // self.changeRightDragEl(true);\n\n    });\n    \n    this.el.addEventListener("modal-moveend", function(e) {\n      self._saveFetch();\n      // self.changeRightDragEl(true);\n\n    })\n  },\n  \n  changeRightDragEl: function(isRevert = true) {\n      const right_el = this.el.querySelector(\'.modal-drag-area-right\')\n      \n      const size = isRevert ? "0px" : "-10px"\n      if (right_el) {\n        right_el.style.right = size;\n      }\n      this.RIGHT_SCROL = !isRevert ? 0 : 5;\n      \n  },\n  \n  _addButtonEvent: function() {\n    var self = this;\n    if (this.el.querySelector(".modal-title-area .closeBtn")) {\n      this.el.querySelector(".modal-title-area .closeBtn").addEventListener("click", function(e) {\n        e.preventDefault();\n        self.el.parentNode.dispatchEvent(new CustomEvent("cocreate-removemodal", {detail: {modal:self}}));\n      })\n    }\n    \n    if (this.el.querySelector(".parked-closeBtn .closeBtn")) {\n      this.el.querySelector(".parked-closeBtn .closeBtn").addEventListener("click", function(e) {\n        e.preventDefault();\n        self.el.parentNode.dispatchEvent(new CustomEvent("cocreate-removemodal", {detail: {modal:self}}));\n      })\n    }\n    \n    if (this.el.querySelector(".modal-title-area .maximizeBtn")) {\n      this.el.querySelector(".modal-title-area .maximizeBtn").addEventListener("click", function(e) {\n        e.preventDefault();\n        self._setMaximize();\n      })\n    }\n    \n    if (this.el.querySelector(".modal-title-area .minimizeBtn")) {\n      this.el.querySelector(".modal-title-area .minimizeBtn").addEventListener("click", function(e) {\n        e.preventDefault();\n        self.togglePark()\n      })\n    }\n    \n    // if (this.el.querySelector(".modal-title-area .parkBtn")) {\n    //   this.el.querySelector(".modal-title-area .parkBtn").addEventListener("click", function(e) {\n    //     self.togglePark()\n    //   })\n    // }\n  },\n  \n  togglePark: function() {\n    \n    if (this.isParked) {\n      this.isParked = false;\n      this.el.classList.remove("modal-parked");\n    } else {\n      this.isParked = true;\n      this.el.classList.add("modal-parked")\n    }\n  },\n  \n  _setModalSize: function() {\n    let bound = this.el.getBoundingClientRect();\n    let parentBound = this.el.parentNode.getBoundingClientRect();\n    this.width = bound.width;\n    this.height = bound.height;\n    \n    this.el.style.left = bound.left - parentBound.left;\n    this.el.style.top = bound.top - parentBound.top;\n  },\n  \n  _saveFetch: function() {\n    if (this.el.classList.contains("domEditor")) {\n      CoCreateHtmlTags.save(this.el);\n    }\n  },\n  \n  _onMove : function(e) {\n    const data = this.__getBoundStatus(e)\n    this.redraw = true;\n  },\n  \n  _onDown : function(e) {\n    //. set clicked\n\n    this.__getBoundStatus(e);\n\n    var isResizing = this.boundStatus.isRight || this.boundStatus.isLeft || this.boundStatus.isTop || this.boundStatus.isBottom;\n    \n    this.clickedInfo = {\n      x: this.point.x,\n      y: this.point.y,\n      cx: this.point.cx,\n      cy: this.point.cy,\n      w: this.rect.width,\n      h: this.rect.height,\n      isResizing: isResizing,\n      isMoving: !isResizing && this._isMovable(),\n      boundStatus : this.boundStatus,\n      isChangeStart: true\n    }\n  },\n  \n  _onUp: function(e) {\n    if (e) {\n      this.__getBoundStatus(e);\n    }\n    if (!this.clickedInfo) {\n      return;\n    }\n    if (this.clickedInfo.isMoving && !this.isParked) {\n      let p_w = this.el.parentNode.offsetWidth, p_h = this.el.parentNode.offsetHeight;\n      let snap_info = null;\n      \n      if (this.__between(this.rect.top, this.NO_SNAP, this.FULLSCREEN_MARGIN) ||\n          this.__between(this.rect.left, this.NO_SNAP, this.FULLSCREEN_MARGIN) ||\n          this.__between(p_w - this.rect.right, this.NO_SNAP, this.FULLSCREEN_MARGIN) ||\n          this.__between(p_h - this.rect.bottom, this.NO_SNAP, this.FULLSCREEN_MARGIN)) {\n          snap_info = {x: 0, y: 0, w:\'100%\', h:\'100%\'}\n      } else if (this.__between(this.rect.top, this.NO_SNAP, this.SNAP_MARGIN)) {\n          snap_info = {x: 0, y: 0, w:\'100%\', h:\'50%\'}\n      } else if (this.__between(this.rect.left, this.NO_SNAP, this.SNAP_MARGIN)) {\n          snap_info = {x: 0, y: 0, w:\'50%\', h:\'100%\'} \n      } else if (this.__between(p_w - this.rect.right, this.NO_SNAP, this.SNAP_MARGIN)) {\n          snap_info = {x: \'50%\', y: 0, w: \'50%\', h:\'100%\'}\n      } else if (this.__between(p_h - this.rect.bottom, this.NO_SNAP, this.SNAP_MARGIN)) {\n          snap_info = {x: 0, y: \'50%\', w: \'100%\', h: \'50%\'}\n      }\n\n      if (snap_info && !this.isSnap) {\n        this.__setBound(this.el, snap_info.x, snap_info.y, snap_info.w, snap_info.h);\n        this.preSnapped = {x: this.rect.x, y: this.rect.y, width: this.rect.width, height: this.rect.height};\n        this.isSnap = true;\n      } \n      \n      var ghost_info = {\n        x: this.rect.x,\n        y: this.rect.y,\n        w: this.rect.width,\n        h: this.rect.height\n      }\n      this.el.parentNode.dispatchEvent(new CustomEvent("cocreate-modalghost", {detail: ghost_info}));\n    }\n\n    if (this.clickedInfo.isResizing) {\n      this.createModalEvent(\'modal-resizeend\');\n      this._setModalSize()\n      this.isSnap = false;\n    } else if (this.clickedInfo.isMoving) {\n      this.createModalEvent(\'modal-moveend\');\n    }\n    \n    \n    this.clickedInfo = null;\n  },\n  \n  __setBound : function(el, x, y, w, h) {\n    var borderHeight = this.el.offsetHeight - this.el.clientHeight;\n    var borderWidth = this.el.offsetWidth - this.el.clientWidth;\n    el.style.left = x;\n    el.style.top = y;\n    // el.style.width = "calc( " + w + " - " + borderWidth + "px )";\n    // el.style.height = "calc( "  + h + " - " + borderHeight + "px )";\n    el.style.width = w;\n    el.style.height = h;\n  },\n  \n  __setRectInfo: function() {\n    let bound = this.el.getBoundingClientRect();\n    let parentRect = this.el.parentNode.getBoundingClientRect();\n    this.rect = {};\n    this.rect.x = bound.x - parentRect.x;\n    this.rect.y = bound.y - parentRect.y;\n    this.rect.width = bound.width;\n    this.rect.height = bound.height;\n    this.rect.top = bound.top - parentRect.top;\n    this.rect.bottom = bound.bottom - parentRect.top;\n    this.rect.left = bound.left - parentRect.left;\n    this.rect.right = bound.right - parentRect.left;\n  },\n  \n  __getBoundStatus : function(e) {\n    let bound = this.el.getBoundingClientRect();\n    let parentRect = this.el.parentNode.getBoundingClientRect();\n    let x = e.clientX - bound.left;// - parentRect.left;\n    let y = e.clientY - bound.top;// - parentRect.top;\n\n    this.__setRectInfo();\n\n    this.point.x = x;\n    this.point.y = y;\n    this.point.cx = e.clientX - parentRect.left;\n    this.point.cy = e.clientY - parentRect.top;\n\n    this.boundStatus = {\n      isTop : y < this.MARGIN && y > -this.MARGIN,\n      isLeft : x < this.MARGIN && x > -this.MARGIN,\n      isRight : x >= bound.width - this.RIGHT_SCROL && x <= bound.width + this.MARGIN + (this.MARGIN - this.RIGHT_SCROL),\n      isBottom: y >= bound.height - this.MARGIN && y <= bound.height + this.MARGIN\n    }\n    \n    return this.boundStatus;\n  },\n  \n  __between: function(x, min, max) {\n    return x >= min && x <= max;\n  },\n  \n  __animate : function() {\n    let self = this;\n    requestAnimationFrame(function() {\n      self.__animate();\n    });\n    \n    if (!this.redraw) {\n      return;\n    }\n    this.redraw = false;\n    \n    let c_info = this.clickedInfo;\n    \n    var eventName = null;\n    \n    /**\n     * Resize process\n     **/\n    if (c_info && c_info.isResizing && !this.isParked) {\n      if (c_info.boundStatus.isRight) \n        this.el.style.width = Math.max(this.point.x, this.options.minWidth) + \'px\';\n\n      if (c_info.boundStatus.isBottom) {\n        this.el.style.height = Math.max(this.point.y, this.options.minHeight) + \'px\';\n      }\n      \n      if (c_info.boundStatus.isLeft) {\n        var c_width = Math.max(c_info.cx - this.point.cx + c_info.w, this.options.minWidth);\n        if (c_width > this.options.minWidth) {\n          this.el.style.width = c_width + \'px\';\n          this.el.style.left = this.point.cx + \'px\';\n        }\n      }\n      \n      if (c_info.boundStatus.isTop) {\n        var c_height = Math.max(c_info.cy - this.point.cy + c_info.h, this.options.minHeight);\n        if (c_height > this.options.minHeight) {\n          this.el.style.height = c_height + \'px\';\n          this.el.style.top = this.point.cy + \'px\';\n        }\n      }\n      \n      eventName = "modal-resizing";\n      if (c_info.isChangeStart) {\n        this.clickedInfo.isChangeStart = false;\n        eventName = "modal-resizestart";\n      }\n      this.createModalEvent(eventName)\n      return;\n    }\n    \n    if (c_info && c_info.isMoving) {\n      /** \n       * Ghost Process\n       **/\n       \n      let p_w = this.el.parentNode.offsetWidth, p_h = this.el.parentNode.offsetHeight;\n      let ghost_info = null;\n\n      if (this.__between(this.rect.top, this.NO_SNAP, this.FULLSCREEN_MARGIN) ||\n          this.__between(this.rect.left, this.NO_SNAP, this.FULLSCREEN_MARGIN) ||\n          this.__between(p_w - this.rect.right, this.NO_SNAP, this.FULLSCREEN_MARGIN) ||\n          this.__between(p_h - this.rect.bottom, this.NO_SNAP, this.FULLSCREEN_MARGIN)) {\n          ghost_info = {x: 0, y: 0, w:p_w, h:p_h, type: "show"}\n      } else if (this.__between(this.rect.top, this.NO_SNAP, this.SNAP_MARGIN)) {\n          ghost_info = {x: 0, y: 0, w:p_w, h:p_h / 2, type: "show"}\n      } else if (this.__between(this.rect.left, this.NO_SNAP, this.SNAP_MARGIN)) {\n          ghost_info = {x: 0, y: 0, w:p_w / 2, h: p_h, type: "show"}\n      } else if (this.__between(p_w - this.rect.right, this.NO_SNAP, this.SNAP_MARGIN)) {\n          ghost_info = {x: p_w / 2, y: 0, w: p_w / 2, h: p_h, type: "show"}\n      } else if (this.__between(p_h - this.rect.bottom, this.NO_SNAP, this.SNAP_MARGIN)) {\n          ghost_info = {x: 0, y: p_h / 2, w:p_w, h:p_h / 2, type: "show"}\n      } else {\n          ghost_info = {x: this.rect.left, y: this.rect.top, w: this.rect.width, h: this.rect.height, type: "hide"}\n      }\n\n      if (ghost_info && !this.isParked && !this.isSnap) {\n        this.el.parentNode.dispatchEvent(new CustomEvent("cocreate-modalghost", {detail: ghost_info}));\n      }\n\n      if (this.isSnap) {\n        // this.el.style.left = (this.point.cx - this.preSnapped.width / 2) + \'px\';\n        // this.el.style.top = (this.point.cy - Math.min(c_info.y, this.preSnapped.height)) + \'px\';\n        this.el.style.left = this.point.cx + \'px\';\n        this.el.style.top = this.point.cy + \'px\';\n        this.el.style.width = this.preSnapped.width + \'px\';\n        this.el.style.height =  this.preSnapped.height + \'px\';\n        this.isSnap = false;\n      } else {\n        this.el.style.top = (this.point.cy - c_info.y) + \'px\';\n        this.el.style.left = (this.point.cx - c_info.x) + \'px\';\n      }\n      \n      eventName = "modal-moving";\n      if (c_info.isChangeStart) {\n        this.clickedInfo.isChangeStart = false;\n        eventName = "modal-movestart";\n      }\n      \n      this.createModalEvent(eventName)\n      return;\n    }\n    \n    this.redraw = false;\n    this._setCursor(this.boundStatus);\n  },\n  \n  _setMaximize() {\n    if (!this.isSnap) {\n      this.isSnap = true;\n      this.preSnapped = {x: this.rect.x, y: this.rect.y, width: this.rect.width, height: this.rect.height};\n      this.__setBound(this.el, 0, 0, "100%", "100%");\n    } else {\n      this.isSnap = false;\n      this.el.style.left = this.preSnapped.x + \'px\';\n      this.el.style.top = this.preSnapped.y + \'px\';\n      this.el.style.width = this.preSnapped.width + \'px\';\n      this.el.style.height =  this.preSnapped.height + \'px\';\n    }\n    \n    // this.clickedInfo = null;\n  },\n  \n  _setCursor(bound) {\n    let cursor = "default";\n    if (!this.isParked && bound.isRight && bound.isBottom || bound.isLeft && bound.isTop) cursor = \'nwse-resize\';\n    else if (!this.isParked && bound.isRight && bound.isTop || bound.isBottom && bound.left) cursor = \'nwsw-resize\';\n    else if (!this.isParked && bound.isRight || bound.isLeft) cursor = \'ew-resize\';\n    else if (!this.isParked && bound.isBottom || bound.isTop) cursor = \'ns-resize\';\n    else if (this._isMovable()) cursor = "move";\n    this.el.style.cursor = cursor;\n    this.setContainerEvent(cursor);\n    \n    \n  },\n  \n  //. setParent Event\n  setContainerEvent(status) {\n    console.log(status)\n    if (!this.container) return;\n    if (status != \'default\') {\n      \n      this.container.style.pointerEvents = "auto";\n    } else {\n      this.container.style.pointerEvents = "none";\n    }\n  },\n  \n  _isMovable() {\n    var width = this.rect.width;\n    if (this.isHeader) {\n      width -= 120;\n    }\n    return this.point.x > 0 && this.point.x < width && this.point.y > 0 && this.point.y < 50\n  },\n  \n  /**\n   * Modal Events\n   * resize: modal-resizing, modal-resizeend, modal-resizestart\n   * move: modal-moving, modal-moveend, modal-movestart\n   **/\n  createModalEvent(eventName) {\n    var event = new CustomEvent(eventName, {});\n    this.el.dispatchEvent(event);\n  },\n  \n  _createTitle: function(n) {\n    var header_template = `<div class="nav bg-light-gray"><ul class="modal-title-area">\n          <li><a class="minimizeBtn"><i class="far fa-window-minimize"></i></a></li>\n          <li><a class="maximizeBtn"><i class="far fa-window-restore"></i></a></li>\n         \x3c!-- <li><a class="parkBtn"><i class="fas fa-dot-circle "></i></a></li> --\x3e\n          <li><a class="closeBtn"><i class="fas fa-times"></i></a></li>\n      </ul></div>`;\n    this.el.innerHTML = header_template + this.el.innerHTML;\n    this.headerArea = this.el.querySelector(\'.modal-title-area\');\n  },\n  \n  _createDragArea: function() {\n    this.dragArea = document.createElement("div");\n    this.dragArea.classList.add("modal-drag-area");\n    \n    let left_area = document.createElement("div");\n    left_area.classList.add("modal-drag-area-left");\n\n    let right_area = document.createElement("div");\n    right_area.classList.add("modal-drag-area-right");\n\n    let bottom_area = document.createElement("div");\n    bottom_area.classList.add("modal-drag-area-bottom");\n    \n    this.el.appendChild(this.dragArea);\n    this.el.appendChild(left_area);\n    this.el.appendChild(right_area);\n    this.el.appendChild(bottom_area);\n  },\n  \n  resize: function(dx, dy, width, height) {\n    if (this.isSnap) {\n      return;\n    }\n    \n    var borderHeight = this.el.offsetHeight - this.el.clientHeight;\n    var borderWidth = this.el.offsetWidth - this.el.clientWidth;\n    \n    width = width - borderWidth;\n    height = height - borderHeight;\n    /** left, right **/\n    if (dx !== 0 && !this.isPercentDimesion(this.el.style.width)) {\n      var el_width = this.el.offsetWidth;\n      if (el_width + this.rect.left > width && dx < 0) {\n        this.el.style.left = this._setDimension(Math.max(0, this.rect.left + dx));\n      }\n      this.el.style.width = this._setDimension(Math.min(el_width, width));\n    }\n    \n    /** top, bottom **/\n    if (dy !== 0 && !this.isPercentDimesion(this.el.style.height)) {\n      var el_height = this.el.offsetHeight;\n      if (el_height + this.rect.top > height && dy < 0) {\n        this.el.style.top = this._setDimension(Math.max(0, this.rect.top + dy));\n      }\n      this.el.style.height = this._setDimension(Math.min(el_height, height));\n    }\n\n    this.__setRectInfo()\n  },\n  \n  _setDimension: function(data, isPercent) {\n    if (isPercent) {\n      return data + "%";\n    } else {\n      return data + "px";\n    }\n  },\n  \n  isPercentDimesion: function (dimension) {\n    if (!dimension) return false;\n    if (typeof dimension === \'string\' && dimension.substr(-1, 1) === "%") {\n      return true;\n    } \n    return false;\n  }\n  \n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Modal);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5hdHRyaWJ1dGVzLy4uLy4uL0NvQ3JlYXRlSlMvbm9kZV9tb2R1bGVzL0Bjb2NyZWF0ZS9tb2RhbC9zcmMvbW9kYWwuanM/ZDI3NyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUF1Qzs7O0FBR3ZDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsV0FBVyx1REFBWTtBQUN2QjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLHVEQUFZO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdFQUFnRSxTQUFTLGFBQWE7QUFDdEY7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQOztBQUVBO0FBQ0EsMkRBQTJELFNBQVMsYUFBYTtBQUNqRjtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSwyREFBMkQsU0FBUyxhQUFhO0FBQ2pGO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxLQUFLOztBQUVMOztBQUVBLDJEQUEyRCxTQUFTLGFBQWE7QUFDakY7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtGQUFrRixTQUFTLFlBQVk7QUFDdkcsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtGQUFrRixTQUFTLFlBQVk7QUFDdkcsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkIsT0FBTztBQUNQLHVCQUF1QjtBQUN2QixPQUFPO0FBQ1AsdUJBQXVCLDhCO0FBQ3ZCLE9BQU87QUFDUCx1QkFBdUI7QUFDdkIsT0FBTztBQUNQLHVCQUF1QjtBQUN2Qjs7QUFFQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0EsTzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRUFBK0UsbUJBQW1CO0FBQ2xHOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7OztBQUdBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DLGtDQUFrQzs7QUFFbEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEIsT0FBTztBQUNQLHdCQUF3QjtBQUN4QixPQUFPO0FBQ1Asd0JBQXdCO0FBQ3hCLE9BQU87QUFDUCx3QkFBd0I7QUFDeEIsT0FBTztBQUNQLHdCQUF3QjtBQUN4QixPQUFPO0FBQ1Asd0JBQXdCO0FBQ3hCOztBQUVBO0FBQ0EsaUZBQWlGLG1CQUFtQjtBQUNwRzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSztBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsaUVBQWUsS0FBSyIsImZpbGUiOiIuLi8uLi9Db0NyZWF0ZUpTL25vZGVfbW9kdWxlcy9AY29jcmVhdGUvbW9kYWwvc3JjL21vZGFsLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtnZW5lcmF0ZVVVSUR9IGZyb20gXCIuL3V0aWxzLmpzXCJcblxuXG5mdW5jdGlvbiBNb2RhbChlbCwgb3B0aW9ucywgY29udGFpbmVyKSB7XG4gIGlmICghKGVsICYmIGVsLm5vZGVUeXBlICYmIGVsLm5vZGVUeXBlID09PSAxKSkge1xuXHRcdHJldHVybjtcblx0fVxuICBcbiAgLyoqIGRlZmluZSBjb25zdGFudCAqKi9cdFxuXHR0aGlzLk1BUkdJTiA9IDU7XG5cdHRoaXMuRlVMTFNDUkVFTl9NQVJHSU4gPSAtMjA7XG5cdHRoaXMuTk9fU05BUCA9IC0zMTtcblx0dGhpcy5TTkFQX01BUkdJTiA9IC0xMDtcblx0XG5cdHRoaXMuUklHSFRfU0NST0wgPSA1O1xuXHRcbi8vIFx0aWYgKHdpbmRvdy5tb2JpbGVjaGVjaygpKSB7XG4vLyBcdCAgdGhpcy5NQVJHSU4gPSAyMDtcbi8vIFx0fVxuXHRcblx0LyoqIG9wdGlvbnMgKiovXG5cdGxldCBkZWZhdWx0cyA9IHtcblx0ICBtaW5XaWR0aDogNjAsXG5cdCAgbWluSGVpZ2h0OiA0MCxcblx0fTtcblx0XG5cdHRoaXMuaWQgPSBnZW5lcmF0ZVVVSUQoMjApO1xuXHR0aGlzLmVsID0gZWw7XG5cdHRoaXMuY2xpY2tlZCA9IG51bGw7XG5cdHRoaXMucmVkcmF3ID0gZmFsc2U7XG5cdFxuXHR0aGlzLmJvdW5kU3RhdHVzID0ge307XG5cdFxuXHQvKipcblx0ICogeDogbW91c2UgeCBpbiBlbGVtZW50XG5cdCAqIHk6IG1vdXNlIHkgaW4gZWxlbWVudFxuXHQgKiBjeDogeCBpbiBkb2N1bWVudFxuXHQgKiBjeTogeSBpbiBkb2N1bWVudFxuXHQgKiAqL1xuXHR0aGlzLnBvaW50ID0ge307XG5cdHRoaXMucmVjdCA9IHt9O1xuXHR0aGlzLmNsaWNrZWRJbmZvID0gbnVsbDtcblx0dGhpcy5wcmVTbmFwcGVkID0gbnVsbDtcblx0dGhpcy5wcmV2UmVjdCA9IHt9O1xuXHR0aGlzLmlzU25hcCA9IGZhbHNlO1xuXHR0aGlzLmlzSGVhZGVyID0gdHJ1ZTtcblx0XG5cdHRoaXMuZHJhZ0FyZWEgPSBudWxsO1xuXHR0aGlzLmhlYWRlckFyZWEgPSBudWxsO1xuXHRcblx0dGhpcy53aWR0aCA9IDA7XG5cdHRoaXMuaGVpZ2h0ID0gMDtcblx0dGhpcy5pc1BhcmtlZCA9IGZhbHNlO1xuXHRcblx0dGhpcy5pZnJhbWUgPSBudWxsO1xuXHR0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcblx0XG5cblx0dGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0cywgb3B0aW9ucyk7XG5cdFxuXHR0aGlzLmVsLnNldEF0dHJpYnV0ZShcImlkXCIsIHRoaXMuaWQpO1xuXHRcbiAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwYWdlX2lkJywgdGhpcy5pZClcbiAgXG5cdHRoaXMuX2luaXQoKTtcblx0dGhpcy5fc2V0TW9kYWxTaXplKCk7XG4gIHRoaXMuX2luaXRFdmVudCgpO1xuICB0aGlzLl9fYW5pbWF0ZSgpO1xuICBcbn1cblxuTW9kYWwucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogTW9kYWwsXG4gIFxuICBfaW5pdCA6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvcHQgPSB0aGlzLm9wdGlvbnM7XG4gICAgXG4gICAgdGhpcy5pc0FqYXggPSAgIG9wdC5hamF4ICA/IG9wdC5hamF4ICAgIDogdGhpcy5lbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1vZGFsX2FqYXhcIilcbiAgICB2YXIgd2luZG93VVJMID0gb3B0LnVybCAgID8gb3B0LnVybCAgICAgOiB0aGlzLmVsLmdldEF0dHJpYnV0ZShcImhyZWZcIik7XG4gICAgdmFyIHdpZHRoID0gICAgIG9wdC53aWR0aCA/IG9wdC53aWR0aCAgIDogdGhpcy5lbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1vZGFsX3dpZHRoXCIpO1xuICAgIHZhciBoZWlnaHQgPSAgICBvcHQuaGVpZ2h0PyBvcHQuaGVpZ2h0ICA6IHRoaXMuZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1tb2RhbF9oZWlnaHRcIik7XG4gICAgdmFyIGNvbG9yID0gICAgIG9wdC5jb2xvciA/IG9wdC5jb2xvciAgIDogdGhpcy5lbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1vZGFsX2NvbG9yXCIpO1xuICAgIHZhciB4ID0gICAgICAgICBvcHQueCAgICAgPyBvcHQueCAgICAgICA6IHRoaXMuZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1tb2RhbF94XCIpXG4gICAgdmFyIHkgPSAgICAgICAgIG9wdC55ICAgICA/IG9wdC55ICAgICAgIDogdGhpcy5lbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1vZGFsX3lcIilcbiAgICB2YXIgc2hvd0hlYWRlcj0gb3B0LmhlYWRlcj8gb3B0LmhlYWRlciAgOiB0aGlzLmVsLmdldEF0dHJpYnV0ZShcImRhdGEtbW9kYWxfaGVhZGVyXCIpXG4gICAgXG4gICAgdmFyIGF0dHJpYnV0ZXMgPSBvcHQuYXR0cmlidXRlcztcbiAgICBcbiAgICAvLy4gc2V0IGRlZmF1bHRcbiAgICAvLyB0aGlzLmVsLnN0eWxlLndpZHRoID0gXCIzMDBweFwiO1xuICAgIC8vIHRoaXMuZWwuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XG4gICAgLy8gdGhpcy5lbC5zdHlsZS5sZWZ0ID0gMDtcbiAgICAvLyB0aGlzLmVsLnN0eWxlLnJpZ2h0ID0gMDtcbiAgICAvLyB0aGlzLmVsLnN0eWxlLmJvcmRlckNvbG9yID0gXCIjODg4XCI7XG4gICAgXG4gICAgaWYgKHdpZHRoICYmIHdpZHRoICE9IFwiXCIpIHtcbiAgICAgIHRoaXMuZWwuc3R5bGUud2lkdGggPSB3aWR0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbC5zdHlsZS53aWR0aCA9IFwiNjAwcHhcIjtcbiAgICB9XG4gICAgaWYgKGhlaWdodCAmJiBoZWlnaHQgIT0gXCJcIikge1xuICAgICAgdGhpcy5lbC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWwuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmVsLnBhcmVudEVsZW1lbnQuY2xpZW50V2lkdGggPCB0aGlzLmVsLmNsaWVudFdpZHRoKSB7XG4gICAgICB0aGlzLmVsLnN0eWxlLndpZHRoID0gXCIxMDAlXCJcbiAgICB9XG4gICAgaWYgKHRoaXMuZWwucGFyZW50RWxlbWVudC5jbGllbnRIZWlnaHQgPCB0aGlzLmVsLmNsaWVudEhlaWdodCkge1xuICAgICAgdGhpcy5lbC5zdHlsZS53aWR0aCA9IFwiMTAwJVwiXG4gICAgfVxuXG5cbiAgICBpZiAoeCAmJiB4ICE9IFwiXCIpIHtcbiAgICAgIHRoaXMuZWwuc3R5bGUubGVmdCA9IHg7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBoWCA9ICh0aGlzLmVsLnBhcmVudEVsZW1lbnQuY2xpZW50V2lkdGggLSB0aGlzLmVsLm9mZnNldFdpZHRoKSAvIDI7XG4gICAgICBoWCA9IGhYID4gMCA/IGhYIDogMDtcbiAgICAgIHRoaXMuZWwuc3R5bGUubGVmdCA9IGhYICsgXCJweFwiO1xuICAgIH1cbiAgICBpZiAoeSAmJiB5ICE9IFwiXCIpIHtcbiAgICAgIHRoaXMuZWwuc3R5bGUudG9wID0geTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGhZID0gKHRoaXMuZWwucGFyZW50RWxlbWVudC5jbGllbnRIZWlnaHQgLSB0aGlzLmVsLm9mZnNldEhlaWdodCkgLyAyXG4gICAgICBoWSA9IGhZID4gMCA/IGhZIDogMFxuICAgICAgdGhpcy5lbC5zdHlsZS50b3AgPSBoWSArIFwicHhcIjtcbiAgICB9XG4gICAgaWYgKGNvbG9yICYmIGNvbG9yICE9PSBcIlwiKSB0aGlzLmVsLnN0eWxlLmJvcmRlckNvbG9yID0gY29sb3I7XG4gICAgXG4gICAgaWYgKHNob3dIZWFkZXIgPT0gXCJ0cnVlXCIpIHtcbiAgICAgIHRoaXMuaXNIZWFkZXIgPSB0cnVlO1xuICAgICAgdGhpcy5fY3JlYXRlVGl0bGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pc0hlYWRlciA9IGZhbHNlO1xuICAgICAgdGhpcy5fY3JlYXRlRHJhZ0FyZWEoKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5lbC5pbm5lckhUTUwgPSB0aGlzLmVsLmlubmVySFRNTCArIGA8ZGl2IGNsYXNzPVwicGFya2VkLWNsb3NlQnRuXCI+PGkgY2xhc3M9XCJmYXMgZmEtdGltZXMgY2xvc2VCdG5cIj48L2k+PC9kaXY+YDtcbiAgICBcbiAgICBsZXQgaWZyYW1lID0gbnVsbDtcbiAgICBpZiAod2luZG93VVJMICYmIHdpbmRvd1VSTCAhPSBcIlwiKSB7XG4gICAgICBpZnJhbWUgPSB0aGlzLl9fY3JlYXRlQ29udGFpbmVyKHRoaXMuaGVhZGVyQXJlYSk7XG4gICAgICBpZnJhbWUuc3JjID0gd2luZG93VVJMO1xuICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlcykge1xuICAgICAgaWZyYW1lID0gdGhpcy5fX2NyZWF0ZUNvbnRhaW5lcih0aGlzLmhlYWRlckFyZWEsIGF0dHJpYnV0ZXNbJ2RhdGEtbW9kYWxfaWZyYW1lJ10gPT09IFwiZmFsc2VcIiA/IFwiZGl2XCIgOiBcImlmcmFtZVwiKTtcbiAgICAgIGlmIChhdHRyaWJ1dGVzWydkYXRhLXBhc3NfdG8nXSkge1xuICAgICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdkYXRhLXBhc3NfaWQnLCBhdHRyaWJ1dGVzWydkYXRhLXBhc3NfdG8nXSk7XG4gICAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29sbGVjdGlvbicsIFwiXCIpO1xuICAgICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdkYXRhLWRvY3VtZW50X2lkJywgXCJcIik7XG4gICAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcmVxdWVzdF9pZCcsIGdlbmVyYXRlVVVJRCgyMCkpO1xuICAgICAgfVxuICAgICAgaWYgKGF0dHJpYnV0ZXNbJ2RhdGEtcGFzc19uYW1lJ10pIHtcbiAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnbmFtZScsIGF0dHJpYnV0ZXNbJ2RhdGEtcGFzc19uYW1lJ10pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQoaWZyYW1lKVxuICAgIHRoaXMuaWZyYW1lID0gaWZyYW1lO1xuICB9LFxuICBcbiAgX19jcmVhdGVDb250YWluZXI6IGZ1bmN0aW9uKGlzSGVhZGVyLCB0eXBlKSB7XG4gICAgY29uc3QgdGFnID0gdHlwZSB8fCBcImlmcmFtZVwiO1xuICAgIFxuICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG4gICAgY29udGFpbmVyLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG4gICAgY29udGFpbmVyLnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xuICAgIGlmIChpc0hlYWRlcikge1xuICAgICAgY29udGFpbmVyLnN0eWxlLmhlaWdodCA9IFwiY2FsYygxMDAlIC0gNDVweClcIjtcbiAgICB9XG4gICAgXG4gICAgaWYgKHR5cGUgIT0gXCJpZnJhbWVcIikge1xuICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZG9tRWRpdG9yJyk7XG4gICAgfVxuICAgIHJldHVybiBjb250YWluZXI7XG4gIH0sXG4gIFxuICBfaW5pdEV2ZW50IDogZnVuY3Rpb24oKSB7XG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgIFxuICAgIGlmICh0aGlzLmlmcmFtZSkge1xuICAgICAgdGhpcy5pZnJhbWUuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhzZWxmLmlmcmFtZS5jb250ZW50RG9jdW1lbnQpO1xuICAgICAgICBjb25zdCBpZnJhbWVDb250ZW50ID0gc2VsZi5pZnJhbWUuY29udGVudERvY3VtZW50O1xuICAgICAgICBjb25zdCBuYXYgPSBpZnJhbWVDb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXYnKTtcbiAgICAgICAgXG4gICAgICAgIGlmcmFtZUNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwiY29jcmVhdGUtc2VsZWN0bW9kYWxcIiwge2RldGFpbDoge21vZGFsOiBzZWxmfX0pO1xuICAgICAgICAgIHNlbGYuZWwucGFyZW50Tm9kZS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBldmVudCA9IG5ldyBDdXN0b21FdmVudChcImNvY3JlYXRlLXNlbGVjdG1vZGFsXCIsIHtkZXRhaWw6IHttb2RhbDogc2VsZn19KTtcbiAgICAgIHNlbGYuZWwucGFyZW50Tm9kZS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICB9LCB0cnVlKVxuICAgIFxuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcImRibGNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmIChzZWxmLmlzUGFya2VkKSB7XG4gICAgICAgIHNlbGYuaXNQYXJrZWQgPSBmYWxzZTtcbiAgICAgICAgc2VsZi5lbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWwtcGFya2VkXCIpO1xuICAgICAgfSBcbiAgICB9KVxuICAgIFxuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW9kYWwtcmVzaXppbmcnLCBmdW5jdGlvbihlKSB7XG4gICAgICBjb25zb2xlLmxvZygncmVzaXppbmcgZXZlbnQgdHJpZ2dlcicpXG4gICAgfSlcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbihlKSB7XG4gICAgICBzZWxmLmNoYW5nZVJpZ2h0RHJhZ0VsKHRydWUpO1xuICAgICAgdmFyIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwiY29jcmVhdGUtc2VsZWN0bW9kYWxcIiwge2RldGFpbDoge21vZGFsOiBzZWxmfX0pO1xuICAgICAgc2VsZi5lbC5wYXJlbnROb2RlLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgc2VsZi5fb25Eb3duKGUudG91Y2hlc1swXSk7XG4gICAgfSlcbiAgICBcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgc2VsZi5jaGFuZ2VSaWdodERyYWdFbChmYWxzZSk7XG4gICAgfSlcbiAgICBcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIFxuICAgICAgdmFyIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwiY29jcmVhdGUtc2VsZWN0bW9kYWxcIiwge2RldGFpbDoge21vZGFsOiBzZWxmfX0pO1xuICAgICAgc2VsZi5lbC5wYXJlbnROb2RlLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgc2VsZi5fb25Eb3duKGUpO1xuICAgIH0pXG4gICAgXG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAvLyBzZWxmLmNoYW5nZVJpZ2h0RHJhZ0VsKHRydWUpO1xuICAgIH0pXG5cbiAgICB0aGlzLl9hZGRCdXR0b25FdmVudCgpXG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFwibW9kYWwtcmVzaXplZW5kXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHNlbGYuX3NhdmVGZXRjaCgpO1xuICAgICAgLy8gc2VsZi5jaGFuZ2VSaWdodERyYWdFbCh0cnVlKTtcblxuICAgIH0pO1xuICAgIFxuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vZGFsLW1vdmVlbmRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgc2VsZi5fc2F2ZUZldGNoKCk7XG4gICAgICAvLyBzZWxmLmNoYW5nZVJpZ2h0RHJhZ0VsKHRydWUpO1xuXG4gICAgfSlcbiAgfSxcbiAgXG4gIGNoYW5nZVJpZ2h0RHJhZ0VsOiBmdW5jdGlvbihpc1JldmVydCA9IHRydWUpIHtcbiAgICAgIGNvbnN0IHJpZ2h0X2VsID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtZHJhZy1hcmVhLXJpZ2h0JylcbiAgICAgIFxuICAgICAgY29uc3Qgc2l6ZSA9IGlzUmV2ZXJ0ID8gXCIwcHhcIiA6IFwiLTEwcHhcIlxuICAgICAgaWYgKHJpZ2h0X2VsKSB7XG4gICAgICAgIHJpZ2h0X2VsLnN0eWxlLnJpZ2h0ID0gc2l6ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuUklHSFRfU0NST0wgPSAhaXNSZXZlcnQgPyAwIDogNTtcbiAgICAgIFxuICB9LFxuICBcbiAgX2FkZEJ1dHRvbkV2ZW50OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgaWYgKHRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbC10aXRsZS1hcmVhIC5jbG9zZUJ0blwiKSkge1xuICAgICAgdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLXRpdGxlLWFyZWEgLmNsb3NlQnRuXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgc2VsZi5lbC5wYXJlbnROb2RlLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwiY29jcmVhdGUtcmVtb3ZlbW9kYWxcIiwge2RldGFpbDoge21vZGFsOnNlbGZ9fSkpO1xuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5wYXJrZWQtY2xvc2VCdG4gLmNsb3NlQnRuXCIpKSB7XG4gICAgICB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIucGFya2VkLWNsb3NlQnRuIC5jbG9zZUJ0blwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHNlbGYuZWwucGFyZW50Tm9kZS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcImNvY3JlYXRlLXJlbW92ZW1vZGFsXCIsIHtkZXRhaWw6IHttb2RhbDpzZWxmfX0pKTtcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtdGl0bGUtYXJlYSAubWF4aW1pemVCdG5cIikpIHtcbiAgICAgIHRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbC10aXRsZS1hcmVhIC5tYXhpbWl6ZUJ0blwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHNlbGYuX3NldE1heGltaXplKCk7XG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLXRpdGxlLWFyZWEgLm1pbmltaXplQnRuXCIpKSB7XG4gICAgICB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtdGl0bGUtYXJlYSAubWluaW1pemVCdG5cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBzZWxmLnRvZ2dsZVBhcmsoKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gaWYgKHRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbC10aXRsZS1hcmVhIC5wYXJrQnRuXCIpKSB7XG4gICAgLy8gICB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtdGl0bGUtYXJlYSAucGFya0J0blwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgIC8vICAgICBzZWxmLnRvZ2dsZVBhcmsoKVxuICAgIC8vICAgfSlcbiAgICAvLyB9XG4gIH0sXG4gIFxuICB0b2dnbGVQYXJrOiBmdW5jdGlvbigpIHtcbiAgICBcbiAgICBpZiAodGhpcy5pc1BhcmtlZCkge1xuICAgICAgdGhpcy5pc1BhcmtlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWwtcGFya2VkXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmlzUGFya2VkID0gdHJ1ZTtcbiAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsLXBhcmtlZFwiKVxuICAgIH1cbiAgfSxcbiAgXG4gIF9zZXRNb2RhbFNpemU6IGZ1bmN0aW9uKCkge1xuICAgIGxldCBib3VuZCA9IHRoaXMuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgbGV0IHBhcmVudEJvdW5kID0gdGhpcy5lbC5wYXJlbnROb2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHRoaXMud2lkdGggPSBib3VuZC53aWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IGJvdW5kLmhlaWdodDtcbiAgICBcbiAgICB0aGlzLmVsLnN0eWxlLmxlZnQgPSBib3VuZC5sZWZ0IC0gcGFyZW50Qm91bmQubGVmdDtcbiAgICB0aGlzLmVsLnN0eWxlLnRvcCA9IGJvdW5kLnRvcCAtIHBhcmVudEJvdW5kLnRvcDtcbiAgfSxcbiAgXG4gIF9zYXZlRmV0Y2g6IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLmVsLmNsYXNzTGlzdC5jb250YWlucyhcImRvbUVkaXRvclwiKSkge1xuICAgICAgQ29DcmVhdGVIdG1sVGFncy5zYXZlKHRoaXMuZWwpO1xuICAgIH1cbiAgfSxcbiAgXG4gIF9vbk1vdmUgOiBmdW5jdGlvbihlKSB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuX19nZXRCb3VuZFN0YXR1cyhlKVxuICAgIHRoaXMucmVkcmF3ID0gdHJ1ZTtcbiAgfSxcbiAgXG4gIF9vbkRvd24gOiBmdW5jdGlvbihlKSB7XG4gICAgLy8uIHNldCBjbGlja2VkXG5cbiAgICB0aGlzLl9fZ2V0Qm91bmRTdGF0dXMoZSk7XG5cbiAgICB2YXIgaXNSZXNpemluZyA9IHRoaXMuYm91bmRTdGF0dXMuaXNSaWdodCB8fCB0aGlzLmJvdW5kU3RhdHVzLmlzTGVmdCB8fCB0aGlzLmJvdW5kU3RhdHVzLmlzVG9wIHx8IHRoaXMuYm91bmRTdGF0dXMuaXNCb3R0b207XG4gICAgXG4gICAgdGhpcy5jbGlja2VkSW5mbyA9IHtcbiAgICAgIHg6IHRoaXMucG9pbnQueCxcbiAgICAgIHk6IHRoaXMucG9pbnQueSxcbiAgICAgIGN4OiB0aGlzLnBvaW50LmN4LFxuICAgICAgY3k6IHRoaXMucG9pbnQuY3ksXG4gICAgICB3OiB0aGlzLnJlY3Qud2lkdGgsXG4gICAgICBoOiB0aGlzLnJlY3QuaGVpZ2h0LFxuICAgICAgaXNSZXNpemluZzogaXNSZXNpemluZyxcbiAgICAgIGlzTW92aW5nOiAhaXNSZXNpemluZyAmJiB0aGlzLl9pc01vdmFibGUoKSxcbiAgICAgIGJvdW5kU3RhdHVzIDogdGhpcy5ib3VuZFN0YXR1cyxcbiAgICAgIGlzQ2hhbmdlU3RhcnQ6IHRydWVcbiAgICB9XG4gIH0sXG4gIFxuICBfb25VcDogZnVuY3Rpb24oZSkge1xuICAgIGlmIChlKSB7XG4gICAgICB0aGlzLl9fZ2V0Qm91bmRTdGF0dXMoZSk7XG4gICAgfVxuICAgIGlmICghdGhpcy5jbGlja2VkSW5mbykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5jbGlja2VkSW5mby5pc01vdmluZyAmJiAhdGhpcy5pc1BhcmtlZCkge1xuICAgICAgbGV0IHBfdyA9IHRoaXMuZWwucGFyZW50Tm9kZS5vZmZzZXRXaWR0aCwgcF9oID0gdGhpcy5lbC5wYXJlbnROb2RlLm9mZnNldEhlaWdodDtcbiAgICAgIGxldCBzbmFwX2luZm8gPSBudWxsO1xuICAgICAgXG4gICAgICBpZiAodGhpcy5fX2JldHdlZW4odGhpcy5yZWN0LnRvcCwgdGhpcy5OT19TTkFQLCB0aGlzLkZVTExTQ1JFRU5fTUFSR0lOKSB8fFxuICAgICAgICAgIHRoaXMuX19iZXR3ZWVuKHRoaXMucmVjdC5sZWZ0LCB0aGlzLk5PX1NOQVAsIHRoaXMuRlVMTFNDUkVFTl9NQVJHSU4pIHx8XG4gICAgICAgICAgdGhpcy5fX2JldHdlZW4ocF93IC0gdGhpcy5yZWN0LnJpZ2h0LCB0aGlzLk5PX1NOQVAsIHRoaXMuRlVMTFNDUkVFTl9NQVJHSU4pIHx8XG4gICAgICAgICAgdGhpcy5fX2JldHdlZW4ocF9oIC0gdGhpcy5yZWN0LmJvdHRvbSwgdGhpcy5OT19TTkFQLCB0aGlzLkZVTExTQ1JFRU5fTUFSR0lOKSkge1xuICAgICAgICAgIHNuYXBfaW5mbyA9IHt4OiAwLCB5OiAwLCB3OicxMDAlJywgaDonMTAwJSd9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX19iZXR3ZWVuKHRoaXMucmVjdC50b3AsIHRoaXMuTk9fU05BUCwgdGhpcy5TTkFQX01BUkdJTikpIHtcbiAgICAgICAgICBzbmFwX2luZm8gPSB7eDogMCwgeTogMCwgdzonMTAwJScsIGg6JzUwJSd9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX19iZXR3ZWVuKHRoaXMucmVjdC5sZWZ0LCB0aGlzLk5PX1NOQVAsIHRoaXMuU05BUF9NQVJHSU4pKSB7XG4gICAgICAgICAgc25hcF9pbmZvID0ge3g6IDAsIHk6IDAsIHc6JzUwJScsIGg6JzEwMCUnfSBcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fX2JldHdlZW4ocF93IC0gdGhpcy5yZWN0LnJpZ2h0LCB0aGlzLk5PX1NOQVAsIHRoaXMuU05BUF9NQVJHSU4pKSB7XG4gICAgICAgICAgc25hcF9pbmZvID0ge3g6ICc1MCUnLCB5OiAwLCB3OiAnNTAlJywgaDonMTAwJSd9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX19iZXR3ZWVuKHBfaCAtIHRoaXMucmVjdC5ib3R0b20sIHRoaXMuTk9fU05BUCwgdGhpcy5TTkFQX01BUkdJTikpIHtcbiAgICAgICAgICBzbmFwX2luZm8gPSB7eDogMCwgeTogJzUwJScsIHc6ICcxMDAlJywgaDogJzUwJSd9XG4gICAgICB9XG5cbiAgICAgIGlmIChzbmFwX2luZm8gJiYgIXRoaXMuaXNTbmFwKSB7XG4gICAgICAgIHRoaXMuX19zZXRCb3VuZCh0aGlzLmVsLCBzbmFwX2luZm8ueCwgc25hcF9pbmZvLnksIHNuYXBfaW5mby53LCBzbmFwX2luZm8uaCk7XG4gICAgICAgIHRoaXMucHJlU25hcHBlZCA9IHt4OiB0aGlzLnJlY3QueCwgeTogdGhpcy5yZWN0LnksIHdpZHRoOiB0aGlzLnJlY3Qud2lkdGgsIGhlaWdodDogdGhpcy5yZWN0LmhlaWdodH07XG4gICAgICAgIHRoaXMuaXNTbmFwID0gdHJ1ZTtcbiAgICAgIH0gXG4gICAgICBcbiAgICAgIHZhciBnaG9zdF9pbmZvID0ge1xuICAgICAgICB4OiB0aGlzLnJlY3QueCxcbiAgICAgICAgeTogdGhpcy5yZWN0LnksXG4gICAgICAgIHc6IHRoaXMucmVjdC53aWR0aCxcbiAgICAgICAgaDogdGhpcy5yZWN0LmhlaWdodFxuICAgICAgfVxuICAgICAgdGhpcy5lbC5wYXJlbnROb2RlLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwiY29jcmVhdGUtbW9kYWxnaG9zdFwiLCB7ZGV0YWlsOiBnaG9zdF9pbmZvfSkpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNsaWNrZWRJbmZvLmlzUmVzaXppbmcpIHtcbiAgICAgIHRoaXMuY3JlYXRlTW9kYWxFdmVudCgnbW9kYWwtcmVzaXplZW5kJyk7XG4gICAgICB0aGlzLl9zZXRNb2RhbFNpemUoKVxuICAgICAgdGhpcy5pc1NuYXAgPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuY2xpY2tlZEluZm8uaXNNb3ZpbmcpIHtcbiAgICAgIHRoaXMuY3JlYXRlTW9kYWxFdmVudCgnbW9kYWwtbW92ZWVuZCcpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICB0aGlzLmNsaWNrZWRJbmZvID0gbnVsbDtcbiAgfSxcbiAgXG4gIF9fc2V0Qm91bmQgOiBmdW5jdGlvbihlbCwgeCwgeSwgdywgaCkge1xuICAgIHZhciBib3JkZXJIZWlnaHQgPSB0aGlzLmVsLm9mZnNldEhlaWdodCAtIHRoaXMuZWwuY2xpZW50SGVpZ2h0O1xuICAgIHZhciBib3JkZXJXaWR0aCA9IHRoaXMuZWwub2Zmc2V0V2lkdGggLSB0aGlzLmVsLmNsaWVudFdpZHRoO1xuICAgIGVsLnN0eWxlLmxlZnQgPSB4O1xuICAgIGVsLnN0eWxlLnRvcCA9IHk7XG4gICAgLy8gZWwuc3R5bGUud2lkdGggPSBcImNhbGMoIFwiICsgdyArIFwiIC0gXCIgKyBib3JkZXJXaWR0aCArIFwicHggKVwiO1xuICAgIC8vIGVsLnN0eWxlLmhlaWdodCA9IFwiY2FsYyggXCIgICsgaCArIFwiIC0gXCIgKyBib3JkZXJIZWlnaHQgKyBcInB4IClcIjtcbiAgICBlbC5zdHlsZS53aWR0aCA9IHc7XG4gICAgZWwuc3R5bGUuaGVpZ2h0ID0gaDtcbiAgfSxcbiAgXG4gIF9fc2V0UmVjdEluZm86IGZ1bmN0aW9uKCkge1xuICAgIGxldCBib3VuZCA9IHRoaXMuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgbGV0IHBhcmVudFJlY3QgPSB0aGlzLmVsLnBhcmVudE5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdGhpcy5yZWN0ID0ge307XG4gICAgdGhpcy5yZWN0LnggPSBib3VuZC54IC0gcGFyZW50UmVjdC54O1xuICAgIHRoaXMucmVjdC55ID0gYm91bmQueSAtIHBhcmVudFJlY3QueTtcbiAgICB0aGlzLnJlY3Qud2lkdGggPSBib3VuZC53aWR0aDtcbiAgICB0aGlzLnJlY3QuaGVpZ2h0ID0gYm91bmQuaGVpZ2h0O1xuICAgIHRoaXMucmVjdC50b3AgPSBib3VuZC50b3AgLSBwYXJlbnRSZWN0LnRvcDtcbiAgICB0aGlzLnJlY3QuYm90dG9tID0gYm91bmQuYm90dG9tIC0gcGFyZW50UmVjdC50b3A7XG4gICAgdGhpcy5yZWN0LmxlZnQgPSBib3VuZC5sZWZ0IC0gcGFyZW50UmVjdC5sZWZ0O1xuICAgIHRoaXMucmVjdC5yaWdodCA9IGJvdW5kLnJpZ2h0IC0gcGFyZW50UmVjdC5sZWZ0O1xuICB9LFxuICBcbiAgX19nZXRCb3VuZFN0YXR1cyA6IGZ1bmN0aW9uKGUpIHtcbiAgICBsZXQgYm91bmQgPSB0aGlzLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGxldCBwYXJlbnRSZWN0ID0gdGhpcy5lbC5wYXJlbnROb2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGxldCB4ID0gZS5jbGllbnRYIC0gYm91bmQubGVmdDsvLyAtIHBhcmVudFJlY3QubGVmdDtcbiAgICBsZXQgeSA9IGUuY2xpZW50WSAtIGJvdW5kLnRvcDsvLyAtIHBhcmVudFJlY3QudG9wO1xuXG4gICAgdGhpcy5fX3NldFJlY3RJbmZvKCk7XG5cbiAgICB0aGlzLnBvaW50LnggPSB4O1xuICAgIHRoaXMucG9pbnQueSA9IHk7XG4gICAgdGhpcy5wb2ludC5jeCA9IGUuY2xpZW50WCAtIHBhcmVudFJlY3QubGVmdDtcbiAgICB0aGlzLnBvaW50LmN5ID0gZS5jbGllbnRZIC0gcGFyZW50UmVjdC50b3A7XG5cbiAgICB0aGlzLmJvdW5kU3RhdHVzID0ge1xuICAgICAgaXNUb3AgOiB5IDwgdGhpcy5NQVJHSU4gJiYgeSA+IC10aGlzLk1BUkdJTixcbiAgICAgIGlzTGVmdCA6IHggPCB0aGlzLk1BUkdJTiAmJiB4ID4gLXRoaXMuTUFSR0lOLFxuICAgICAgaXNSaWdodCA6IHggPj0gYm91bmQud2lkdGggLSB0aGlzLlJJR0hUX1NDUk9MICYmIHggPD0gYm91bmQud2lkdGggKyB0aGlzLk1BUkdJTiArICh0aGlzLk1BUkdJTiAtIHRoaXMuUklHSFRfU0NST0wpLFxuICAgICAgaXNCb3R0b206IHkgPj0gYm91bmQuaGVpZ2h0IC0gdGhpcy5NQVJHSU4gJiYgeSA8PSBib3VuZC5oZWlnaHQgKyB0aGlzLk1BUkdJTlxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdGhpcy5ib3VuZFN0YXR1cztcbiAgfSxcbiAgXG4gIF9fYmV0d2VlbjogZnVuY3Rpb24oeCwgbWluLCBtYXgpIHtcbiAgICByZXR1cm4geCA+PSBtaW4gJiYgeCA8PSBtYXg7XG4gIH0sXG4gIFxuICBfX2FuaW1hdGUgOiBmdW5jdGlvbigpIHtcbiAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZi5fX2FuaW1hdGUoKTtcbiAgICB9KTtcbiAgICBcbiAgICBpZiAoIXRoaXMucmVkcmF3KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmVkcmF3ID0gZmFsc2U7XG4gICAgXG4gICAgbGV0IGNfaW5mbyA9IHRoaXMuY2xpY2tlZEluZm87XG4gICAgXG4gICAgdmFyIGV2ZW50TmFtZSA9IG51bGw7XG4gICAgXG4gICAgLyoqXG4gICAgICogUmVzaXplIHByb2Nlc3NcbiAgICAgKiovXG4gICAgaWYgKGNfaW5mbyAmJiBjX2luZm8uaXNSZXNpemluZyAmJiAhdGhpcy5pc1BhcmtlZCkge1xuICAgICAgaWYgKGNfaW5mby5ib3VuZFN0YXR1cy5pc1JpZ2h0KSBcbiAgICAgICAgdGhpcy5lbC5zdHlsZS53aWR0aCA9IE1hdGgubWF4KHRoaXMucG9pbnQueCwgdGhpcy5vcHRpb25zLm1pbldpZHRoKSArICdweCc7XG5cbiAgICAgIGlmIChjX2luZm8uYm91bmRTdGF0dXMuaXNCb3R0b20pIHtcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5oZWlnaHQgPSBNYXRoLm1heCh0aGlzLnBvaW50LnksIHRoaXMub3B0aW9ucy5taW5IZWlnaHQpICsgJ3B4JztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGNfaW5mby5ib3VuZFN0YXR1cy5pc0xlZnQpIHtcbiAgICAgICAgdmFyIGNfd2lkdGggPSBNYXRoLm1heChjX2luZm8uY3ggLSB0aGlzLnBvaW50LmN4ICsgY19pbmZvLncsIHRoaXMub3B0aW9ucy5taW5XaWR0aCk7XG4gICAgICAgIGlmIChjX3dpZHRoID4gdGhpcy5vcHRpb25zLm1pbldpZHRoKSB7XG4gICAgICAgICAgdGhpcy5lbC5zdHlsZS53aWR0aCA9IGNfd2lkdGggKyAncHgnO1xuICAgICAgICAgIHRoaXMuZWwuc3R5bGUubGVmdCA9IHRoaXMucG9pbnQuY3ggKyAncHgnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChjX2luZm8uYm91bmRTdGF0dXMuaXNUb3ApIHtcbiAgICAgICAgdmFyIGNfaGVpZ2h0ID0gTWF0aC5tYXgoY19pbmZvLmN5IC0gdGhpcy5wb2ludC5jeSArIGNfaW5mby5oLCB0aGlzLm9wdGlvbnMubWluSGVpZ2h0KTtcbiAgICAgICAgaWYgKGNfaGVpZ2h0ID4gdGhpcy5vcHRpb25zLm1pbkhlaWdodCkge1xuICAgICAgICAgIHRoaXMuZWwuc3R5bGUuaGVpZ2h0ID0gY19oZWlnaHQgKyAncHgnO1xuICAgICAgICAgIHRoaXMuZWwuc3R5bGUudG9wID0gdGhpcy5wb2ludC5jeSArICdweCc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgZXZlbnROYW1lID0gXCJtb2RhbC1yZXNpemluZ1wiO1xuICAgICAgaWYgKGNfaW5mby5pc0NoYW5nZVN0YXJ0KSB7XG4gICAgICAgIHRoaXMuY2xpY2tlZEluZm8uaXNDaGFuZ2VTdGFydCA9IGZhbHNlO1xuICAgICAgICBldmVudE5hbWUgPSBcIm1vZGFsLXJlc2l6ZXN0YXJ0XCI7XG4gICAgICB9XG4gICAgICB0aGlzLmNyZWF0ZU1vZGFsRXZlbnQoZXZlbnROYW1lKVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBpZiAoY19pbmZvICYmIGNfaW5mby5pc01vdmluZykge1xuICAgICAgLyoqIFxuICAgICAgICogR2hvc3QgUHJvY2Vzc1xuICAgICAgICoqL1xuICAgICAgIFxuICAgICAgbGV0IHBfdyA9IHRoaXMuZWwucGFyZW50Tm9kZS5vZmZzZXRXaWR0aCwgcF9oID0gdGhpcy5lbC5wYXJlbnROb2RlLm9mZnNldEhlaWdodDtcbiAgICAgIGxldCBnaG9zdF9pbmZvID0gbnVsbDtcblxuICAgICAgaWYgKHRoaXMuX19iZXR3ZWVuKHRoaXMucmVjdC50b3AsIHRoaXMuTk9fU05BUCwgdGhpcy5GVUxMU0NSRUVOX01BUkdJTikgfHxcbiAgICAgICAgICB0aGlzLl9fYmV0d2Vlbih0aGlzLnJlY3QubGVmdCwgdGhpcy5OT19TTkFQLCB0aGlzLkZVTExTQ1JFRU5fTUFSR0lOKSB8fFxuICAgICAgICAgIHRoaXMuX19iZXR3ZWVuKHBfdyAtIHRoaXMucmVjdC5yaWdodCwgdGhpcy5OT19TTkFQLCB0aGlzLkZVTExTQ1JFRU5fTUFSR0lOKSB8fFxuICAgICAgICAgIHRoaXMuX19iZXR3ZWVuKHBfaCAtIHRoaXMucmVjdC5ib3R0b20sIHRoaXMuTk9fU05BUCwgdGhpcy5GVUxMU0NSRUVOX01BUkdJTikpIHtcbiAgICAgICAgICBnaG9zdF9pbmZvID0ge3g6IDAsIHk6IDAsIHc6cF93LCBoOnBfaCwgdHlwZTogXCJzaG93XCJ9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX19iZXR3ZWVuKHRoaXMucmVjdC50b3AsIHRoaXMuTk9fU05BUCwgdGhpcy5TTkFQX01BUkdJTikpIHtcbiAgICAgICAgICBnaG9zdF9pbmZvID0ge3g6IDAsIHk6IDAsIHc6cF93LCBoOnBfaCAvIDIsIHR5cGU6IFwic2hvd1wifVxuICAgICAgfSBlbHNlIGlmICh0aGlzLl9fYmV0d2Vlbih0aGlzLnJlY3QubGVmdCwgdGhpcy5OT19TTkFQLCB0aGlzLlNOQVBfTUFSR0lOKSkge1xuICAgICAgICAgIGdob3N0X2luZm8gPSB7eDogMCwgeTogMCwgdzpwX3cgLyAyLCBoOiBwX2gsIHR5cGU6IFwic2hvd1wifVxuICAgICAgfSBlbHNlIGlmICh0aGlzLl9fYmV0d2VlbihwX3cgLSB0aGlzLnJlY3QucmlnaHQsIHRoaXMuTk9fU05BUCwgdGhpcy5TTkFQX01BUkdJTikpIHtcbiAgICAgICAgICBnaG9zdF9pbmZvID0ge3g6IHBfdyAvIDIsIHk6IDAsIHc6IHBfdyAvIDIsIGg6IHBfaCwgdHlwZTogXCJzaG93XCJ9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX19iZXR3ZWVuKHBfaCAtIHRoaXMucmVjdC5ib3R0b20sIHRoaXMuTk9fU05BUCwgdGhpcy5TTkFQX01BUkdJTikpIHtcbiAgICAgICAgICBnaG9zdF9pbmZvID0ge3g6IDAsIHk6IHBfaCAvIDIsIHc6cF93LCBoOnBfaCAvIDIsIHR5cGU6IFwic2hvd1wifVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnaG9zdF9pbmZvID0ge3g6IHRoaXMucmVjdC5sZWZ0LCB5OiB0aGlzLnJlY3QudG9wLCB3OiB0aGlzLnJlY3Qud2lkdGgsIGg6IHRoaXMucmVjdC5oZWlnaHQsIHR5cGU6IFwiaGlkZVwifVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2hvc3RfaW5mbyAmJiAhdGhpcy5pc1BhcmtlZCAmJiAhdGhpcy5pc1NuYXApIHtcbiAgICAgICAgdGhpcy5lbC5wYXJlbnROb2RlLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwiY29jcmVhdGUtbW9kYWxnaG9zdFwiLCB7ZGV0YWlsOiBnaG9zdF9pbmZvfSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5pc1NuYXApIHtcbiAgICAgICAgLy8gdGhpcy5lbC5zdHlsZS5sZWZ0ID0gKHRoaXMucG9pbnQuY3ggLSB0aGlzLnByZVNuYXBwZWQud2lkdGggLyAyKSArICdweCc7XG4gICAgICAgIC8vIHRoaXMuZWwuc3R5bGUudG9wID0gKHRoaXMucG9pbnQuY3kgLSBNYXRoLm1pbihjX2luZm8ueSwgdGhpcy5wcmVTbmFwcGVkLmhlaWdodCkpICsgJ3B4JztcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5sZWZ0ID0gdGhpcy5wb2ludC5jeCArICdweCc7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUudG9wID0gdGhpcy5wb2ludC5jeSArICdweCc7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUud2lkdGggPSB0aGlzLnByZVNuYXBwZWQud2lkdGggKyAncHgnO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLmhlaWdodCA9ICB0aGlzLnByZVNuYXBwZWQuaGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgdGhpcy5pc1NuYXAgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUudG9wID0gKHRoaXMucG9pbnQuY3kgLSBjX2luZm8ueSkgKyAncHgnO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLmxlZnQgPSAodGhpcy5wb2ludC5jeCAtIGNfaW5mby54KSArICdweCc7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGV2ZW50TmFtZSA9IFwibW9kYWwtbW92aW5nXCI7XG4gICAgICBpZiAoY19pbmZvLmlzQ2hhbmdlU3RhcnQpIHtcbiAgICAgICAgdGhpcy5jbGlja2VkSW5mby5pc0NoYW5nZVN0YXJ0ID0gZmFsc2U7XG4gICAgICAgIGV2ZW50TmFtZSA9IFwibW9kYWwtbW92ZXN0YXJ0XCI7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRoaXMuY3JlYXRlTW9kYWxFdmVudChldmVudE5hbWUpXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIHRoaXMucmVkcmF3ID0gZmFsc2U7XG4gICAgdGhpcy5fc2V0Q3Vyc29yKHRoaXMuYm91bmRTdGF0dXMpO1xuICB9LFxuICBcbiAgX3NldE1heGltaXplKCkge1xuICAgIGlmICghdGhpcy5pc1NuYXApIHtcbiAgICAgIHRoaXMuaXNTbmFwID0gdHJ1ZTtcbiAgICAgIHRoaXMucHJlU25hcHBlZCA9IHt4OiB0aGlzLnJlY3QueCwgeTogdGhpcy5yZWN0LnksIHdpZHRoOiB0aGlzLnJlY3Qud2lkdGgsIGhlaWdodDogdGhpcy5yZWN0LmhlaWdodH07XG4gICAgICB0aGlzLl9fc2V0Qm91bmQodGhpcy5lbCwgMCwgMCwgXCIxMDAlXCIsIFwiMTAwJVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pc1NuYXAgPSBmYWxzZTtcbiAgICAgIHRoaXMuZWwuc3R5bGUubGVmdCA9IHRoaXMucHJlU25hcHBlZC54ICsgJ3B4JztcbiAgICAgIHRoaXMuZWwuc3R5bGUudG9wID0gdGhpcy5wcmVTbmFwcGVkLnkgKyAncHgnO1xuICAgICAgdGhpcy5lbC5zdHlsZS53aWR0aCA9IHRoaXMucHJlU25hcHBlZC53aWR0aCArICdweCc7XG4gICAgICB0aGlzLmVsLnN0eWxlLmhlaWdodCA9ICB0aGlzLnByZVNuYXBwZWQuaGVpZ2h0ICsgJ3B4JztcbiAgICB9XG4gICAgXG4gICAgLy8gdGhpcy5jbGlja2VkSW5mbyA9IG51bGw7XG4gIH0sXG4gIFxuICBfc2V0Q3Vyc29yKGJvdW5kKSB7XG4gICAgbGV0IGN1cnNvciA9IFwiZGVmYXVsdFwiO1xuICAgIGlmICghdGhpcy5pc1BhcmtlZCAmJiBib3VuZC5pc1JpZ2h0ICYmIGJvdW5kLmlzQm90dG9tIHx8IGJvdW5kLmlzTGVmdCAmJiBib3VuZC5pc1RvcCkgY3Vyc29yID0gJ253c2UtcmVzaXplJztcbiAgICBlbHNlIGlmICghdGhpcy5pc1BhcmtlZCAmJiBib3VuZC5pc1JpZ2h0ICYmIGJvdW5kLmlzVG9wIHx8IGJvdW5kLmlzQm90dG9tICYmIGJvdW5kLmxlZnQpIGN1cnNvciA9ICdud3N3LXJlc2l6ZSc7XG4gICAgZWxzZSBpZiAoIXRoaXMuaXNQYXJrZWQgJiYgYm91bmQuaXNSaWdodCB8fCBib3VuZC5pc0xlZnQpIGN1cnNvciA9ICdldy1yZXNpemUnO1xuICAgIGVsc2UgaWYgKCF0aGlzLmlzUGFya2VkICYmIGJvdW5kLmlzQm90dG9tIHx8IGJvdW5kLmlzVG9wKSBjdXJzb3IgPSAnbnMtcmVzaXplJztcbiAgICBlbHNlIGlmICh0aGlzLl9pc01vdmFibGUoKSkgY3Vyc29yID0gXCJtb3ZlXCI7XG4gICAgdGhpcy5lbC5zdHlsZS5jdXJzb3IgPSBjdXJzb3I7XG4gICAgdGhpcy5zZXRDb250YWluZXJFdmVudChjdXJzb3IpO1xuICAgIFxuICAgIFxuICB9LFxuICBcbiAgLy8uIHNldFBhcmVudCBFdmVudFxuICBzZXRDb250YWluZXJFdmVudChzdGF0dXMpIHtcbiAgICBjb25zb2xlLmxvZyhzdGF0dXMpXG4gICAgaWYgKCF0aGlzLmNvbnRhaW5lcikgcmV0dXJuO1xuICAgIGlmIChzdGF0dXMgIT0gJ2RlZmF1bHQnKSB7XG4gICAgICBcbiAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcImF1dG9cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwibm9uZVwiO1xuICAgIH1cbiAgfSxcbiAgXG4gIF9pc01vdmFibGUoKSB7XG4gICAgdmFyIHdpZHRoID0gdGhpcy5yZWN0LndpZHRoO1xuICAgIGlmICh0aGlzLmlzSGVhZGVyKSB7XG4gICAgICB3aWR0aCAtPSAxMjA7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnBvaW50LnggPiAwICYmIHRoaXMucG9pbnQueCA8IHdpZHRoICYmIHRoaXMucG9pbnQueSA+IDAgJiYgdGhpcy5wb2ludC55IDwgNTBcbiAgfSxcbiAgXG4gIC8qKlxuICAgKiBNb2RhbCBFdmVudHNcbiAgICogcmVzaXplOiBtb2RhbC1yZXNpemluZywgbW9kYWwtcmVzaXplZW5kLCBtb2RhbC1yZXNpemVzdGFydFxuICAgKiBtb3ZlOiBtb2RhbC1tb3ZpbmcsIG1vZGFsLW1vdmVlbmQsIG1vZGFsLW1vdmVzdGFydFxuICAgKiovXG4gIGNyZWF0ZU1vZGFsRXZlbnQoZXZlbnROYW1lKSB7XG4gICAgdmFyIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KGV2ZW50TmFtZSwge30pO1xuICAgIHRoaXMuZWwuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gIH0sXG4gIFxuICBfY3JlYXRlVGl0bGU6IGZ1bmN0aW9uKG4pIHtcbiAgICB2YXIgaGVhZGVyX3RlbXBsYXRlID0gYDxkaXYgY2xhc3M9XCJuYXYgYmctbGlnaHQtZ3JheVwiPjx1bCBjbGFzcz1cIm1vZGFsLXRpdGxlLWFyZWFcIj5cbiAgICAgICAgICA8bGk+PGEgY2xhc3M9XCJtaW5pbWl6ZUJ0blwiPjxpIGNsYXNzPVwiZmFyIGZhLXdpbmRvdy1taW5pbWl6ZVwiPjwvaT48L2E+PC9saT5cbiAgICAgICAgICA8bGk+PGEgY2xhc3M9XCJtYXhpbWl6ZUJ0blwiPjxpIGNsYXNzPVwiZmFyIGZhLXdpbmRvdy1yZXN0b3JlXCI+PC9pPjwvYT48L2xpPlxuICAgICAgICAgPCEtLSA8bGk+PGEgY2xhc3M9XCJwYXJrQnRuXCI+PGkgY2xhc3M9XCJmYXMgZmEtZG90LWNpcmNsZSBcIj48L2k+PC9hPjwvbGk+IC0tPlxuICAgICAgICAgIDxsaT48YSBjbGFzcz1cImNsb3NlQnRuXCI+PGkgY2xhc3M9XCJmYXMgZmEtdGltZXNcIj48L2k+PC9hPjwvbGk+XG4gICAgICA8L3VsPjwvZGl2PmA7XG4gICAgdGhpcy5lbC5pbm5lckhUTUwgPSBoZWFkZXJfdGVtcGxhdGUgKyB0aGlzLmVsLmlubmVySFRNTDtcbiAgICB0aGlzLmhlYWRlckFyZWEgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC10aXRsZS1hcmVhJyk7XG4gIH0sXG4gIFxuICBfY3JlYXRlRHJhZ0FyZWE6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuZHJhZ0FyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRoaXMuZHJhZ0FyZWEuY2xhc3NMaXN0LmFkZChcIm1vZGFsLWRyYWctYXJlYVwiKTtcbiAgICBcbiAgICBsZXQgbGVmdF9hcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBsZWZ0X2FyZWEuY2xhc3NMaXN0LmFkZChcIm1vZGFsLWRyYWctYXJlYS1sZWZ0XCIpO1xuXG4gICAgbGV0IHJpZ2h0X2FyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHJpZ2h0X2FyZWEuY2xhc3NMaXN0LmFkZChcIm1vZGFsLWRyYWctYXJlYS1yaWdodFwiKTtcblxuICAgIGxldCBib3R0b21fYXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgYm90dG9tX2FyZWEuY2xhc3NMaXN0LmFkZChcIm1vZGFsLWRyYWctYXJlYS1ib3R0b21cIik7XG4gICAgXG4gICAgdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLmRyYWdBcmVhKTtcbiAgICB0aGlzLmVsLmFwcGVuZENoaWxkKGxlZnRfYXJlYSk7XG4gICAgdGhpcy5lbC5hcHBlbmRDaGlsZChyaWdodF9hcmVhKTtcbiAgICB0aGlzLmVsLmFwcGVuZENoaWxkKGJvdHRvbV9hcmVhKTtcbiAgfSxcbiAgXG4gIHJlc2l6ZTogZnVuY3Rpb24oZHgsIGR5LCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgaWYgKHRoaXMuaXNTbmFwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIHZhciBib3JkZXJIZWlnaHQgPSB0aGlzLmVsLm9mZnNldEhlaWdodCAtIHRoaXMuZWwuY2xpZW50SGVpZ2h0O1xuICAgIHZhciBib3JkZXJXaWR0aCA9IHRoaXMuZWwub2Zmc2V0V2lkdGggLSB0aGlzLmVsLmNsaWVudFdpZHRoO1xuICAgIFxuICAgIHdpZHRoID0gd2lkdGggLSBib3JkZXJXaWR0aDtcbiAgICBoZWlnaHQgPSBoZWlnaHQgLSBib3JkZXJIZWlnaHQ7XG4gICAgLyoqIGxlZnQsIHJpZ2h0ICoqL1xuICAgIGlmIChkeCAhPT0gMCAmJiAhdGhpcy5pc1BlcmNlbnREaW1lc2lvbih0aGlzLmVsLnN0eWxlLndpZHRoKSkge1xuICAgICAgdmFyIGVsX3dpZHRoID0gdGhpcy5lbC5vZmZzZXRXaWR0aDtcbiAgICAgIGlmIChlbF93aWR0aCArIHRoaXMucmVjdC5sZWZ0ID4gd2lkdGggJiYgZHggPCAwKSB7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUubGVmdCA9IHRoaXMuX3NldERpbWVuc2lvbihNYXRoLm1heCgwLCB0aGlzLnJlY3QubGVmdCArIGR4KSk7XG4gICAgICB9XG4gICAgICB0aGlzLmVsLnN0eWxlLndpZHRoID0gdGhpcy5fc2V0RGltZW5zaW9uKE1hdGgubWluKGVsX3dpZHRoLCB3aWR0aCkpO1xuICAgIH1cbiAgICBcbiAgICAvKiogdG9wLCBib3R0b20gKiovXG4gICAgaWYgKGR5ICE9PSAwICYmICF0aGlzLmlzUGVyY2VudERpbWVzaW9uKHRoaXMuZWwuc3R5bGUuaGVpZ2h0KSkge1xuICAgICAgdmFyIGVsX2hlaWdodCA9IHRoaXMuZWwub2Zmc2V0SGVpZ2h0O1xuICAgICAgaWYgKGVsX2hlaWdodCArIHRoaXMucmVjdC50b3AgPiBoZWlnaHQgJiYgZHkgPCAwKSB7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUudG9wID0gdGhpcy5fc2V0RGltZW5zaW9uKE1hdGgubWF4KDAsIHRoaXMucmVjdC50b3AgKyBkeSkpO1xuICAgICAgfVxuICAgICAgdGhpcy5lbC5zdHlsZS5oZWlnaHQgPSB0aGlzLl9zZXREaW1lbnNpb24oTWF0aC5taW4oZWxfaGVpZ2h0LCBoZWlnaHQpKTtcbiAgICB9XG5cbiAgICB0aGlzLl9fc2V0UmVjdEluZm8oKVxuICB9LFxuICBcbiAgX3NldERpbWVuc2lvbjogZnVuY3Rpb24oZGF0YSwgaXNQZXJjZW50KSB7XG4gICAgaWYgKGlzUGVyY2VudCkge1xuICAgICAgcmV0dXJuIGRhdGEgKyBcIiVcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGRhdGEgKyBcInB4XCI7XG4gICAgfVxuICB9LFxuICBcbiAgaXNQZXJjZW50RGltZXNpb246IGZ1bmN0aW9uIChkaW1lbnNpb24pIHtcbiAgICBpZiAoIWRpbWVuc2lvbikgcmV0dXJuIGZhbHNlO1xuICAgIGlmICh0eXBlb2YgZGltZW5zaW9uID09PSAnc3RyaW5nJyAmJiBkaW1lbnNpb24uc3Vic3RyKC0xLCAxKSA9PT0gXCIlXCIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIFxufVxuXG5leHBvcnQgZGVmYXVsdCBNb2RhbDsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../CoCreateJS/node_modules/@cocreate/modal/src/modal.js\n')},"../../CoCreateJS/node_modules/@cocreate/modal/src/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"generateUUID\": () => (/* binding */ generateUUID),\n/* harmony export */   \"ModalStorage\": () => (/* binding */ ModalStorage)\n/* harmony export */ });\nfunction generateUUID(length) {\n  var result           = '';\n  var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  var charactersLength = characters.length;\n  for ( var i = 0; i < length; i++ ) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  \n  var d = new Date().toTimeString();\n  var random = d.replace(/[\\W_]+/g, \"\").substr(0,6);\n  result += random;\n  return result;\n}\n\nvar ModalStorage = {};\n\nObject.defineProperty(ModalStorage, \"rootPageId\", {\n  get: function() { return window.localStorage.getItem('page_rootId');},\n  set: function(id) { window.localStorage.setItem('page_rootId', id); }\n})\n\nObject.defineProperty(ModalStorage, \"parentPageId\", {\n  get: function() { return window.localStorage.getItem('page_parentId');},\n  set: function(id) { window.localStorage.setItem('page_parentId', id); }\n})\n\nObject.defineProperty(ModalStorage, \"pageId\", {\n  get: function() { return window.localStorage.getItem('page_id');},\n  set: function(id) { window.localStorage.setItem('page_id', id); }\n})\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5hdHRyaWJ1dGVzLy4uLy4uL0NvQ3JlYXRlSlMvbm9kZV9tb2R1bGVzL0Bjb2NyZWF0ZS9tb2RhbC9zcmMvdXRpbHMuanM/ODhlNyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFlBQVk7QUFDOUI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsbUJBQW1CLG9EQUFvRDtBQUN2RSxxQkFBcUIsZ0RBQWdEO0FBQ3JFLENBQUM7O0FBRUQ7QUFDQSxtQkFBbUIsc0RBQXNEO0FBQ3pFLHFCQUFxQixrREFBa0Q7QUFDdkUsQ0FBQzs7QUFFRDtBQUNBLG1CQUFtQixnREFBZ0Q7QUFDbkUscUJBQXFCLDRDQUE0QztBQUNqRSxDQUFDIiwiZmlsZSI6Ii4uLy4uL0NvQ3JlYXRlSlMvbm9kZV9tb2R1bGVzL0Bjb2NyZWF0ZS9tb2RhbC9zcmMvdXRpbHMuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBnZW5lcmF0ZVVVSUQobGVuZ3RoKSB7XG4gIHZhciByZXN1bHQgICAgICAgICAgID0gJyc7XG4gIHZhciBjaGFyYWN0ZXJzICAgICAgID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5JztcbiAgdmFyIGNoYXJhY3RlcnNMZW5ndGggPSBjaGFyYWN0ZXJzLmxlbmd0aDtcbiAgZm9yICggdmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG4gICAgcmVzdWx0ICs9IGNoYXJhY3RlcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJhY3RlcnNMZW5ndGgpKTtcbiAgfVxuICBcbiAgdmFyIGQgPSBuZXcgRGF0ZSgpLnRvVGltZVN0cmluZygpO1xuICB2YXIgcmFuZG9tID0gZC5yZXBsYWNlKC9bXFxXX10rL2csIFwiXCIpLnN1YnN0cigwLDYpO1xuICByZXN1bHQgKz0gcmFuZG9tO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG52YXIgTW9kYWxTdG9yYWdlID0ge307XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShNb2RhbFN0b3JhZ2UsIFwicm9vdFBhZ2VJZFwiLCB7XG4gIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BhZ2Vfcm9vdElkJyk7fSxcbiAgc2V0OiBmdW5jdGlvbihpZCkgeyB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BhZ2Vfcm9vdElkJywgaWQpOyB9XG59KVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoTW9kYWxTdG9yYWdlLCBcInBhcmVudFBhZ2VJZFwiLCB7XG4gIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BhZ2VfcGFyZW50SWQnKTt9LFxuICBzZXQ6IGZ1bmN0aW9uKGlkKSB7IHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncGFnZV9wYXJlbnRJZCcsIGlkKTsgfVxufSlcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KE1vZGFsU3RvcmFnZSwgXCJwYWdlSWRcIiwge1xuICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwYWdlX2lkJyk7fSxcbiAgc2V0OiBmdW5jdGlvbihpZCkgeyB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BhZ2VfaWQnLCBpZCk7IH1cbn0pXG5cblxuZXhwb3J0IHtnZW5lcmF0ZVVVSUQsIE1vZGFsU3RvcmFnZX07Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../CoCreateJS/node_modules/@cocreate/modal/src/utils.js\n")}}]);
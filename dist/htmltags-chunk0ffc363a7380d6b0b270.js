/*! For license information please see htmltags-chunk0ffc363a7380d6b0b270.js.LICENSE.txt */
(this.webpackChunkCoCreate_attributes=this.webpackChunkCoCreate_attributes||[]).push([["htmltags-chunk"],{"../../CoCreateJS/node_modules/@cocreate/htmltags/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _cocreate_observer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @cocreate/observer */ \"../../CoCreateJS/node_modules/@cocreate/observer/src/index.js\");\n/* harmony import */ var _cocreate_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @cocreate/utils */ \"../../CoCreateJS/node_modules/@cocreate/utils/src/index.js\");\n/* harmony import */ var _cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @cocreate/cocreatejs */ \"../../CoCreateJS/node_modules/@cocreate/cocreatejs/src/index.js\");\n/* harmony import */ var _cocreate_crud_src_utils_crud_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @cocreate/crud/src/utils.crud.js */ \"../../CoCreateJS/node_modules/@cocreate/crud/src/utils.crud.js\");\n\n\n\n// import {socket, crud} from '@cocreate/crud';\n\n\n\nconst CoCreateHtmlTags = {\n\t\n\tselector: \"h1, h2, h3, h4, h5, h6, p, i, q, a, b, li, span, code, head, div, div.domEditor, iframe, body, img, html\",\n\n\tinit: function() {\n\t\tthis.__initAttribute()\n\t\tthis.__initSocket()\n\t\tthis.__initEvents()\n\t\tthis.initElement(document);\n\t},\n\t\n\tinitElement: function(element) {\n\t\t// if (!element || !element.getAttribute) {\n\t\t// \treturn;\n\t\t// }\n\t\t\n\t\tconst requests = this.__getReqeust(element)\n\t\tif (requests && requests.length > 0) {\n\t\t\t\n\t\t\trequests.forEach((req) => {\n\t\t\t\t_cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_2__.crud.readDocument({\n\t\t\t\t\tcollection: req['collection'],\n\t\t\t\t\tdocument_id: req['document_id'],\n\t\t\t\t\tmetadata: req['metadata']\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t},\n\t\n\tsaveContent: function(el) {\n\t\tconst collection = el.getAttribute('data-collection')\n\t\tconst document_id = el.getAttribute('data-document_id');\n\t\tconst name = el.getAttribute('name')\n\n\t\tlet save_value = '';\n\t\t\n\t\tif (el.tagName === 'IFRAME') {\n\t\t\tsave_value = el.srcdoc;\n\t\t} else {\n\t\t\tsave_value = el.innerHTML;\n\t\t}\n\t\t\n\t\t_cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_2__.crud.updateDocument({\n\t\t\tcollection, \n\t\t\tdocument_id, \n\t\t\tupsert: true,\n\t\t\tbroadcast_sender: false,\n\t\t\tdata: {\n\t\t\t\t[name]: save_value\n\t\t\t},\n\t\t\tbroadcast: false\n\t\t})\t\t\n\t},\n\n\tsave: function(el, broadcast, broadcast_sender) {\n\t\t\n\t\tif (typeof el == \"object\") {\n\t\t\tconst event = new CustomEvent('changed-element', {});\n\t\t\tel.dispatchEvent(event);\n\t\t}\n\t  \n\t\tif (!el.classList.contains('domEditor')) {\n\t\t\treturn;\n\t\t}\n  \n\t  // if (utils.isRealTime(el) || isSubmit) {\n\t\tconst collection = el.getAttribute('data-collection')\n\t\tconst document_id = el.getAttribute('data-document_id');\n\t\tconst name = el.getAttribute('name')\n\t\tlet el_broadcast = el.getAttribute('data-broadcast') || \"true\";\n\t\tlet namespace = el.getAttribute('data-namespace') || '';\n\t\tlet room = el.getAttribute('data-room') || ''\n\t\n\t\tel_broadcast = (el_broadcast === \"true\") ? true : false;\n\t\tif (!broadcast) {\n\t\t\tbroadcast = el_broadcast;\n\t\t}\n\t\t\n\t\tlet save_value = '';\n\t\t\n\t\tif (el.tagName === 'IFRAME') {\n\t\t\tsave_value = el.srcdoc;\n\t\t} else {\n\t\t\tsave_value = el.innerHTML;\n\t\t}\n\t\t\n\t\t_cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_2__.crud.updateDocument({\n\t\t\tnamespace,\n\t\t\troom,\n\t\t\tcollection, \n\t\t\tdocument_id, \n\t\t\tupsert: true,\n\t\t\tbroadcast_sender,\n\t\t\tdata: {\n\t\t\t\t[name]: save_value\n\t\t\t},\n\t\t\tbroadcast: broadcast\n\t\t})\n\t\t  // }\n\t},\n\t\n\trender: function (data, isUpdate) {\n\t\t\n\t\tconst tags_selector = this.__addAttributeSelectorTags(this.selector)\n\t\tlet elements = document.querySelectorAll(tags_selector)\n\t\t\n\t\tlet isRendered = false;\n\t\tlet isRenderedIframe = false;\n\t\tconst self = this;\n\t\t\n\t\tlet encodeData = _cocreate_crud_src_utils_crud_js__WEBPACK_IMPORTED_MODULE_3__.default.encodeObject(data.data);\n\t\t\n\t\telements.forEach((el) => {\n\t\t\tconst collection = el.getAttribute('data-collection')\n\t\t\tconst id = el.getAttribute('data-document_id')\n\t\t\tconst name = el.getAttribute('name')\n\t\t\tconst readValue = _cocreate_utils__WEBPACK_IMPORTED_MODULE_1__.default.isReadValue(el);\n\t\t\tconst metadata = data['metadata'] || {};\n\t\t\tconst request_id = el.getAttribute('data-request_id')\n\t\t\tconst updateValue = _cocreate_utils__WEBPACK_IMPORTED_MODULE_1__.default.isUpdateValue(el)\n\t\t\t\n\t\t\tif (!readValue) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tif (isUpdate && !updateValue) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tif (request_id && data['metadata'] && data['metadata']['request_id'] !== request_id) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t\n\n\t\t\tif (data['collection'] == collection && data['document_id'] == id && !el.isContentEditable) {\n\t\t\t\t// const value = self.__getValueFromJonDeep(data.data, name)\n\t\t\t\tconst value = encodeData[name]\n\t\t\t\tif (value === null || value === undefined) return;\n\t\t\t\t\n\t\t\t\tif (el.tagName === 'IMG') {\n\t\t\t\t\tel.src = value;\n\t\t\t\t} else if (el.tagName === 'IFRAME') {\n\t\t\t\t\tel.srcdoc = value;\n\t\t\t\t\tlet iframe = el;\n\t\t\t\t\tisRenderedIframe = true\n\t\t\t\t\tel.onload = function(e) {\n\t\t\t\t\t\tiframe.removeAttribute('srcdoc');\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t} else if (el.tagName === 'DIV') {\n\t\t\t\t\tif ( el.hasAttribute(\"value\") ) {\n\t\t\t\t\t\tel.setAttribute(\"value\", value);\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (el.classList.contains('domEditor') ) {\n\t\t\t\t\t\tif (el.getAttribute('data-domEditor') == \"replace\") {\n\t\t\t\t\t\t\tlet newElement = document.createElement(\"div\");\n\t\t\t\t\t\t\tnewElement.innerHTML = value;\n\t\t\t\t\t\t\tlet parentNode = el.parentNode;\n\t\t\t\t\t\t\tif (parentNode) {\n\t\t\t\t\t\t\t\tif (newElement.children[0]) {\n\t\t\t\t\t\t\t\t\tparentNode.replaceChild(newElement.children[0], el);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tparentNode.replaceChild(newElement, el);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tel.innerHTML = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\tel.innerHTML = value;\n\t\t\t\t\tif ( el.hasAttribute(\"value\") ) {\n\t\t\t\t\t\tel.setAttribute(\"value\", value);\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\n\t\t\t\tif (el.tagName =='HEAD' || el.tagName == 'BODY') {\n\t\t\t\t\tel.removeAttribute('data-collection');\n\t\t\t\t\tel.removeAttribute('data-document_id');\n\t\t\t\t\tel.removeAttribute('data-pass_id');\n\n\t\t\t\t\tvar scripts = el.querySelectorAll('script');\n\t\t\t\t\tfor (var k = 0; k < scripts.length; k ++) {\n\t\t\t\t\t\tvar tmp = document.createElement('script');\n\t\t\t\t\t\ttmp.type=\"text/javascript\";\n\t\t\t\t\t\tvar src = scripts[k].getAttribute('src');\n\t\t\t\t\t\tvar innerHtml = scripts[k].innerHTML;\n\t\t\t\t\t\tif (innerHtml != \"\") tmp.innerHTML = innerHtml;\n\t\t\t\t\t\tif (src) tmp.src = src;\n\t\t\t\t\t\tel.appendChild(tmp);\n\t\t\t\n\t\t\t\t\t\tscripts[k].remove();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tisRendered = true\n\t\t\t}\n\t\t})\n\t\t\n\t\tif (isRendered) {\n\t\t\t//. rendered event\n\t\t\tconst event = new CustomEvent('CoCreateHtmlTags-rendered', {\n\t\t\t\teventType: 'rendered',\n\t\t\t\tdetail: {\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\t\t\tdocument.dispatchEvent(event)\n\t\t}\n\t\t\n\t\tif (isRenderedIframe) {\n\t\t\tconst iframeEvent = new CustomEvent('CoCreateHtmlTags-iframe-rendered', {\n\t\t\t\teventType: 'rendered',\n\t\t\t\tdetail: {\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t})\n\t\t\tdocument.dispatchEvent(iframeEvent)\n\t\t}\n\t},\n\n\t__getReqeust: function(container) {\n\t\t\n\t\tlet fetch_container = container || document;\n\n\t\tif (!fetch_container.querySelectorAll) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t// const tags_selector = this.__addAttributeSelectorTags('h1, h2, h3, h4, h5, h6, p, i, q, a, b, li, span, code, div.domEditor, img, body, html')\n\t\tconst tags_selector = this.__addAttributeSelectorTags(this.selector)\n\t\tlet elements = fetch_container.querySelectorAll(tags_selector)\n\t\tlet requestData = [];\n\t\t\n\t\tif (elements.length == 0 && fetch_container != document && fetch_container.hasAttribute('data-document_id')) {\n\t\t\telements = [fetch_container];\n\t\t}\n\n\t\telements.forEach((el) => {\n\t\t\tif (_cocreate_observer__WEBPACK_IMPORTED_MODULE_0__.default.getInitialized(el, \"htmltags\")) {\n\t\t\t\treturn\n\t\t\t} \n\t\t\tconst collection = el.getAttribute('data-collection') || \"module_activity\"\n\t\t\tconst document_id = el.getAttribute('data-document_id')\n\t\t\tconst readValue = _cocreate_utils__WEBPACK_IMPORTED_MODULE_1__.default.isReadValue(el);\n\t\t\tconst request_id = el.getAttribute('data-request_id')\n\t\t\t\n\t\t\tif (readValue && _cocreate_utils__WEBPACK_IMPORTED_MODULE_1__.default.checkValue(document_id)  && request_id) {\n\t\t\t\t_cocreate_observer__WEBPACK_IMPORTED_MODULE_0__.default.setInitialized(el, \"htmltags\");\n\t\t\t\t\n\t\t\t\trequestData.push({\n\t\t\t\t\tcollection: collection,\n\t\t\t\t\tdocument_id: document_id,\n\t\t\t\t\tmetadata: {\n\t\t\t\t\t\trequest_id: request_id\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tif (readValue && _cocreate_utils__WEBPACK_IMPORTED_MODULE_1__.default.checkValue(document_id) && !requestData.some((d) => d['collection'] === collection && d['document_id'] === document_id)) {\n\t\t\t\trequestData.push({ \n\t\t\t\t\t'collection': collection, \n\t\t\t\t\t'document_id': document_id \n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t\treturn requestData;\n\t},\n\t\t\n\t\t\n\t__initAttribute: function(container) {\n\n\t\tconst mainContainer = container || document;\n\t\t\n\t\tif (!mainContainer.querySelectorAll) {\n\t\t\treturn;\n\t\t}\n\n\t\t// const tags_selector = this.__addAttributeSelectorTags('h1, h2, h3, h4, h5, h6, p, i, q, a, b, li, span, code, div.domEditor, img, body, html')\n\t\tconst tags_selector = this.__addAttributeSelectorTags(this.selector)\n\n\t\tlet elements = mainContainer.querySelectorAll(tags_selector)\n\t\t\n\t\tif (elements.length == 0 && mainContainer != document && mainContainer.hasAttribute('data-document_id')) {\n\t\t\telements = [mainContainer]\n\t\t}\t\t\n\t\t\n\t\telements.forEach((el) => {\n\t\t\tconst collection = el.getAttribute('data-collection')\n\t\t\tconst id = el.getAttribute('data-document_id')\n\t\t\tconst name = el.getAttribute('name')\n\t\t\t\n\t\t\tif (collection && id && name && el.getAttribute('data-realtime') == null) {\n\t\t\t\tel.setAttribute('data-realtime', true)\n\t\t\t}\n\t\t})\n\t},\n\t\n\t__initSocket: function() {\n\t\tconst self = this;\n\t\t_cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_2__.socket.listen('updateDocument', function(data) {\n\t    \tself.render(data, true)\n\t    })\n\t    _cocreate_cocreatejs__WEBPACK_IMPORTED_MODULE_2__.socket.listen('readDocument', function(data) {\n\t    \tself.render(data)\n\t    })\n\t    \n\t  //  socket.listen('connect', function(data) {\n\t\t\t// const requests = self.__getReqeust()\n\t\t\t// if (requests && requests.length > 0) {\n\t\t\t// \trequests.forEach((req) => {\n\t\t\t// \t\tcrud.readDocument({\n\t\t\t// \t\t\tcollection: req['collection'],\n\t\t\t// \t\t\tdocument_id: req['document_id']\n\t\t\t// \t\t})\n\t\t\t// \t})\n\t\t\t// }\n\t  //  })\n\t},\n\t\n\t__initEvents: function() {\n\t\tconst self = this;\n\t\tdocument.addEventListener('change-content', function(event) {\n\t\t\tconst {element, broadcast, broadcast_sender} = event.detail;\n\t\t\tif (!element) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tconst domEl = self.findElementByChild(element)\n\t\t\tif (domEl) {\n\t\t\t\tself.save(domEl, broadcast, broadcast_sender)\n\t\t\t}\n\t\t\t\n\t\t})\t\n\t},\n\t\n\t__addAttributeSelectorTags: function(str_tags) {\n\t\tlet tags = str_tags.trim().split(/\\s*,\\s*/).map(function(tag) {\n\t\t\treturn tag + \"[data-collection][data-document_id][name]\";\n\t\t});\n\t\treturn tags.join(\", \");\n\t},\n\t\n\tfindElementByChild: function(element) {\n\t\treturn _cocreate_utils__WEBPACK_IMPORTED_MODULE_1__.default.getParentFromElement(element, 'domEditor');\n\t},\n\t\n\t__getValueFromJonDeep : function(json, path) {\n\t\ttry {\n\t\t\tif(typeof json == 'undefined')\n\t\t\t\treturn false;\n\t\t\tlet subpath = path.split('.');\n\t\t\tlet find = subpath.shift();\n\t\t\tif (subpath.length > 0){\n\t\t\t\treturn this.__getValueFromJonDeep(json[find], subpath.join('.'))\n\t\t\t}\n\t\t\treturn json[find];\n\t\t}catch(error){\n\t\t\tconsole.log(error)\n\t\t\treturn false;\n\t\t}\n\t},\n\t\n}\n\nCoCreateHtmlTags.init();\n// CoCreateInit.register('CoCreateHtmlTags', CoCreateHtmlTags, CoCreateHtmlTags.initElement);\n\n_cocreate_observer__WEBPACK_IMPORTED_MODULE_0__.default.init({ \n\tname: 'CoCreateHtmlTags', \n\tobserve: ['subtree', 'childList'],\n\tinclude: '[data-collection][data-document_id][name]', \n\tcallback: function(mutation) {\n\t\tCoCreateHtmlTags.initElement(mutation.target)\n\t}\n})\n\n// if (window.parent !== window) {\n//   console.log(\"dispatch htmlTags rendered\");\n//   window.addEventListener(\"load\", () => {\n//     window.parent.dispatchEvent(new Event(\"CoCreateHtmlTags-rendered\"));\n//   });\n// }\n\n\n\n  console.log(\"dispatch htmlTags rendered\");\n  if( window.document.readyState != 'complete')\n  window.addEventListener(\"load\", () => {\n    window.parent.dispatchEvent(new Event(\"CoCreateHtmlTags-rendered\"));\n  });\n  else\n    window.parent.dispatchEvent(new Event(\"CoCreateHtmlTags-rendered\"));\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CoCreateHtmlTags);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5hdHRyaWJ1dGVzLy4uLy4uL0NvQ3JlYXRlSlMvbm9kZV9tb2R1bGVzL0Bjb2NyZWF0ZS9odG1sdGFncy9zcmMvaW5kZXguanM/YTVhMCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF5QztBQUNMO0FBQ2M7QUFDbEQsV0FBVyxhQUFhO0FBQ2dDOzs7QUFHeEQ7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLElBQUksbUVBQWlCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQSxFQUFFLHFFQUFtQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjs7QUFFQTtBQUNBLHNEQUFzRDtBQUN0RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUEsRUFBRSxxRUFBbUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7QUFDSDtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1CLGtGQUFzQjs7QUFFekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsZ0VBQWlCO0FBQ3RDO0FBQ0E7QUFDQSx1QkFBdUIsa0VBQW1COztBQUUxQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBLHNDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esc0M7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0JBQW9CLG9CQUFvQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsT0FBTyxzRUFBdUI7QUFDOUI7QUFDQSxJO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixnRUFBaUI7QUFDdEM7O0FBRUEsb0JBQW9CLCtEQUFnQjtBQUNwQyxJQUFJLHNFQUF1Qjs7QUFFM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7OztBQUdBLG9CQUFvQiwrREFBZ0I7QUFDcEMsc0I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0EsRUFBRTs7O0FBR0Y7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEc7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUUsK0RBQWE7QUFDZjtBQUNBLE1BQU07QUFDTixLQUFLLCtEQUFhO0FBQ2xCO0FBQ0EsTUFBTTs7QUFFTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1IsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxVQUFVLHFDQUFxQztBQUMvQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsRUFBRTs7QUFFRjtBQUNBLFNBQVMseUVBQTBCO0FBQ25DLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTtBQUNBOztBQUVBLDREQUFhLEU7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQSxpRUFBZSxnQkFBZ0IiLCJmaWxlIjoiLi4vLi4vQ29DcmVhdGVKUy9ub2RlX21vZHVsZXMvQGNvY3JlYXRlL2h0bWx0YWdzL3NyYy9pbmRleC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBvYnNlcnZlciBmcm9tICdAY29jcmVhdGUvb2JzZXJ2ZXInXG5pbXBvcnQgdXRpbHMgZnJvbSAnQGNvY3JlYXRlL3V0aWxzJztcbmltcG9ydCB7c29ja2V0LCBjcnVkfSBmcm9tICdAY29jcmVhdGUvY29jcmVhdGVqcyc7XG4vLyBpbXBvcnQge3NvY2tldCwgY3J1ZH0gZnJvbSAnQGNvY3JlYXRlL2NydWQnO1xuaW1wb3J0IGNydWRVdGlscyBmcm9tICdAY29jcmVhdGUvY3J1ZC9zcmMvdXRpbHMuY3J1ZC5qcydcblxuXG5jb25zdCBDb0NyZWF0ZUh0bWxUYWdzID0ge1xuXHRcblx0c2VsZWN0b3I6IFwiaDEsIGgyLCBoMywgaDQsIGg1LCBoNiwgcCwgaSwgcSwgYSwgYiwgbGksIHNwYW4sIGNvZGUsIGhlYWQsIGRpdiwgZGl2LmRvbUVkaXRvciwgaWZyYW1lLCBib2R5LCBpbWcsIGh0bWxcIixcblxuXHRpbml0OiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLl9faW5pdEF0dHJpYnV0ZSgpXG5cdFx0dGhpcy5fX2luaXRTb2NrZXQoKVxuXHRcdHRoaXMuX19pbml0RXZlbnRzKClcblx0XHR0aGlzLmluaXRFbGVtZW50KGRvY3VtZW50KTtcblx0fSxcblx0XG5cdGluaXRFbGVtZW50OiBmdW5jdGlvbihlbGVtZW50KSB7XG5cdFx0Ly8gaWYgKCFlbGVtZW50IHx8ICFlbGVtZW50LmdldEF0dHJpYnV0ZSkge1xuXHRcdC8vIFx0cmV0dXJuO1xuXHRcdC8vIH1cblx0XHRcblx0XHRjb25zdCByZXF1ZXN0cyA9IHRoaXMuX19nZXRSZXFldXN0KGVsZW1lbnQpXG5cdFx0aWYgKHJlcXVlc3RzICYmIHJlcXVlc3RzLmxlbmd0aCA+IDApIHtcblx0XHRcdFxuXHRcdFx0cmVxdWVzdHMuZm9yRWFjaCgocmVxKSA9PiB7XG5cdFx0XHRcdGNydWQucmVhZERvY3VtZW50KHtcblx0XHRcdFx0XHRjb2xsZWN0aW9uOiByZXFbJ2NvbGxlY3Rpb24nXSxcblx0XHRcdFx0XHRkb2N1bWVudF9pZDogcmVxWydkb2N1bWVudF9pZCddLFxuXHRcdFx0XHRcdG1ldGFkYXRhOiByZXFbJ21ldGFkYXRhJ11cblx0XHRcdFx0fSlcblx0XHRcdH0pXG5cdFx0fVxuXHR9LFxuXHRcblx0c2F2ZUNvbnRlbnQ6IGZ1bmN0aW9uKGVsKSB7XG5cdFx0Y29uc3QgY29sbGVjdGlvbiA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1jb2xsZWN0aW9uJylcblx0XHRjb25zdCBkb2N1bWVudF9pZCA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1kb2N1bWVudF9pZCcpO1xuXHRcdGNvbnN0IG5hbWUgPSBlbC5nZXRBdHRyaWJ1dGUoJ25hbWUnKVxuXG5cdFx0bGV0IHNhdmVfdmFsdWUgPSAnJztcblx0XHRcblx0XHRpZiAoZWwudGFnTmFtZSA9PT0gJ0lGUkFNRScpIHtcblx0XHRcdHNhdmVfdmFsdWUgPSBlbC5zcmNkb2M7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNhdmVfdmFsdWUgPSBlbC5pbm5lckhUTUw7XG5cdFx0fVxuXHRcdFxuXHRcdGNydWQudXBkYXRlRG9jdW1lbnQoe1xuXHRcdFx0Y29sbGVjdGlvbiwgXG5cdFx0XHRkb2N1bWVudF9pZCwgXG5cdFx0XHR1cHNlcnQ6IHRydWUsXG5cdFx0XHRicm9hZGNhc3Rfc2VuZGVyOiBmYWxzZSxcblx0XHRcdGRhdGE6IHtcblx0XHRcdFx0W25hbWVdOiBzYXZlX3ZhbHVlXG5cdFx0XHR9LFxuXHRcdFx0YnJvYWRjYXN0OiBmYWxzZVxuXHRcdH0pXHRcdFxuXHR9LFxuXG5cdHNhdmU6IGZ1bmN0aW9uKGVsLCBicm9hZGNhc3QsIGJyb2FkY2FzdF9zZW5kZXIpIHtcblx0XHRcblx0XHRpZiAodHlwZW9mIGVsID09IFwib2JqZWN0XCIpIHtcblx0XHRcdGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdjaGFuZ2VkLWVsZW1lbnQnLCB7fSk7XG5cdFx0XHRlbC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcblx0XHR9XG5cdCAgXG5cdFx0aWYgKCFlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2RvbUVkaXRvcicpKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuICBcblx0ICAvLyBpZiAodXRpbHMuaXNSZWFsVGltZShlbCkgfHwgaXNTdWJtaXQpIHtcblx0XHRjb25zdCBjb2xsZWN0aW9uID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbGxlY3Rpb24nKVxuXHRcdGNvbnN0IGRvY3VtZW50X2lkID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWRvY3VtZW50X2lkJyk7XG5cdFx0Y29uc3QgbmFtZSA9IGVsLmdldEF0dHJpYnV0ZSgnbmFtZScpXG5cdFx0bGV0IGVsX2Jyb2FkY2FzdCA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1icm9hZGNhc3QnKSB8fCBcInRydWVcIjtcblx0XHRsZXQgbmFtZXNwYWNlID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLW5hbWVzcGFjZScpIHx8ICcnO1xuXHRcdGxldCByb29tID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXJvb20nKSB8fCAnJ1xuXHRcblx0XHRlbF9icm9hZGNhc3QgPSAoZWxfYnJvYWRjYXN0ID09PSBcInRydWVcIikgPyB0cnVlIDogZmFsc2U7XG5cdFx0aWYgKCFicm9hZGNhc3QpIHtcblx0XHRcdGJyb2FkY2FzdCA9IGVsX2Jyb2FkY2FzdDtcblx0XHR9XG5cdFx0XG5cdFx0bGV0IHNhdmVfdmFsdWUgPSAnJztcblx0XHRcblx0XHRpZiAoZWwudGFnTmFtZSA9PT0gJ0lGUkFNRScpIHtcblx0XHRcdHNhdmVfdmFsdWUgPSBlbC5zcmNkb2M7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNhdmVfdmFsdWUgPSBlbC5pbm5lckhUTUw7XG5cdFx0fVxuXHRcdFxuXHRcdGNydWQudXBkYXRlRG9jdW1lbnQoe1xuXHRcdFx0bmFtZXNwYWNlLFxuXHRcdFx0cm9vbSxcblx0XHRcdGNvbGxlY3Rpb24sIFxuXHRcdFx0ZG9jdW1lbnRfaWQsIFxuXHRcdFx0dXBzZXJ0OiB0cnVlLFxuXHRcdFx0YnJvYWRjYXN0X3NlbmRlcixcblx0XHRcdGRhdGE6IHtcblx0XHRcdFx0W25hbWVdOiBzYXZlX3ZhbHVlXG5cdFx0XHR9LFxuXHRcdFx0YnJvYWRjYXN0OiBicm9hZGNhc3Rcblx0XHR9KVxuXHRcdCAgLy8gfVxuXHR9LFxuXHRcblx0cmVuZGVyOiBmdW5jdGlvbiAoZGF0YSwgaXNVcGRhdGUpIHtcblx0XHRcblx0XHRjb25zdCB0YWdzX3NlbGVjdG9yID0gdGhpcy5fX2FkZEF0dHJpYnV0ZVNlbGVjdG9yVGFncyh0aGlzLnNlbGVjdG9yKVxuXHRcdGxldCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGFnc19zZWxlY3Rvcilcblx0XHRcblx0XHRsZXQgaXNSZW5kZXJlZCA9IGZhbHNlO1xuXHRcdGxldCBpc1JlbmRlcmVkSWZyYW1lID0gZmFsc2U7XG5cdFx0Y29uc3Qgc2VsZiA9IHRoaXM7XG5cdFx0XG5cdFx0bGV0IGVuY29kZURhdGEgPSBjcnVkVXRpbHMuZW5jb2RlT2JqZWN0KGRhdGEuZGF0YSk7XG5cdFx0XG5cdFx0ZWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IHtcblx0XHRcdGNvbnN0IGNvbGxlY3Rpb24gPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29sbGVjdGlvbicpXG5cdFx0XHRjb25zdCBpZCA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1kb2N1bWVudF9pZCcpXG5cdFx0XHRjb25zdCBuYW1lID0gZWwuZ2V0QXR0cmlidXRlKCduYW1lJylcblx0XHRcdGNvbnN0IHJlYWRWYWx1ZSA9IHV0aWxzLmlzUmVhZFZhbHVlKGVsKTtcblx0XHRcdGNvbnN0IG1ldGFkYXRhID0gZGF0YVsnbWV0YWRhdGEnXSB8fCB7fTtcblx0XHRcdGNvbnN0IHJlcXVlc3RfaWQgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcmVxdWVzdF9pZCcpXG5cdFx0XHRjb25zdCB1cGRhdGVWYWx1ZSA9IHV0aWxzLmlzVXBkYXRlVmFsdWUoZWwpXG5cdFx0XHRcblx0XHRcdGlmICghcmVhZFZhbHVlKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYgKGlzVXBkYXRlICYmICF1cGRhdGVWYWx1ZSkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGlmIChyZXF1ZXN0X2lkICYmIGRhdGFbJ21ldGFkYXRhJ10gJiYgZGF0YVsnbWV0YWRhdGEnXVsncmVxdWVzdF9pZCddICE9PSByZXF1ZXN0X2lkKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0XG5cblx0XHRcdGlmIChkYXRhWydjb2xsZWN0aW9uJ10gPT0gY29sbGVjdGlvbiAmJiBkYXRhWydkb2N1bWVudF9pZCddID09IGlkICYmICFlbC5pc0NvbnRlbnRFZGl0YWJsZSkge1xuXHRcdFx0XHQvLyBjb25zdCB2YWx1ZSA9IHNlbGYuX19nZXRWYWx1ZUZyb21Kb25EZWVwKGRhdGEuZGF0YSwgbmFtZSlcblx0XHRcdFx0Y29uc3QgdmFsdWUgPSBlbmNvZGVEYXRhW25hbWVdXG5cdFx0XHRcdGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAoZWwudGFnTmFtZSA9PT0gJ0lNRycpIHtcblx0XHRcdFx0XHRlbC5zcmMgPSB2YWx1ZTtcblx0XHRcdFx0fSBlbHNlIGlmIChlbC50YWdOYW1lID09PSAnSUZSQU1FJykge1xuXHRcdFx0XHRcdGVsLnNyY2RvYyA9IHZhbHVlO1xuXHRcdFx0XHRcdGxldCBpZnJhbWUgPSBlbDtcblx0XHRcdFx0XHRpc1JlbmRlcmVkSWZyYW1lID0gdHJ1ZVxuXHRcdFx0XHRcdGVsLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0XHRcdGlmcmFtZS5yZW1vdmVBdHRyaWJ1dGUoJ3NyY2RvYycpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0fSBlbHNlIGlmIChlbC50YWdOYW1lID09PSAnRElWJykge1xuXHRcdFx0XHRcdGlmICggZWwuaGFzQXR0cmlidXRlKFwidmFsdWVcIikgKSB7XG5cdFx0XHRcdFx0XHRlbC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCB2YWx1ZSk7XHRcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnZG9tRWRpdG9yJykgKSB7XG5cdFx0XHRcdFx0XHRpZiAoZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWRvbUVkaXRvcicpID09IFwicmVwbGFjZVwiKSB7XG5cdFx0XHRcdFx0XHRcdGxldCBuZXdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHRcdFx0XHRcdFx0bmV3RWxlbWVudC5pbm5lckhUTUwgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0bGV0IHBhcmVudE5vZGUgPSBlbC5wYXJlbnROb2RlO1xuXHRcdFx0XHRcdFx0XHRpZiAocGFyZW50Tm9kZSkge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChuZXdFbGVtZW50LmNoaWxkcmVuWzBdKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRwYXJlbnROb2RlLnJlcGxhY2VDaGlsZChuZXdFbGVtZW50LmNoaWxkcmVuWzBdLCBlbCk7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdHBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld0VsZW1lbnQsIGVsKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGVsLmlubmVySFRNTCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlbC5pbm5lckhUTUwgPSB2YWx1ZTtcblx0XHRcdFx0XHRpZiAoIGVsLmhhc0F0dHJpYnV0ZShcInZhbHVlXCIpICkge1xuXHRcdFx0XHRcdFx0ZWwuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgdmFsdWUpO1x0XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XG5cdFx0XHRcdGlmIChlbC50YWdOYW1lID09J0hFQUQnIHx8IGVsLnRhZ05hbWUgPT0gJ0JPRFknKSB7XG5cdFx0XHRcdFx0ZWwucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWNvbGxlY3Rpb24nKTtcblx0XHRcdFx0XHRlbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtZG9jdW1lbnRfaWQnKTtcblx0XHRcdFx0XHRlbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtcGFzc19pZCcpO1xuXG5cdFx0XHRcdFx0dmFyIHNjcmlwdHMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCdzY3JpcHQnKTtcblx0XHRcdFx0XHRmb3IgKHZhciBrID0gMDsgayA8IHNjcmlwdHMubGVuZ3RoOyBrICsrKSB7XG5cdFx0XHRcdFx0XHR2YXIgdG1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cdFx0XHRcdFx0XHR0bXAudHlwZT1cInRleHQvamF2YXNjcmlwdFwiO1xuXHRcdFx0XHRcdFx0dmFyIHNyYyA9IHNjcmlwdHNba10uZ2V0QXR0cmlidXRlKCdzcmMnKTtcblx0XHRcdFx0XHRcdHZhciBpbm5lckh0bWwgPSBzY3JpcHRzW2tdLmlubmVySFRNTDtcblx0XHRcdFx0XHRcdGlmIChpbm5lckh0bWwgIT0gXCJcIikgdG1wLmlubmVySFRNTCA9IGlubmVySHRtbDtcblx0XHRcdFx0XHRcdGlmIChzcmMpIHRtcC5zcmMgPSBzcmM7XG5cdFx0XHRcdFx0XHRlbC5hcHBlbmRDaGlsZCh0bXApO1xuXHRcdFx0XG5cdFx0XHRcdFx0XHRzY3JpcHRzW2tdLnJlbW92ZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0XG5cdFx0XHRcdGlzUmVuZGVyZWQgPSB0cnVlXG5cdFx0XHR9XG5cdFx0fSlcblx0XHRcblx0XHRpZiAoaXNSZW5kZXJlZCkge1xuXHRcdFx0Ly8uIHJlbmRlcmVkIGV2ZW50XG5cdFx0XHRjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnQ29DcmVhdGVIdG1sVGFncy1yZW5kZXJlZCcsIHtcblx0XHRcdFx0ZXZlbnRUeXBlOiAncmVuZGVyZWQnLFxuXHRcdFx0XHRkZXRhaWw6IHtcblx0XHRcdFx0XHRkYXRhOiBkYXRhXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHRcblx0XHRcdGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpXG5cdFx0fVxuXHRcdFxuXHRcdGlmIChpc1JlbmRlcmVkSWZyYW1lKSB7XG5cdFx0XHRjb25zdCBpZnJhbWVFdmVudCA9IG5ldyBDdXN0b21FdmVudCgnQ29DcmVhdGVIdG1sVGFncy1pZnJhbWUtcmVuZGVyZWQnLCB7XG5cdFx0XHRcdGV2ZW50VHlwZTogJ3JlbmRlcmVkJyxcblx0XHRcdFx0ZGV0YWlsOiB7XG5cdFx0XHRcdFx0ZGF0YTogZGF0YVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0ZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChpZnJhbWVFdmVudClcblx0XHR9XG5cdH0sXG5cblx0X19nZXRSZXFldXN0OiBmdW5jdGlvbihjb250YWluZXIpIHtcblx0XHRcblx0XHRsZXQgZmV0Y2hfY29udGFpbmVyID0gY29udGFpbmVyIHx8IGRvY3VtZW50O1xuXG5cdFx0aWYgKCFmZXRjaF9jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRcblx0XHQvLyBjb25zdCB0YWdzX3NlbGVjdG9yID0gdGhpcy5fX2FkZEF0dHJpYnV0ZVNlbGVjdG9yVGFncygnaDEsIGgyLCBoMywgaDQsIGg1LCBoNiwgcCwgaSwgcSwgYSwgYiwgbGksIHNwYW4sIGNvZGUsIGRpdi5kb21FZGl0b3IsIGltZywgYm9keSwgaHRtbCcpXG5cdFx0Y29uc3QgdGFnc19zZWxlY3RvciA9IHRoaXMuX19hZGRBdHRyaWJ1dGVTZWxlY3RvclRhZ3ModGhpcy5zZWxlY3Rvcilcblx0XHRsZXQgZWxlbWVudHMgPSBmZXRjaF9jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCh0YWdzX3NlbGVjdG9yKVxuXHRcdGxldCByZXF1ZXN0RGF0YSA9IFtdO1xuXHRcdFxuXHRcdGlmIChlbGVtZW50cy5sZW5ndGggPT0gMCAmJiBmZXRjaF9jb250YWluZXIgIT0gZG9jdW1lbnQgJiYgZmV0Y2hfY29udGFpbmVyLmhhc0F0dHJpYnV0ZSgnZGF0YS1kb2N1bWVudF9pZCcpKSB7XG5cdFx0XHRlbGVtZW50cyA9IFtmZXRjaF9jb250YWluZXJdO1xuXHRcdH1cblxuXHRcdGVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiB7XG5cdFx0XHRpZiAob2JzZXJ2ZXIuZ2V0SW5pdGlhbGl6ZWQoZWwsIFwiaHRtbHRhZ3NcIikpIHtcblx0XHRcdFx0cmV0dXJuXG5cdFx0XHR9IFxuXHRcdFx0Y29uc3QgY29sbGVjdGlvbiA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1jb2xsZWN0aW9uJykgfHwgXCJtb2R1bGVfYWN0aXZpdHlcIlxuXHRcdFx0Y29uc3QgZG9jdW1lbnRfaWQgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZG9jdW1lbnRfaWQnKVxuXHRcdFx0Y29uc3QgcmVhZFZhbHVlID0gdXRpbHMuaXNSZWFkVmFsdWUoZWwpO1xuXHRcdFx0Y29uc3QgcmVxdWVzdF9pZCA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1yZXF1ZXN0X2lkJylcblx0XHRcdFxuXHRcdFx0aWYgKHJlYWRWYWx1ZSAmJiB1dGlscy5jaGVja1ZhbHVlKGRvY3VtZW50X2lkKSAgJiYgcmVxdWVzdF9pZCkge1xuXHRcdFx0XHRvYnNlcnZlci5zZXRJbml0aWFsaXplZChlbCwgXCJodG1sdGFnc1wiKTtcblx0XHRcdFx0XG5cdFx0XHRcdHJlcXVlc3REYXRhLnB1c2goe1xuXHRcdFx0XHRcdGNvbGxlY3Rpb246IGNvbGxlY3Rpb24sXG5cdFx0XHRcdFx0ZG9jdW1lbnRfaWQ6IGRvY3VtZW50X2lkLFxuXHRcdFx0XHRcdG1ldGFkYXRhOiB7XG5cdFx0XHRcdFx0XHRyZXF1ZXN0X2lkOiByZXF1ZXN0X2lkXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdFxuXHRcdFx0aWYgKHJlYWRWYWx1ZSAmJiB1dGlscy5jaGVja1ZhbHVlKGRvY3VtZW50X2lkKSAmJiAhcmVxdWVzdERhdGEuc29tZSgoZCkgPT4gZFsnY29sbGVjdGlvbiddID09PSBjb2xsZWN0aW9uICYmIGRbJ2RvY3VtZW50X2lkJ10gPT09IGRvY3VtZW50X2lkKSkge1xuXHRcdFx0XHRyZXF1ZXN0RGF0YS5wdXNoKHsgXG5cdFx0XHRcdFx0J2NvbGxlY3Rpb24nOiBjb2xsZWN0aW9uLCBcblx0XHRcdFx0XHQnZG9jdW1lbnRfaWQnOiBkb2N1bWVudF9pZCBcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHR9KVxuXHRcdHJldHVybiByZXF1ZXN0RGF0YTtcblx0fSxcblx0XHRcblx0XHRcblx0X19pbml0QXR0cmlidXRlOiBmdW5jdGlvbihjb250YWluZXIpIHtcblxuXHRcdGNvbnN0IG1haW5Db250YWluZXIgPSBjb250YWluZXIgfHwgZG9jdW1lbnQ7XG5cdFx0XG5cdFx0aWYgKCFtYWluQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBjb25zdCB0YWdzX3NlbGVjdG9yID0gdGhpcy5fX2FkZEF0dHJpYnV0ZVNlbGVjdG9yVGFncygnaDEsIGgyLCBoMywgaDQsIGg1LCBoNiwgcCwgaSwgcSwgYSwgYiwgbGksIHNwYW4sIGNvZGUsIGRpdi5kb21FZGl0b3IsIGltZywgYm9keSwgaHRtbCcpXG5cdFx0Y29uc3QgdGFnc19zZWxlY3RvciA9IHRoaXMuX19hZGRBdHRyaWJ1dGVTZWxlY3RvclRhZ3ModGhpcy5zZWxlY3RvcilcblxuXHRcdGxldCBlbGVtZW50cyA9IG1haW5Db250YWluZXIucXVlcnlTZWxlY3RvckFsbCh0YWdzX3NlbGVjdG9yKVxuXHRcdFxuXHRcdGlmIChlbGVtZW50cy5sZW5ndGggPT0gMCAmJiBtYWluQ29udGFpbmVyICE9IGRvY3VtZW50ICYmIG1haW5Db250YWluZXIuaGFzQXR0cmlidXRlKCdkYXRhLWRvY3VtZW50X2lkJykpIHtcblx0XHRcdGVsZW1lbnRzID0gW21haW5Db250YWluZXJdXG5cdFx0fVx0XHRcblx0XHRcblx0XHRlbGVtZW50cy5mb3JFYWNoKChlbCkgPT4ge1xuXHRcdFx0Y29uc3QgY29sbGVjdGlvbiA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1jb2xsZWN0aW9uJylcblx0XHRcdGNvbnN0IGlkID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWRvY3VtZW50X2lkJylcblx0XHRcdGNvbnN0IG5hbWUgPSBlbC5nZXRBdHRyaWJ1dGUoJ25hbWUnKVxuXHRcdFx0XG5cdFx0XHRpZiAoY29sbGVjdGlvbiAmJiBpZCAmJiBuYW1lICYmIGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1yZWFsdGltZScpID09IG51bGwpIHtcblx0XHRcdFx0ZWwuc2V0QXR0cmlidXRlKCdkYXRhLXJlYWx0aW1lJywgdHJ1ZSlcblx0XHRcdH1cblx0XHR9KVxuXHR9LFxuXHRcblx0X19pbml0U29ja2V0OiBmdW5jdGlvbigpIHtcblx0XHRjb25zdCBzZWxmID0gdGhpcztcblx0XHRzb2NrZXQubGlzdGVuKCd1cGRhdGVEb2N1bWVudCcsIGZ1bmN0aW9uKGRhdGEpIHtcblx0ICAgIFx0c2VsZi5yZW5kZXIoZGF0YSwgdHJ1ZSlcblx0ICAgIH0pXG5cdCAgICBzb2NrZXQubGlzdGVuKCdyZWFkRG9jdW1lbnQnLCBmdW5jdGlvbihkYXRhKSB7XG5cdCAgICBcdHNlbGYucmVuZGVyKGRhdGEpXG5cdCAgICB9KVxuXHQgICAgXG5cdCAgLy8gIHNvY2tldC5saXN0ZW4oJ2Nvbm5lY3QnLCBmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHQvLyBjb25zdCByZXF1ZXN0cyA9IHNlbGYuX19nZXRSZXFldXN0KClcblx0XHRcdC8vIGlmIChyZXF1ZXN0cyAmJiByZXF1ZXN0cy5sZW5ndGggPiAwKSB7XG5cdFx0XHQvLyBcdHJlcXVlc3RzLmZvckVhY2goKHJlcSkgPT4ge1xuXHRcdFx0Ly8gXHRcdGNydWQucmVhZERvY3VtZW50KHtcblx0XHRcdC8vIFx0XHRcdGNvbGxlY3Rpb246IHJlcVsnY29sbGVjdGlvbiddLFxuXHRcdFx0Ly8gXHRcdFx0ZG9jdW1lbnRfaWQ6IHJlcVsnZG9jdW1lbnRfaWQnXVxuXHRcdFx0Ly8gXHRcdH0pXG5cdFx0XHQvLyBcdH0pXG5cdFx0XHQvLyB9XG5cdCAgLy8gIH0pXG5cdH0sXG5cdFxuXHRfX2luaXRFdmVudHM6IGZ1bmN0aW9uKCkge1xuXHRcdGNvbnN0IHNlbGYgPSB0aGlzO1xuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZS1jb250ZW50JywgZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdGNvbnN0IHtlbGVtZW50LCBicm9hZGNhc3QsIGJyb2FkY2FzdF9zZW5kZXJ9ID0gZXZlbnQuZGV0YWlsO1xuXHRcdFx0aWYgKCFlbGVtZW50KSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Y29uc3QgZG9tRWwgPSBzZWxmLmZpbmRFbGVtZW50QnlDaGlsZChlbGVtZW50KVxuXHRcdFx0aWYgKGRvbUVsKSB7XG5cdFx0XHRcdHNlbGYuc2F2ZShkb21FbCwgYnJvYWRjYXN0LCBicm9hZGNhc3Rfc2VuZGVyKVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0fSlcdFxuXHR9LFxuXHRcblx0X19hZGRBdHRyaWJ1dGVTZWxlY3RvclRhZ3M6IGZ1bmN0aW9uKHN0cl90YWdzKSB7XG5cdFx0bGV0IHRhZ3MgPSBzdHJfdGFncy50cmltKCkuc3BsaXQoL1xccyosXFxzKi8pLm1hcChmdW5jdGlvbih0YWcpIHtcblx0XHRcdHJldHVybiB0YWcgKyBcIltkYXRhLWNvbGxlY3Rpb25dW2RhdGEtZG9jdW1lbnRfaWRdW25hbWVdXCI7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHRhZ3Muam9pbihcIiwgXCIpO1xuXHR9LFxuXHRcblx0ZmluZEVsZW1lbnRCeUNoaWxkOiBmdW5jdGlvbihlbGVtZW50KSB7XG5cdFx0cmV0dXJuIHV0aWxzLmdldFBhcmVudEZyb21FbGVtZW50KGVsZW1lbnQsICdkb21FZGl0b3InKTtcblx0fSxcblx0XG5cdF9fZ2V0VmFsdWVGcm9tSm9uRGVlcCA6IGZ1bmN0aW9uKGpzb24sIHBhdGgpIHtcblx0XHR0cnkge1xuXHRcdFx0aWYodHlwZW9mIGpzb24gPT0gJ3VuZGVmaW5lZCcpXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdGxldCBzdWJwYXRoID0gcGF0aC5zcGxpdCgnLicpO1xuXHRcdFx0bGV0IGZpbmQgPSBzdWJwYXRoLnNoaWZ0KCk7XG5cdFx0XHRpZiAoc3VicGF0aC5sZW5ndGggPiAwKXtcblx0XHRcdFx0cmV0dXJuIHRoaXMuX19nZXRWYWx1ZUZyb21Kb25EZWVwKGpzb25bZmluZF0sIHN1YnBhdGguam9pbignLicpKVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGpzb25bZmluZF07XG5cdFx0fWNhdGNoKGVycm9yKXtcblx0XHRcdGNvbnNvbGUubG9nKGVycm9yKVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fSxcblx0XG59XG5cbkNvQ3JlYXRlSHRtbFRhZ3MuaW5pdCgpO1xuLy8gQ29DcmVhdGVJbml0LnJlZ2lzdGVyKCdDb0NyZWF0ZUh0bWxUYWdzJywgQ29DcmVhdGVIdG1sVGFncywgQ29DcmVhdGVIdG1sVGFncy5pbml0RWxlbWVudCk7XG5cbm9ic2VydmVyLmluaXQoeyBcblx0bmFtZTogJ0NvQ3JlYXRlSHRtbFRhZ3MnLCBcblx0b2JzZXJ2ZTogWydzdWJ0cmVlJywgJ2NoaWxkTGlzdCddLFxuXHRpbmNsdWRlOiAnW2RhdGEtY29sbGVjdGlvbl1bZGF0YS1kb2N1bWVudF9pZF1bbmFtZV0nLCBcblx0Y2FsbGJhY2s6IGZ1bmN0aW9uKG11dGF0aW9uKSB7XG5cdFx0Q29DcmVhdGVIdG1sVGFncy5pbml0RWxlbWVudChtdXRhdGlvbi50YXJnZXQpXG5cdH1cbn0pXG5cbi8vIGlmICh3aW5kb3cucGFyZW50ICE9PSB3aW5kb3cpIHtcbi8vICAgY29uc29sZS5sb2coXCJkaXNwYXRjaCBodG1sVGFncyByZW5kZXJlZFwiKTtcbi8vICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcbi8vICAgICB3aW5kb3cucGFyZW50LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiQ29DcmVhdGVIdG1sVGFncy1yZW5kZXJlZFwiKSk7XG4vLyAgIH0pO1xuLy8gfVxuXG5cblxuICBjb25zb2xlLmxvZyhcImRpc3BhdGNoIGh0bWxUYWdzIHJlbmRlcmVkXCIpO1xuICBpZiggd2luZG93LmRvY3VtZW50LnJlYWR5U3RhdGUgIT0gJ2NvbXBsZXRlJylcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcbiAgICB3aW5kb3cucGFyZW50LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiQ29DcmVhdGVIdG1sVGFncy1yZW5kZXJlZFwiKSk7XG4gIH0pO1xuICBlbHNlXG4gICAgd2luZG93LnBhcmVudC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcIkNvQ3JlYXRlSHRtbFRhZ3MtcmVuZGVyZWRcIikpO1xuXG5leHBvcnQgZGVmYXVsdCBDb0NyZWF0ZUh0bWxUYWdzOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../CoCreateJS/node_modules/@cocreate/htmltags/src/index.js\n")}}]);